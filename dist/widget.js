(function(){"use strict";/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var gd,_d;function Gt(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Te=process.env.NODE_ENV!=="production"?Object.freeze({}):{},nr=process.env.NODE_ENV!=="production"?Object.freeze([]):[],Fe=()=>{},Kl=()=>!1,Fr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ks=t=>t.startsWith("onUpdate:"),Oe=Object.assign,bo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},lp=Object.prototype.hasOwnProperty,fe=(t,e)=>lp.call(t,e),Z=Array.isArray,Sn=t=>Lr(t)==="[object Map]",Wl=t=>Lr(t)==="[object Set]",zl=t=>Lr(t)==="[object Date]",re=t=>typeof t=="function",Ve=t=>typeof t=="string",xt=t=>typeof t=="symbol",Ee=t=>t!==null&&typeof t=="object",Ro=t=>(Ee(t)||re(t))&&re(t.then)&&re(t.catch),Gl=Object.prototype.toString,Lr=t=>Gl.call(t),So=t=>Lr(t).slice(8,-1),Ql=t=>Lr(t)==="[object Object]",Vo=t=>Ve(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ur=Gt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cp=Gt("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Ws=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},up=/-\w/g,bt=Ws(t=>t.replace(up,e=>e.slice(1).toUpperCase())),hp=/\B([A-Z])/g,cn=Ws(t=>t.replace(hp,"-$1").toLowerCase()),zs=Ws(t=>t.charAt(0).toUpperCase()+t.slice(1)),Vn=Ws(t=>t?`on${zs(t)}`:""),un=(t,e)=>!Object.is(t,e),rr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Gs=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},No=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Yl;const Br=()=>Yl||(Yl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qs(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ve(r)?mp(r):Qs(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Ve(t)||Ee(t))return t}const fp=/;(?![^(]*\))/g,dp=/:([^]+)/,pp=/\/\*[^]*?\*\//g;function mp(t){const e={};return t.replace(pp,"").split(fp).forEach(n=>{if(n){const r=n.split(dp);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ys(t){let e="";if(Ve(t))e=t;else if(Z(t))for(let n=0;n<t.length;n++){const r=Ys(t[n]);r&&(e+=r+" ")}else if(Ee(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const gp="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",_p="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",yp="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",vp=Gt(gp),Ep=Gt(_p),Tp=Gt(yp),wp=Gt("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Xl(t){return!!t||t===""}function Ip(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Xs(t[r],e[r]);return n}function Xs(t,e){if(t===e)return!0;let n=zl(t),r=zl(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=xt(t),r=xt(e),n||r)return t===e;if(n=Z(t),r=Z(e),n||r)return n&&r?Ip(t,e):!1;if(n=Ee(t),r=Ee(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const l=t.hasOwnProperty(a),u=e.hasOwnProperty(a);if(l&&!u||!l&&u||!Xs(t[a],e[a]))return!1}}return String(t)===String(e)}const Jl=t=>!!(t&&t.__v_isRef===!0),hn=t=>Ve(t)?t:t==null?"":Z(t)||Ee(t)&&(t.toString===Gl||!re(t.toString))?Jl(t)?hn(t.value):JSON.stringify(t,Zl,2):String(t),Zl=(t,e)=>Jl(e)?Zl(t,e.value):Sn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Co(r,i)+" =>"]=s,n),{})}:Wl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Co(n))}:xt(e)?Co(e):Ee(e)&&!Z(e)&&!Ql(e)?String(e):e,Co=(t,e="")=>{var n;return xt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Rt(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let ft;class Ap{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ft,!e&&ft&&(this.index=(ft.scopes||(ft.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ft;try{return ft=this,e()}finally{ft=n}}else process.env.NODE_ENV!=="production"&&Rt("cannot run an inactive effect scope.")}on(){++this._on===1&&(this.prevScope=ft,ft=this)}off(){this._on>0&&--this._on===0&&(ft=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function bp(){return ft}let we;const Po=new WeakSet;class ec{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ft&&ft.active&&ft.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Po.has(this)&&(Po.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||nc(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ac(this),rc(this);const e=we,n=St;we=this,St=!0;try{return this.fn()}finally{process.env.NODE_ENV!=="production"&&we!==this&&Rt("Active effect was not restored correctly - this is likely a Vue internal bug."),sc(this),we=e,St=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ko(e);this.deps=this.depsTail=void 0,ac(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Po.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xo(this)&&this.run()}get dirty(){return xo(this)}}let tc=0,jr,$r;function nc(t,e=!1){if(t.flags|=8,e){t.next=$r,$r=t;return}t.next=jr,jr=t}function Do(){tc++}function Oo(){if(--tc>0)return;if($r){let e=$r;for($r=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;jr;){let e=jr;for(jr=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function rc(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function sc(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ko(r),Rp(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function xo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(ic(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function ic(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===qr)||(t.globalVersion=qr,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xo(t))))return;t.flags|=2;const e=t.dep,n=we,r=St;we=t,St=!0;try{rc(t);const s=t.fn(t._value);(e.version===0||un(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{we=n,St=r,sc(t),t.flags&=-3}}function ko(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),process.env.NODE_ENV!=="production"&&n.subsHead===t&&(n.subsHead=s),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ko(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Rp(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let St=!0;const oc=[];function Vt(){oc.push(St),St=!1}function Nt(){const t=oc.pop();St=t===void 0?!0:t}function ac(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=we;we=void 0;try{e()}finally{we=n}}}let qr=0;class Sp{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0,process.env.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(e){if(!we||!St||we===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==we)n=this.activeLink=new Sp(we,this),we.deps?(n.prevDep=we.depsTail,we.depsTail.nextDep=n,we.depsTail=n):we.deps=we.depsTail=n,lc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=we.depsTail,n.nextDep=void 0,we.depsTail.nextDep=n,we.depsTail=n,we.deps===n&&(we.deps=r)}return process.env.NODE_ENV!=="production"&&we.onTrack&&we.onTrack(Oe({effect:we},e)),n}trigger(e){this.version++,qr++,this.notify(e)}notify(e){Do();try{if(process.env.NODE_ENV!=="production")for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(Oe({effect:n.sub},e));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Oo()}}}function lc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)lc(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),process.env.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}}const Fo=new WeakMap,Nn=Symbol(process.env.NODE_ENV!=="production"?"Object iterate":""),Lo=Symbol(process.env.NODE_ENV!=="production"?"Map keys iterate":""),Hr=Symbol(process.env.NODE_ENV!=="production"?"Array iterate":"");function Le(t,e,n){if(St&&we){let r=Fo.get(t);r||Fo.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Mo),s.map=r,s.key=n),process.env.NODE_ENV!=="production"?s.track({target:t,type:e,key:n}):s.track()}}function kt(t,e,n,r,s,i){const a=Fo.get(t);if(!a){qr++;return}const l=u=>{u&&(process.env.NODE_ENV!=="production"?u.trigger({target:t,type:e,key:n,newValue:r,oldValue:s,oldTarget:i}):u.trigger())};if(Do(),e==="clear")a.forEach(l);else{const u=Z(t),f=u&&Vo(n);if(u&&n==="length"){const d=Number(r);a.forEach((p,v)=>{(v==="length"||v===Hr||!xt(v)&&v>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Hr)),e){case"add":u?f&&l(a.get("length")):(l(a.get(Nn)),Sn(t)&&l(a.get(Lo)));break;case"delete":u||(l(a.get(Nn)),Sn(t)&&l(a.get(Lo)));break;case"set":Sn(t)&&l(a.get(Nn));break}}Oo()}function sr(t){const e=le(t);return e===t?e:(Le(e,"iterate",Hr),it(t)?e:e.map(je))}function Js(t){return Le(t=le(t),"iterate",Hr),t}const Vp={__proto__:null,[Symbol.iterator](){return Uo(this,Symbol.iterator,je)},concat(...t){return sr(this).concat(...t.map(e=>Z(e)?sr(e):e))},entries(){return Uo(this,"entries",t=>(t[1]=je(t[1]),t))},every(t,e){return Qt(this,"every",t,e,void 0,arguments)},filter(t,e){return Qt(this,"filter",t,e,n=>n.map(je),arguments)},find(t,e){return Qt(this,"find",t,e,je,arguments)},findIndex(t,e){return Qt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Qt(this,"findLast",t,e,je,arguments)},findLastIndex(t,e){return Qt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Qt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Bo(this,"includes",t)},indexOf(...t){return Bo(this,"indexOf",t)},join(t){return sr(this).join(t)},lastIndexOf(...t){return Bo(this,"lastIndexOf",t)},map(t,e){return Qt(this,"map",t,e,void 0,arguments)},pop(){return Kr(this,"pop")},push(...t){return Kr(this,"push",t)},reduce(t,...e){return cc(this,"reduce",t,e)},reduceRight(t,...e){return cc(this,"reduceRight",t,e)},shift(){return Kr(this,"shift")},some(t,e){return Qt(this,"some",t,e,void 0,arguments)},splice(...t){return Kr(this,"splice",t)},toReversed(){return sr(this).toReversed()},toSorted(t){return sr(this).toSorted(t)},toSpliced(...t){return sr(this).toSpliced(...t)},unshift(...t){return Kr(this,"unshift",t)},values(){return Uo(this,"values",je)}};function Uo(t,e,n){const r=Js(t),s=r[e]();return r!==t&&!it(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Np=Array.prototype;function Qt(t,e,n,r,s,i){const a=Js(t),l=a!==t&&!it(t),u=a[e];if(u!==Np[e]){const p=u.apply(t,i);return l?je(p):p}let f=n;a!==t&&(l?f=function(p,v){return n.call(this,je(p),v,t)}:n.length>2&&(f=function(p,v){return n.call(this,p,v,t)}));const d=u.call(a,f,r);return l&&s?s(d):d}function cc(t,e,n,r){const s=Js(t);let i=n;return s!==t&&(it(t)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,t)}):i=function(a,l,u){return n.call(this,a,je(l),u,t)}),s[e](i,...r)}function Bo(t,e,n){const r=le(t);Le(r,"iterate",Hr);const s=r[e](...n);return(s===-1||s===!1)&&ri(n[0])?(n[0]=le(n[0]),r[e](...n)):s}function Kr(t,e,n=[]){Vt(),Do();const r=le(t)[e].apply(t,n);return Oo(),Nt(),r}const Cp=Gt("__proto__,__v_isRef,__isVue"),uc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xt));function Pp(t){xt(t)||(t=String(t));const e=le(this);return Le(e,"has",t),e.hasOwnProperty(t)}class hc{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?yc:_c:i?gc:mc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Z(e);if(!s){let u;if(a&&(u=Vp[n]))return u;if(n==="hasOwnProperty")return Pp}const l=Reflect.get(e,n,xe(e)?e:r);if((xt(n)?uc.has(n):Cp(n))||(s||Le(e,"get",n),i))return l;if(xe(l)){const u=a&&Vo(n)?l:l.value;return s&&Ee(u)?qo(u):u}return Ee(l)?s?qo(l):$o(l):l}}class fc extends hc{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const u=Ft(i);if(!it(r)&&!Ft(r)&&(i=le(i),r=le(r)),!Z(e)&&xe(i)&&!xe(r))return u?(process.env.NODE_ENV!=="production"&&Rt(`Set operation on key "${String(n)}" failed: target is readonly.`,e[n]),!0):(i.value=r,!0)}const a=Z(e)&&Vo(n)?Number(n)<e.length:fe(e,n),l=Reflect.set(e,n,r,xe(e)?e:s);return e===le(s)&&(a?un(r,i)&&kt(e,"set",n,r,i):kt(e,"add",n,r)),l}deleteProperty(e,n){const r=fe(e,n),s=e[n],i=Reflect.deleteProperty(e,n);return i&&r&&kt(e,"delete",n,void 0,s),i}has(e,n){const r=Reflect.has(e,n);return(!xt(n)||!uc.has(n))&&Le(e,"has",n),r}ownKeys(e){return Le(e,"iterate",Z(e)?"length":Nn),Reflect.ownKeys(e)}}class dc extends hc{constructor(e=!1){super(!0,e)}set(e,n){return process.env.NODE_ENV!=="production"&&Rt(`Set operation on key "${String(n)}" failed: target is readonly.`,e),!0}deleteProperty(e,n){return process.env.NODE_ENV!=="production"&&Rt(`Delete operation on key "${String(n)}" failed: target is readonly.`,e),!0}}const Dp=new fc,Op=new dc,xp=new fc(!0),kp=new dc(!0),jo=t=>t,Zs=t=>Reflect.getPrototypeOf(t);function Mp(t,e,n){return function(...r){const s=this.__v_raw,i=le(s),a=Sn(i),l=t==="entries"||t===Symbol.iterator&&a,u=t==="keys"&&a,f=s[t](...r),d=n?jo:e?si:je;return!e&&Le(i,"iterate",u?Lo:Nn),{next(){const{value:p,done:v}=f.next();return v?{value:p,done:v}:{value:l?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function ei(t){return function(...e){if(process.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:"";Rt(`${zs(t)} operation ${n}failed: target is readonly.`,le(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Fp(t,e){const n={get(s){const i=this.__v_raw,a=le(i),l=le(s);t||(un(s,l)&&Le(a,"get",s),Le(a,"get",l));const{has:u}=Zs(a),f=e?jo:t?si:je;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Le(le(s),"iterate",Nn),s.size},has(s){const i=this.__v_raw,a=le(i),l=le(s);return t||(un(s,l)&&Le(a,"has",s),Le(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=le(l),f=e?jo:t?si:je;return!t&&Le(u,"iterate",Nn),l.forEach((d,p)=>s.call(i,f(d),f(p),a))}};return Oe(n,t?{add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear")}:{add(s){!e&&!it(s)&&!Ft(s)&&(s=le(s));const i=le(this);return Zs(i).has.call(i,s)||(i.add(s),kt(i,"add",s,s)),this},set(s,i){!e&&!it(i)&&!Ft(i)&&(i=le(i));const a=le(this),{has:l,get:u}=Zs(a);let f=l.call(a,s);f?process.env.NODE_ENV!=="production"&&pc(a,l,s):(s=le(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?un(i,d)&&kt(a,"set",s,i,d):kt(a,"add",s,i),this},delete(s){const i=le(this),{has:a,get:l}=Zs(i);let u=a.call(i,s);u?process.env.NODE_ENV!=="production"&&pc(i,a,s):(s=le(s),u=a.call(i,s));const f=l?l.call(i,s):void 0,d=i.delete(s);return u&&kt(i,"delete",s,void 0,f),d},clear(){const s=le(this),i=s.size!==0,a=process.env.NODE_ENV!=="production"?Sn(s)?new Map(s):new Set(s):void 0,l=s.clear();return i&&kt(s,"clear",void 0,void 0,a),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Mp(s,t,e)}),n}function ti(t,e){const n=Fp(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(fe(n,s)&&s in r?n:r,s,i)}const Lp={get:ti(!1,!1)},Up={get:ti(!1,!0)},Bp={get:ti(!0,!1)},jp={get:ti(!0,!0)};function pc(t,e,n){const r=le(n);if(r!==n&&e.call(t,r)){const s=So(t);Rt(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const mc=new WeakMap,gc=new WeakMap,_c=new WeakMap,yc=new WeakMap;function $p(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function qp(t){return t.__v_skip||!Object.isExtensible(t)?0:$p(So(t))}function $o(t){return Ft(t)?t:ni(t,!1,Dp,Lp,mc)}function Hp(t){return ni(t,!1,xp,Up,gc)}function qo(t){return ni(t,!0,Op,Bp,_c)}function Mt(t){return ni(t,!0,kp,jp,yc)}function ni(t,e,n,r,s){if(!Ee(t))return process.env.NODE_ENV!=="production"&&Rt(`value cannot be made ${e?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=qp(t);if(i===0)return t;const a=s.get(t);if(a)return a;const l=new Proxy(t,i===2?r:n);return s.set(t,l),l}function Cn(t){return Ft(t)?Cn(t.__v_raw):!!(t&&t.__v_isReactive)}function Ft(t){return!!(t&&t.__v_isReadonly)}function it(t){return!!(t&&t.__v_isShallow)}function ri(t){return t?!!t.__v_raw:!1}function le(t){const e=t&&t.__v_raw;return e?le(e):t}function Kp(t){return!fe(t,"__v_skip")&&Object.isExtensible(t)&&Gs(t,"__v_skip",!0),t}const je=t=>Ee(t)?$o(t):t,si=t=>Ee(t)?qo(t):t;function xe(t){return t?t.__v_isRef===!0:!1}function Pn(t){return Wp(t,!1)}function Wp(t,e){return xe(t)?t:new zp(t,e)}class zp{constructor(e,n){this.dep=new Mo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:le(e),this._value=n?e:je(e),this.__v_isShallow=n}get value(){return process.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||it(e)||Ft(e);e=r?e:le(e),un(e,n)&&(this._rawValue=e,this._value=r?e:je(e),process.env.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:e,oldValue:n}):this.dep.trigger())}}function Gp(t){return xe(t)?t.value:t}const Qp={get:(t,e,n)=>e==="__v_raw"?t:Gp(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return xe(s)&&!xe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function vc(t){return Cn(t)?t:new Proxy(t,Qp)}class Yp{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Mo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&we!==this)return nc(this,!0),!0;process.env.NODE_ENV}get value(){const e=process.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track();return ic(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter?this.setter(e):process.env.NODE_ENV!=="production"&&Rt("Write operation failed: computed value is readonly")}}function Xp(t,e,n=!1){let r,s;re(t)?r=t:(r=t.get,s=t.set);const i=new Yp(r,s,n);return process.env.NODE_ENV,i}const ii={},oi=new WeakMap;let Dn;function Jp(t,e=!1,n=Dn){if(n){let r=oi.get(n);r||oi.set(n,r=[]),r.push(t)}else process.env.NODE_ENV!=="production"&&!e&&Rt("onWatcherCleanup() was called when there was no active watcher to associate with.")}function Zp(t,e,n=Te){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=Q=>{(n.onWarn||Rt)("Invalid watch source: ",Q,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},d=Q=>s?Q:it(Q)||s===!1||s===0?Yt(Q,1):Yt(Q);let p,v,I,C,P=!1,k=!1;if(xe(t)?(v=()=>t.value,P=it(t)):Cn(t)?(v=()=>d(t),P=!0):Z(t)?(k=!0,P=t.some(Q=>Cn(Q)||it(Q)),v=()=>t.map(Q=>{if(xe(Q))return Q.value;if(Cn(Q))return d(Q);if(re(Q))return u?u(Q,2):Q();process.env.NODE_ENV!=="production"&&f(Q)})):re(t)?e?v=u?()=>u(t,2):t:v=()=>{if(I){Vt();try{I()}finally{Nt()}}const Q=Dn;Dn=p;try{return u?u(t,3,[C]):t(C)}finally{Dn=Q}}:(v=Fe,process.env.NODE_ENV!=="production"&&f(t)),e&&s){const Q=v,he=s===!0?1/0:s;v=()=>Yt(Q(),he)}const X=bp(),K=()=>{p.stop(),X&&X.active&&bo(X.effects,p)};if(i&&e){const Q=e;e=(...he)=>{Q(...he),K()}}let z=k?new Array(t.length).fill(ii):ii;const pe=Q=>{if(!(!(p.flags&1)||!p.dirty&&!Q))if(e){const he=p.run();if(s||P||(k?he.some((A,_)=>un(A,z[_])):un(he,z))){I&&I();const A=Dn;Dn=p;try{const _=[he,z===ii?void 0:k&&z[0]===ii?[]:z,C];z=he,u?u(e,3,_):e(..._)}finally{Dn=A}}}else p.run()};return l&&l(pe),p=new ec(v),p.scheduler=a?()=>a(pe,!1):pe,C=Q=>Jp(Q,!1,p),I=p.onStop=()=>{const Q=oi.get(p);if(Q){if(u)u(Q,4);else for(const he of Q)he();oi.delete(p)}},process.env.NODE_ENV!=="production"&&(p.onTrack=n.onTrack,p.onTrigger=n.onTrigger),e?r?pe(!0):z=p.run():a?a(pe.bind(null,!0),!0):p.run(),K.pause=p.pause.bind(p),K.resume=p.resume.bind(p),K.stop=K,K}function Yt(t,e=1/0,n){if(e<=0||!Ee(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,xe(t))Yt(t.value,e,n);else if(Z(t))for(let r=0;r<t.length;r++)Yt(t[r],e,n);else if(Wl(t)||Sn(t))t.forEach(r=>{Yt(r,e,n)});else if(Ql(t)){for(const r in t)Yt(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Yt(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const On=[];function ai(t){On.push(t)}function li(){On.pop()}let Ho=!1;function j(t,...e){if(Ho)return;Ho=!0,Vt();const n=On.length?On[On.length-1].component:null,r=n&&n.appContext.config.warnHandler,s=em();if(r)ir(r,n,11,[t+e.map(i=>{var a,l;return(l=(a=i.toString)==null?void 0:a.call(i))!=null?l:JSON.stringify(i)}).join(""),n&&n.proxy,s.map(({vnode:i})=>`at <${Si(n,i.type)}>`).join(`
`),s]);else{const i=[`[Vue warn]: ${t}`,...e];s.length&&i.push(`
`,...tm(s)),console.warn(...i)}Nt(),Ho=!1}function em(){let t=On[On.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return e}function tm(t){const e=[];return t.forEach((n,r)=>{e.push(...r===0?[]:[`
`],...nm(n))}),e}function nm({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",r=t.component?t.component.parent==null:!1,s=` at <${Si(t.component,t.type,r)}`,i=">"+n;return t.props?[s,...rm(t.props),i]:[s+i]}function rm(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(r=>{e.push(...Ec(r,t[r]))}),n.length>3&&e.push(" ..."),e}function Ec(t,e,n){return Ve(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:xe(e)?(e=Ec(t,le(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):re(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=le(e),n?e:[`${t}=`,e])}const Ko={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ir(t,e,n,r){try{return r?t(...r):t()}catch(s){Wr(s,e,n)}}function Lt(t,e,n,r){if(re(t)){const s=ir(t,e,n,r);return s&&Ro(s)&&s.catch(i=>{Wr(i,e,n)}),s}if(Z(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Lt(t[i],e,n,r));return s}else process.env.NODE_ENV!=="production"&&j(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof t}`)}function Wr(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Te;if(e){let l=e.parent;const u=e.proxy,f=process.env.NODE_ENV!=="production"?Ko[n]:`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,u,f)===!1)return}l=l.parent}if(i){Vt(),ir(i,null,10,[t,u,f]),Nt();return}}sm(t,n,s,r,a)}function sm(t,e,n,r=!0,s=!1){if(process.env.NODE_ENV!=="production"){const i=Ko[e];if(n&&ai(n),j(`Unhandled error${i?` during execution of ${i}`:""}`),n&&li(),r)throw t;console.error(t)}else{if(s)throw t;console.error(t)}}const ot=[];let Ut=-1;const or=[];let fn=null,ar=0;const Tc=Promise.resolve();let ci=null;const im=100;function om(t){const e=ci||Tc;return t?e.then(this?t.bind(this):t):e}function am(t){let e=Ut+1,n=ot.length;for(;e<n;){const r=e+n>>>1,s=ot[r],i=zr(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ui(t){if(!(t.flags&1)){const e=zr(t),n=ot[ot.length-1];!n||!(t.flags&2)&&e>=zr(n)?ot.push(t):ot.splice(am(e),0,t),t.flags|=1,wc()}}function wc(){ci||(ci=Tc.then(Rc))}function Ic(t){Z(t)?or.push(...t):fn&&t.id===-1?fn.splice(ar+1,0,t):t.flags&1||(or.push(t),t.flags|=1),wc()}function Ac(t,e,n=Ut+1){for(process.env.NODE_ENV!=="production"&&(e=e||new Map);n<ot.length;n++){const r=ot[n];if(r&&r.flags&2){if(t&&r.id!==t.uid||process.env.NODE_ENV!=="production"&&Wo(e,r))continue;ot.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function bc(t){if(or.length){const e=[...new Set(or)].sort((n,r)=>zr(n)-zr(r));if(or.length=0,fn){fn.push(...e);return}for(fn=e,process.env.NODE_ENV!=="production"&&(t=t||new Map),ar=0;ar<fn.length;ar++){const n=fn[ar];process.env.NODE_ENV!=="production"&&Wo(t,n)||(n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2)}fn=null,ar=0}}const zr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function Rc(t){process.env.NODE_ENV!=="production"&&(t=t||new Map);const e=process.env.NODE_ENV!=="production"?n=>Wo(t,n):Fe;try{for(Ut=0;Ut<ot.length;Ut++){const n=ot[Ut];if(n&&!(n.flags&8)){if(process.env.NODE_ENV!=="production"&&e(n))continue;n.flags&4&&(n.flags&=-2),ir(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2)}}}finally{for(;Ut<ot.length;Ut++){const n=ot[Ut];n&&(n.flags&=-2)}Ut=-1,ot.length=0,bc(t),ci=null,(ot.length||or.length)&&Rc(t)}}function Wo(t,e){const n=t.get(e)||0;if(n>im){const r=e.i,s=r&&bu(r.type);return Wr(`Maximum recursive updates exceeded${s?` in component <${s}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return t.set(e,n+1),!1}let Bt=!1;const hi=new Map;process.env.NODE_ENV!=="production"&&(Br().__VUE_HMR_RUNTIME__={createRecord:zo(Sc),rerender:zo(um),reload:zo(hm)});const xn=new Map;function lm(t){const e=t.type.__hmrId;let n=xn.get(e);n||(Sc(e,t.type),n=xn.get(e)),n.instances.add(t)}function cm(t){xn.get(t.type.__hmrId).instances.delete(t)}function Sc(t,e){return xn.has(t)?!1:(xn.set(t,{initialDef:fi(e),instances:new Set}),!0)}function fi(t){return Ru(t)?t.__vccOpts:t}function um(t,e){const n=xn.get(t);n&&(n.initialDef.render=e,[...n.instances].forEach(r=>{e&&(r.render=e,fi(r.type).render=e),r.renderCache=[],Bt=!0,r.job.flags&8||r.update(),Bt=!1}))}function hm(t,e){const n=xn.get(t);if(!n)return;e=fi(e),Vc(n.initialDef,e);const r=[...n.instances];for(let s=0;s<r.length;s++){const i=r[s],a=fi(i.type);let l=hi.get(a);l||(a!==n.initialDef&&Vc(a,e),hi.set(a,l=new Set)),l.add(i),i.appContext.propsCache.delete(i.type),i.appContext.emitsCache.delete(i.type),i.appContext.optionsCache.delete(i.type),i.ceReload?(l.add(i),i.ceReload(e.styles),l.delete(i)):i.parent?ui(()=>{i.job.flags&8||(Bt=!0,i.parent.update(),Bt=!1,l.delete(i))}):i.appContext.reload?i.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),i.root.ce&&i!==i.root&&i.root.ce._removeChildStyle(a)}Ic(()=>{hi.clear()})}function Vc(t,e){Oe(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function zo(t){return(e,n)=>{try{return t(e,n)}catch(r){console.error(r),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Ct,Gr=[],Go=!1;function Qr(t,...e){Ct?Ct.emit(t,...e):Go||Gr.push({event:t,args:e})}function Qo(t,e){var n,r;Ct=t,Ct?(Ct.enabled=!0,Gr.forEach(({event:s,args:i})=>Ct.emit(s,...i)),Gr=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{Qo(i,e)}),setTimeout(()=>{Ct||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Go=!0,Gr=[])},3e3)):(Go=!0,Gr=[])}function fm(t,e){Qr("app:init",t,e,{Fragment:gt,Text:es,Comment:_t,Static:wi})}function dm(t){Qr("app:unmount",t)}const pm=Yo("component:added"),Nc=Yo("component:updated"),mm=Yo("component:removed"),gm=t=>{Ct&&typeof Ct.cleanupBuffer=="function"&&!Ct.cleanupBuffer(t)&&mm(t)};function Yo(t){return e=>{Qr(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const _m=Cc("perf:start"),ym=Cc("perf:end");function Cc(t){return(e,n,r)=>{Qr(t,e.appContext.app,e.uid,e,n,r)}}function vm(t,e,n){Qr("component:emit",t.appContext.app,t,e,n)}let at=null,Pc=null;function di(t){const e=at;return at=t,Pc=t&&t.type.__scopeId||null,e}function Em(t,e=at,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&pu(-1);const i=di(e);let a;try{a=t(...s)}finally{di(i),r._d&&pu(1)}return process.env.NODE_ENV!=="production"&&Nc(e),a};return r._n=!0,r._c=!0,r._d=!0,r}function Dc(t){cp(t)&&j("Do not use built-in directive ids as custom directive id: "+t)}function Oc(t,e){if(at===null)return process.env.NODE_ENV!=="production"&&j("withDirectives can only be used inside render functions."),t;const n=Ri(at),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,l,u=Te]=e[s];i&&(re(i)&&(i={mounted:i,updated:i}),i.deep&&Yt(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function kn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(Vt(),Lt(u,n,8,[t.el,l,t,e]),Nt())}}const Tm=Symbol("_vte"),wm=t=>t.__isTeleport,Im=Symbol("_leaveCb");function Xo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Xo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Am(t,e){return re(t)?Oe({name:t.name},e,{setup:t}):t}function xc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const kc=new WeakSet,pi=new WeakMap;function Yr(t,e,n,r,s=!1){if(Z(t)){t.forEach((P,k)=>Yr(P,e&&(Z(e)?e[k]:e),n,r,s));return}if(Xr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Yr(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ri(r.component):r.el,a=s?null:i,{i:l,r:u}=t;if(process.env.NODE_ENV!=="production"&&!l){j("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const f=e&&e.r,d=l.refs===Te?l.refs={}:l.refs,p=l.setupState,v=le(p),I=p===Te?Kl:P=>process.env.NODE_ENV!=="production"&&(fe(v,P)&&!xe(v[P])&&j(`Template ref "${P}" used on a non-ref value. It will not work in the production build.`),kc.has(v[P]))?!1:fe(v,P),C=P=>process.env.NODE_ENV==="production"||!kc.has(P);if(f!=null&&f!==u){if(Mc(e),Ve(f))d[f]=null,I(f)&&(p[f]=null);else if(xe(f)){C(f)&&(f.value=null);const P=e;P.k&&(d[P.k]=null)}}if(re(u))ir(u,l,12,[a,d]);else{const P=Ve(u),k=xe(u);if(P||k){const X=()=>{if(t.f){const K=P?I(u)?p[u]:d[u]:C(u)||!t.k?u.value:d[t.k];if(s)Z(K)&&bo(K,i);else if(Z(K))K.includes(i)||K.push(i);else if(P)d[u]=[i],I(u)&&(p[u]=d[u]);else{const z=[i];C(u)&&(u.value=z),t.k&&(d[t.k]=z)}}else P?(d[u]=a,I(u)&&(p[u]=a)):k?(C(u)&&(u.value=a),t.k&&(d[t.k]=a)):process.env.NODE_ENV!=="production"&&j("Invalid template ref type:",u,`(${typeof u})`)};if(a){const K=()=>{X(),pi.delete(t)};K.id=-1,pi.set(t,K),mt(K,n)}else Mc(t),X()}else process.env.NODE_ENV!=="production"&&j("Invalid template ref type:",u,`(${typeof u})`)}}function Mc(t){const e=pi.get(t);e&&(e.flags|=8,pi.delete(t))}Br().requestIdleCallback,Br().cancelIdleCallback;const Xr=t=>!!t.type.__asyncLoader,Jo=t=>t.type.__isKeepAlive;function bm(t,e){Fc(t,"a",e)}function Rm(t,e){Fc(t,"da",e)}function Fc(t,e,n=$e){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(mi(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Jo(s.parent.vnode)&&Sm(r,e,n,s),s=s.parent}}function Sm(t,e,n,r){const s=mi(e,t,r,!0);Lc(()=>{bo(r[e],s)},n)}function mi(t,e,n=$e,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Vt();const l=is(n),u=Lt(e,n,t,a);return l(),Nt(),u});return r?s.unshift(i):s.push(i),i}else if(process.env.NODE_ENV!=="production"){const s=Vn(Ko[t].replace(/ hook$/,""));j(`${s} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Xt=t=>(e,n=$e)=>{(!os||t==="sp")&&mi(t,(...r)=>e(...r),n)},Vm=Xt("bm"),Nm=Xt("m"),Cm=Xt("bu"),Pm=Xt("u"),Dm=Xt("bum"),Lc=Xt("um"),Om=Xt("sp"),xm=Xt("rtg"),km=Xt("rtc");function Mm(t,e=$e){mi("ec",t,e)}const Fm=Symbol.for("v-ndc");function Zo(t,e,n,r){let s;const i=n,a=Z(t);if(a||Ve(t)){const l=a&&Cn(t);let u=!1,f=!1;l&&(u=!it(t),f=Ft(t),t=Js(t)),s=new Array(t.length);for(let d=0,p=t.length;d<p;d++)s[d]=e(u?f?si(je(t[d])):je(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(t)&&j(`The v-for range expect an integer value but got ${t}.`),s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,i)}else if(Ee(t))if(t[Symbol.iterator])s=Array.from(t,(l,u)=>e(l,u,void 0,i));else{const l=Object.keys(t);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=e(t[d],d,u,i)}}else s=[];return s}const ea=t=>t?Tu(t)?Ri(t):ea(t.parent):null,Mn=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>process.env.NODE_ENV!=="production"?Mt(t.props):t.props,$attrs:t=>process.env.NODE_ENV!=="production"?Mt(t.attrs):t.attrs,$slots:t=>process.env.NODE_ENV!=="production"?Mt(t.slots):t.slots,$refs:t=>process.env.NODE_ENV!=="production"?Mt(t.refs):t.refs,$parent:t=>ea(t.parent),$root:t=>ea(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>qc(t),$forceUpdate:t=>t.f||(t.f=()=>{ui(t.update)}),$nextTick:t=>t.n||(t.n=om.bind(t.proxy)),$watch:t=>gg.bind(t)}),ta=t=>t==="_"||t==="$",na=(t,e)=>t!==Te&&!t.__isScriptSetup&&fe(t,e),Uc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=t;if(process.env.NODE_ENV!=="production"&&e==="__isVue")return!0;let f;if(e[0]!=="$"){const I=a[e];if(I!==void 0)switch(I){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(na(r,e))return a[e]=1,r[e];if(s!==Te&&fe(s,e))return a[e]=2,s[e];if((f=t.propsOptions[0])&&fe(f,e))return a[e]=3,i[e];if(n!==Te&&fe(n,e))return a[e]=4,n[e];ra&&(a[e]=0)}}const d=Mn[e];let p,v;if(d)return e==="$attrs"?(Le(t.attrs,"get",""),process.env.NODE_ENV!=="production"&&Ti()):process.env.NODE_ENV!=="production"&&e==="$slots"&&Le(t,"get",e),d(t);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==Te&&fe(n,e))return a[e]=4,n[e];if(v=u.config.globalProperties,fe(v,e))return v[e];process.env.NODE_ENV!=="production"&&at&&(!Ve(e)||e.indexOf("__v")!==0)&&(s!==Te&&ta(e[0])&&fe(s,e)?j(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===at&&j(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return na(s,e)?(s[e]=n,!0):process.env.NODE_ENV!=="production"&&s.__isScriptSetup&&fe(s,e)?(j(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):r!==Te&&fe(r,e)?(r[e]=n,!0):fe(t.props,e)?(process.env.NODE_ENV!=="production"&&j(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(process.env.NODE_ENV!=="production"&&j(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(process.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(i,e,{enumerable:!0,configurable:!0,value:n}):i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||t!==Te&&l[0]!=="$"&&fe(t,l)||na(e,l)||(u=i[0])&&fe(u,l)||fe(r,l)||fe(Mn,l)||fe(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};process.env.NODE_ENV!=="production"&&(Uc.ownKeys=t=>(j("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));function Lm(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(Mn).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>Mn[n](t),set:Fe})}),e}function Um(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(r=>{Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>t.props[r],set:Fe})})}function Bm(t){const{ctx:e,setupState:n}=t;Object.keys(le(n)).forEach(r=>{if(!n.__isScriptSetup){if(ta(r[0])){j(`setup() return property ${JSON.stringify(r)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>n[r],set:Fe})}})}function Bc(t){return Z(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function jm(){const t=Object.create(null);return(e,n)=>{t[n]?j(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let ra=!0;function $m(t){const e=qc(t),n=t.proxy,r=t.ctx;ra=!1,e.beforeCreate&&jc(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:p,mounted:v,beforeUpdate:I,updated:C,activated:P,deactivated:k,beforeDestroy:X,beforeUnmount:K,destroyed:z,unmounted:pe,render:Q,renderTracked:he,renderTriggered:A,errorCaptured:_,serverPrefetch:y,expose:w,inheritAttrs:b,components:R,directives:E,filters:It}=e,dt=process.env.NODE_ENV!=="production"?jm():null;if(process.env.NODE_ENV!=="production"){const[ce]=t.propsOptions;if(ce)for(const ae in ce)dt("Props",ae)}if(f&&qm(f,r,dt),a)for(const ce in a){const ae=a[ce];re(ae)?(process.env.NODE_ENV!=="production"?Object.defineProperty(r,ce,{value:ae.bind(n),configurable:!0,enumerable:!0,writable:!0}):r[ce]=ae.bind(n),process.env.NODE_ENV!=="production"&&dt("Methods",ce)):process.env.NODE_ENV!=="production"&&j(`Method "${ce}" has type "${typeof ae}" in the component definition. Did you reference the function correctly?`)}if(s){process.env.NODE_ENV!=="production"&&!re(s)&&j("The data option must be a function. Plain object usage is no longer supported.");const ce=s.call(n,n);if(process.env.NODE_ENV!=="production"&&Ro(ce)&&j("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Ee(ce))process.env.NODE_ENV!=="production"&&j("data() should return an object.");else if(t.data=$o(ce),process.env.NODE_ENV!=="production")for(const ae in ce)dt("Data",ae),ta(ae[0])||Object.defineProperty(r,ae,{configurable:!0,enumerable:!0,get:()=>ce[ae],set:Fe})}if(ra=!0,i)for(const ce in i){const ae=i[ce],pt=re(ae)?ae.bind(n,n):re(ae.get)?ae.get.bind(n,n):Fe;process.env.NODE_ENV!=="production"&&pt===Fe&&j(`Computed property "${ce}" has no getter.`);const Nr=!re(ae)&&re(ae.set)?ae.set.bind(n):process.env.NODE_ENV!=="production"?()=>{j(`Write operation failed: computed property "${ce}" is readonly.`)}:Fe,Qn=Su({get:pt,set:Nr});Object.defineProperty(r,ce,{enumerable:!0,configurable:!0,get:()=>Qn.value,set:ut=>Qn.value=ut}),process.env.NODE_ENV!=="production"&&dt("Computed",ce)}if(l)for(const ce in l)$c(l[ce],r,n,ce);if(u){const ce=re(u)?u.call(n):u;Reflect.ownKeys(ce).forEach(ae=>{Qm(ae,ce[ae])})}d&&jc(d,t,"c");function et(ce,ae){Z(ae)?ae.forEach(pt=>ce(pt.bind(n))):ae&&ce(ae.bind(n))}if(et(Vm,p),et(Nm,v),et(Cm,I),et(Pm,C),et(bm,P),et(Rm,k),et(Mm,_),et(km,he),et(xm,A),et(Dm,K),et(Lc,pe),et(Om,y),Z(w))if(w.length){const ce=t.exposed||(t.exposed={});w.forEach(ae=>{Object.defineProperty(ce,ae,{get:()=>n[ae],set:pt=>n[ae]=pt,enumerable:!0})})}else t.exposed||(t.exposed={});Q&&t.render===Fe&&(t.render=Q),b!=null&&(t.inheritAttrs=b),R&&(t.components=R),E&&(t.directives=E),y&&xc(t)}function qm(t,e,n=Fe){Z(t)&&(t=sa(t));for(const r in t){const s=t[r];let i;Ee(s)?"default"in s?i=_i(s.from||r,s.default,!0):i=_i(s.from||r):i=_i(s),xe(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i,process.env.NODE_ENV!=="production"&&n("Inject",r)}}function jc(t,e,n){Lt(Z(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function $c(t,e,n,r){let s=r.includes(".")?au(n,r):()=>n[r];if(Ve(t)){const i=e[t];re(i)?ua(s,i):process.env.NODE_ENV!=="production"&&j(`Invalid watch handler specified by key "${t}"`,i)}else if(re(t))ua(s,t.bind(n));else if(Ee(t))if(Z(t))t.forEach(i=>$c(i,e,n,r));else{const i=re(t.handler)?t.handler.bind(n):e[t.handler];re(i)?ua(s,i,t):process.env.NODE_ENV!=="production"&&j(`Invalid watch handler specified by key "${t.handler}"`,i)}else process.env.NODE_ENV!=="production"&&j(`Invalid watch option: "${r}"`,t)}function qc(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,l=i.get(e);let u;return l?u=l:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(f=>gi(u,f,a,!0)),gi(u,e,a)),Ee(e)&&i.set(e,u),u}function gi(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&gi(t,i,n,!0),s&&s.forEach(a=>gi(t,a,n,!0));for(const a in e)if(r&&a==="expose")process.env.NODE_ENV!=="production"&&j('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const l=Hm[a]||n&&n[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const Hm={data:Hc,props:Kc,emits:Kc,methods:Jr,computed:Jr,beforeCreate:lt,created:lt,beforeMount:lt,mounted:lt,beforeUpdate:lt,updated:lt,beforeDestroy:lt,beforeUnmount:lt,destroyed:lt,unmounted:lt,activated:lt,deactivated:lt,errorCaptured:lt,serverPrefetch:lt,components:Jr,directives:Jr,watch:Wm,provide:Hc,inject:Km};function Hc(t,e){return e?t?function(){return Oe(re(t)?t.call(this,this):t,re(e)?e.call(this,this):e)}:e:t}function Km(t,e){return Jr(sa(t),sa(e))}function sa(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function lt(t,e){return t?[...new Set([].concat(t,e))]:e}function Jr(t,e){return t?Oe(Object.create(null),t,e):e}function Kc(t,e){return t?Z(t)&&Z(e)?[...new Set([...t,...e])]:Oe(Object.create(null),Bc(t),Bc(e??{})):e}function Wm(t,e){if(!t)return e;if(!e)return t;const n=Oe(Object.create(null),t);for(const r in e)n[r]=lt(t[r],e[r]);return n}function Wc(){return{app:null,config:{isNativeTag:Kl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zm=0;function Gm(t,e){return function(r,s=null){re(r)||(r=Oe({},r)),s!=null&&!Ee(s)&&(process.env.NODE_ENV!=="production"&&j("root props passed to app.mount() must be an object."),s=null);const i=Wc(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:zm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Vu,get config(){return i.config},set config(d){process.env.NODE_ENV!=="production"&&j("app.config cannot be replaced. Modify individual options instead.")},use(d,...p){return a.has(d)?process.env.NODE_ENV!=="production"&&j("Plugin has already been applied to target app."):d&&re(d.install)?(a.add(d),d.install(f,...p)):re(d)?(a.add(d),d(f,...p)):process.env.NODE_ENV!=="production"&&j('A plugin must either be a function or an object with an "install" function.'),f},mixin(d){return i.mixins.includes(d)?process.env.NODE_ENV!=="production"&&j("Mixin has already been applied to target app"+(d.name?`: ${d.name}`:"")):i.mixins.push(d),f},component(d,p){return process.env.NODE_ENV!=="production"&&ma(d,i.config),p?(process.env.NODE_ENV!=="production"&&i.components[d]&&j(`Component "${d}" has already been registered in target app.`),i.components[d]=p,f):i.components[d]},directive(d,p){return process.env.NODE_ENV!=="production"&&Dc(d),p?(process.env.NODE_ENV!=="production"&&i.directives[d]&&j(`Directive "${d}" has already been registered in target app.`),i.directives[d]=p,f):i.directives[d]},mount(d,p,v){if(u)process.env.NODE_ENV!=="production"&&j("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&d.__vue_app__&&j("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const I=f._ceVNode||Zt(r,s);return I.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),process.env.NODE_ENV!=="production"&&(i.reload=()=>{const C=dn(I);C.el=null,t(C,d,v)}),t(I,d,v),u=!0,f._container=d,d.__vue_app__=f,process.env.NODE_ENV!=="production"&&(f._instance=I.component,fm(f,Vu)),Ri(I.component)}},onUnmount(d){process.env.NODE_ENV!=="production"&&typeof d!="function"&&j(`Expected function as first argument to app.onUnmount(), but got ${typeof d}`),l.push(d)},unmount(){u?(Lt(l,f._instance,16),t(null,f._container),process.env.NODE_ENV!=="production"&&(f._instance=null,dm(f)),delete f._container.__vue_app__):process.env.NODE_ENV!=="production"&&j("Cannot unmount an app that is not mounted.")},provide(d,p){return process.env.NODE_ENV!=="production"&&d in i.provides&&(fe(i.provides,d)?j(`App already provides property with key "${String(d)}". It will be overwritten with the new value.`):j(`App already provides property with key "${String(d)}" inherited from its parent element. It will be overwritten with the new value.`)),i.provides[d]=p,f},runWithContext(d){const p=lr;lr=f;try{return d()}finally{lr=p}}};return f}}let lr=null;function Qm(t,e){if(!$e)process.env.NODE_ENV!=="production"&&j("provide() can only be used inside setup().");else{let n=$e.provides;const r=$e.parent&&$e.parent.provides;r===n&&(n=$e.provides=Object.create(r)),n[t]=e}}function _i(t,e,n=!1){const r=vu();if(r||lr){let s=lr?lr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&re(e)?e.call(r&&r.proxy):e;process.env.NODE_ENV!=="production"&&j(`injection "${String(t)}" not found.`)}else process.env.NODE_ENV!=="production"&&j("inject() can only be used inside setup() or functional components.")}const zc={},Gc=()=>Object.create(zc),Qc=t=>Object.getPrototypeOf(t)===zc;function Ym(t,e,n,r=!1){const s={},i=Gc();t.propsDefaults=Object.create(null),Yc(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);process.env.NODE_ENV!=="production"&&Zc(e||{},s,t),n?t.props=r?s:Hp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Xm(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function Jm(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,l=le(s),[u]=t.propsOptions;let f=!1;if(!(process.env.NODE_ENV!=="production"&&Xm(t))&&(r||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Ei(t.emitsOptions,v))continue;const I=e[v];if(u)if(fe(i,v))I!==i[v]&&(i[v]=I,f=!0);else{const C=bt(v);s[C]=ia(u,l,C,I,t,!1)}else I!==i[v]&&(i[v]=I,f=!0)}}}else{Yc(t,e,s,i)&&(f=!0);let d;for(const p in l)(!e||!fe(e,p)&&((d=cn(p))===p||!fe(e,d)))&&(u?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=ia(u,l,p,void 0,t,!0)):delete s[p]);if(i!==l)for(const p in i)(!e||!fe(e,p))&&(delete i[p],f=!0)}f&&kt(t.attrs,"set",""),process.env.NODE_ENV!=="production"&&Zc(e||{},s,t)}function Yc(t,e,n,r){const[s,i]=t.propsOptions;let a=!1,l;if(e)for(let u in e){if(Ur(u))continue;const f=e[u];let d;s&&fe(s,d=bt(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Ei(t.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=le(n),f=l||Te;for(let d=0;d<i.length;d++){const p=i[d];n[p]=ia(s,u,p,f[p],t,!fe(f,p))}}return a}function ia(t,e,n,r,s,i){const a=t[n];if(a!=null){const l=fe(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&re(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=is(s);r=f[n]=u.call(null,e),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===cn(n))&&(r=!0))}return r}const Zm=new WeakMap;function Xc(t,e,n=!1){const r=n?Zm:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,a={},l=[];let u=!1;if(!re(t)){const d=p=>{u=!0;const[v,I]=Xc(p,e,!0);Oe(a,v),I&&l.push(...I)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return Ee(t)&&r.set(t,nr),nr;if(Z(i))for(let d=0;d<i.length;d++){process.env.NODE_ENV!=="production"&&!Ve(i[d])&&j("props must be strings when using array syntax.",i[d]);const p=bt(i[d]);Jc(p)&&(a[p]=Te)}else if(i){process.env.NODE_ENV!=="production"&&!Ee(i)&&j("invalid props options",i);for(const d in i){const p=bt(d);if(Jc(p)){const v=i[d],I=a[p]=Z(v)||re(v)?{type:v}:Oe({},v),C=I.type;let P=!1,k=!0;if(Z(C))for(let X=0;X<C.length;++X){const K=C[X],z=re(K)&&K.name;if(z==="Boolean"){P=!0;break}else z==="String"&&(k=!1)}else P=re(C)&&C.name==="Boolean";I[0]=P,I[1]=k,(P||fe(I,"default"))&&l.push(p)}}}const f=[a,l];return Ee(t)&&r.set(t,f),f}function Jc(t){return t[0]!=="$"&&!Ur(t)?!0:(process.env.NODE_ENV!=="production"&&j(`Invalid prop name: "${t}" is a reserved property.`),!1)}function eg(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Zc(t,e,n){const r=le(e),s=n.propsOptions[0],i=Object.keys(t).map(a=>bt(a));for(const a in s){let l=s[a];l!=null&&tg(a,r[a],l,process.env.NODE_ENV!=="production"?Mt(r):r,!i.includes(a))}}function tg(t,e,n,r,s){const{type:i,required:a,validator:l,skipCheck:u}=n;if(a&&s){j('Missing required prop: "'+t+'"');return}if(!(e==null&&!a)){if(i!=null&&i!==!0&&!u){let f=!1;const d=Z(i)?i:[i],p=[];for(let v=0;v<d.length&&!f;v++){const{valid:I,expectedType:C}=rg(e,d[v]);p.push(C||""),f=I}if(!f){j(sg(t,e,p));return}}l&&!l(e,r)&&j('Invalid prop: custom validator check failed for prop "'+t+'".')}}const ng=Gt("String,Number,Boolean,Function,Symbol,BigInt");function rg(t,e){let n;const r=eg(e);if(r==="null")n=t===null;else if(ng(r)){const s=typeof t;n=s===r.toLowerCase(),!n&&s==="object"&&(n=t instanceof e)}else r==="Object"?n=Ee(t):r==="Array"?n=Z(t):n=t instanceof e;return{valid:n,expectedType:r}}function sg(t,e,n){if(n.length===0)return`Prop type [] for prop "${t}" won't match anything. Did you mean to use type Array instead?`;let r=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(zs).join(" | ")}`;const s=n[0],i=So(e),a=eu(e,s),l=eu(e,i);return n.length===1&&tu(s)&&!ig(s,i)&&(r+=` with value ${a}`),r+=`, got ${i} `,tu(i)&&(r+=`with value ${l}.`),r}function eu(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function tu(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function ig(...t){return t.some(e=>e.toLowerCase()==="boolean")}const oa=t=>t==="_"||t==="_ctx"||t==="$stable",aa=t=>Z(t)?t.map(Pt):[Pt(t)],og=(t,e,n)=>{if(e._n)return e;const r=Em((...s)=>(process.env.NODE_ENV!=="production"&&$e&&!(n===null&&at)&&!(n&&n.root!==$e.root)&&j(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),aa(e(...s))),n);return r._c=!1,r},nu=(t,e,n)=>{const r=t._ctx;for(const s in t){if(oa(s))continue;const i=t[s];if(re(i))e[s]=og(s,i,r);else if(i!=null){process.env.NODE_ENV!=="production"&&j(`Non-function value encountered for slot "${s}". Prefer function slots for better performance.`);const a=aa(i);e[s]=()=>a}}},ru=(t,e)=>{process.env.NODE_ENV!=="production"&&!Jo(t.vnode)&&j("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=aa(e);t.slots.default=()=>n},la=(t,e,n)=>{for(const r in e)(n||!oa(r))&&(t[r]=e[r])},ag=(t,e,n)=>{const r=t.slots=Gc();if(t.vnode.shapeFlag&32){const s=e._;s?(la(r,e,n),n&&Gs(r,"_",s,!0)):nu(e,r)}else e&&ru(t,e)},lg=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,a=Te;if(r.shapeFlag&32){const l=e._;l?process.env.NODE_ENV!=="production"&&Bt?(la(s,e,n),kt(t,"set","$slots")):n&&l===1?i=!1:la(s,e,n):(i=!e.$stable,nu(e,s)),a=e}else e&&(ru(t,e),a={default:1});if(i)for(const l in s)!oa(l)&&a[l]==null&&delete s[l]};let Zr,Jt;function cr(t,e){t.appContext.config.performance&&yi()&&Jt.mark(`vue-${e}-${t.uid}`),process.env.NODE_ENV!=="production"&&_m(t,e,yi()?Jt.now():Date.now())}function ur(t,e){if(t.appContext.config.performance&&yi()){const n=`vue-${e}-${t.uid}`,r=n+":end",s=`<${Si(t,t.type)}> ${e}`;Jt.mark(r),Jt.measure(s,n,r),Jt.clearMeasures(s),Jt.clearMarks(n),Jt.clearMarks(r)}process.env.NODE_ENV!=="production"&&ym(t,e,yi()?Jt.now():Date.now())}function yi(){return Zr!==void 0||(typeof window<"u"&&window.performance?(Zr=!0,Jt=window.performance):Zr=!1),Zr}function cg(){const t=[];if(process.env.NODE_ENV!=="production"&&t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const mt=Ag;function ug(t){return hg(t)}function hg(t,e){cg();const n=Br();n.__VUE__=!0,process.env.NODE_ENV!=="production"&&Qo(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:p,nextSibling:v,setScopeId:I=Fe,insertStaticContent:C}=t,P=(g,T,N,F=null,D=null,O=null,$=void 0,B=null,U=process.env.NODE_ENV!=="production"&&Bt?!1:!!T.dynamicChildren)=>{if(g===T)return;g&&!rs(g,T)&&(F=Cr(g),be(g,D,O,!0),g=null),T.patchFlag===-2&&(U=!1,T.dynamicChildren=null);const{type:x,ref:J,shapeFlag:H}=T;switch(x){case es:k(g,T,N,F);break;case _t:X(g,T,N,F);break;case wi:g==null?K(T,N,F,$):process.env.NODE_ENV!=="production"&&z(g,T,N,$);break;case gt:E(g,T,N,F,D,O,$,B,U);break;default:H&1?he(g,T,N,F,D,O,$,B,U):H&6?It(g,T,N,F,D,O,$,B,U):H&64||H&128?x.process(g,T,N,F,D,O,$,B,U,zt):process.env.NODE_ENV!=="production"&&j("Invalid VNode type:",x,`(${typeof x})`)}J!=null&&D?Yr(J,g&&g.ref,O,T||g,!T):J==null&&g&&g.ref!=null&&Yr(g.ref,null,O,g,!0)},k=(g,T,N,F)=>{if(g==null)r(T.el=l(T.children),N,F);else{const D=T.el=g.el;T.children!==g.children&&f(D,T.children)}},X=(g,T,N,F)=>{g==null?r(T.el=u(T.children||""),N,F):T.el=g.el},K=(g,T,N,F)=>{[g.el,g.anchor]=C(g.children,T,N,F,g.el,g.anchor)},z=(g,T,N,F)=>{if(T.children!==g.children){const D=v(g.anchor);Q(g),[T.el,T.anchor]=C(T.children,N,D,F)}else T.el=g.el,T.anchor=g.anchor},pe=({el:g,anchor:T},N,F)=>{let D;for(;g&&g!==T;)D=v(g),r(g,N,F),g=D;r(T,N,F)},Q=({el:g,anchor:T})=>{let N;for(;g&&g!==T;)N=v(g),s(g),g=N;s(T)},he=(g,T,N,F,D,O,$,B,U)=>{if(T.type==="svg"?$="svg":T.type==="math"&&($="mathml"),g==null)A(T,N,F,D,O,$,B,U);else{const x=g.el&&g.el._isVueCE?g.el:null;try{x&&x._beginPatch(),w(g,T,D,O,$,B,U)}finally{x&&x._endPatch()}}},A=(g,T,N,F,D,O,$,B)=>{let U,x;const{props:J,shapeFlag:H,transition:Y,dirs:G}=g;if(U=g.el=a(g.type,O,J&&J.is,J),H&8?d(U,g.children):H&16&&y(g.children,U,null,F,D,ca(g,O),$,B),G&&kn(g,null,F,"created"),_(U,g,g.scopeId,$,F),J){for(const _e in J)_e!=="value"&&!Ur(_e)&&i(U,_e,null,J[_e],O,F);"value"in J&&i(U,"value",null,J.value,O),(x=J.onVnodeBeforeMount)&&jt(x,F,g)}process.env.NODE_ENV!=="production"&&(Gs(U,"__vnode",g,!0),Gs(U,"__vueParentComponent",F,!0)),G&&kn(g,null,F,"beforeMount");const ne=fg(D,Y);ne&&Y.beforeEnter(U),r(U,T,N),((x=J&&J.onVnodeMounted)||ne||G)&&mt(()=>{x&&jt(x,F,g),ne&&Y.enter(U),G&&kn(g,null,F,"mounted")},D)},_=(g,T,N,F,D)=>{if(N&&I(g,N),F)for(let O=0;O<F.length;O++)I(g,F[O]);if(D){let O=D.subTree;if(process.env.NODE_ENV!=="production"&&O.patchFlag>0&&O.patchFlag&2048&&(O=fa(O.children)||O),T===O||du(O.type)&&(O.ssContent===T||O.ssFallback===T)){const $=D.vnode;_(g,$,$.scopeId,$.slotScopeIds,D.parent)}}},y=(g,T,N,F,D,O,$,B,U=0)=>{for(let x=U;x<g.length;x++){const J=g[x]=B?pn(g[x]):Pt(g[x]);P(null,J,T,N,F,D,O,$,B)}},w=(g,T,N,F,D,O,$)=>{const B=T.el=g.el;process.env.NODE_ENV!=="production"&&(B.__vnode=T);let{patchFlag:U,dynamicChildren:x,dirs:J}=T;U|=g.patchFlag&16;const H=g.props||Te,Y=T.props||Te;let G;if(N&&Fn(N,!1),(G=Y.onVnodeBeforeUpdate)&&jt(G,N,T,g),J&&kn(T,g,N,"beforeUpdate"),N&&Fn(N,!0),process.env.NODE_ENV!=="production"&&Bt&&(U=0,$=!1,x=null),(H.innerHTML&&Y.innerHTML==null||H.textContent&&Y.textContent==null)&&d(B,""),x?(b(g.dynamicChildren,x,B,N,F,ca(T,D),O),process.env.NODE_ENV!=="production"&&vi(g,T)):$||pt(g,T,B,null,N,F,ca(T,D),O,!1),U>0){if(U&16)R(B,H,Y,N,D);else if(U&2&&H.class!==Y.class&&i(B,"class",null,Y.class,D),U&4&&i(B,"style",H.style,Y.style,D),U&8){const ne=T.dynamicProps;for(let _e=0;_e<ne.length;_e++){const ye=ne[_e],ze=H[ye],tt=Y[ye];(tt!==ze||ye==="value")&&i(B,ye,ze,tt,D,N)}}U&1&&g.children!==T.children&&d(B,T.children)}else!$&&x==null&&R(B,H,Y,N,D);((G=Y.onVnodeUpdated)||J)&&mt(()=>{G&&jt(G,N,T,g),J&&kn(T,g,N,"updated")},F)},b=(g,T,N,F,D,O,$)=>{for(let B=0;B<T.length;B++){const U=g[B],x=T[B],J=U.el&&(U.type===gt||!rs(U,x)||U.shapeFlag&198)?p(U.el):N;P(U,x,J,null,F,D,O,$,!0)}},R=(g,T,N,F,D)=>{if(T!==N){if(T!==Te)for(const O in T)!Ur(O)&&!(O in N)&&i(g,O,T[O],null,D,F);for(const O in N){if(Ur(O))continue;const $=N[O],B=T[O];$!==B&&O!=="value"&&i(g,O,B,$,D,F)}"value"in N&&i(g,"value",T.value,N.value,D)}},E=(g,T,N,F,D,O,$,B,U)=>{const x=T.el=g?g.el:l(""),J=T.anchor=g?g.anchor:l("");let{patchFlag:H,dynamicChildren:Y,slotScopeIds:G}=T;process.env.NODE_ENV!=="production"&&(Bt||H&2048)&&(H=0,U=!1,Y=null),G&&(B=B?B.concat(G):G),g==null?(r(x,N,F),r(J,N,F),y(T.children||[],N,J,D,O,$,B,U)):H>0&&H&64&&Y&&g.dynamicChildren?(b(g.dynamicChildren,Y,N,D,O,$,B),process.env.NODE_ENV!=="production"?vi(g,T):(T.key!=null||D&&T===D.subTree)&&vi(g,T,!0)):pt(g,T,N,J,D,O,$,B,U)},It=(g,T,N,F,D,O,$,B,U)=>{T.slotScopeIds=B,g==null?T.shapeFlag&512?D.ctx.activate(T,N,F,$,U):dt(T,N,F,D,O,$,U):et(g,T,U)},dt=(g,T,N,F,D,O,$)=>{const B=g.component=Og(g,F,D);if(process.env.NODE_ENV!=="production"&&B.type.__hmrId&&lm(B),process.env.NODE_ENV!=="production"&&(ai(g),cr(B,"mount")),Jo(g)&&(B.ctx.renderer=zt),process.env.NODE_ENV!=="production"&&cr(B,"init"),kg(B,!1,$),process.env.NODE_ENV!=="production"&&ur(B,"init"),process.env.NODE_ENV!=="production"&&Bt&&(g.el=null),B.asyncDep){if(D&&D.registerDep(B,ce,$),!g.el){const U=B.subTree=Zt(_t);X(null,U,T,N),g.placeholder=U.el}}else ce(B,g,T,N,D,O,$);process.env.NODE_ENV!=="production"&&(li(),ur(B,"mount"))},et=(g,T,N)=>{const F=T.component=g.component;if(wg(g,T,N))if(F.asyncDep&&!F.asyncResolved){process.env.NODE_ENV!=="production"&&ai(T),ae(F,T,N),process.env.NODE_ENV!=="production"&&li();return}else F.next=T,F.update();else T.el=g.el,F.vnode=T},ce=(g,T,N,F,D,O,$)=>{const B=()=>{if(g.isMounted){let{next:H,bu:Y,u:G,parent:ne,vnode:_e}=g;{const vt=su(g);if(vt){H&&(H.el=_e.el,ae(g,H,$)),vt.asyncDep.then(()=>{g.isUnmounted||B()});return}}let ye=H,ze;process.env.NODE_ENV!=="production"&&ai(H||g.vnode),Fn(g,!1),H?(H.el=_e.el,ae(g,H,$)):H=_e,Y&&rr(Y),(ze=H.props&&H.props.onVnodeBeforeUpdate)&&jt(ze,ne,H,_e),Fn(g,!0),process.env.NODE_ENV!=="production"&&cr(g,"render");const tt=cu(g);process.env.NODE_ENV!=="production"&&ur(g,"render");const nt=g.subTree;g.subTree=tt,process.env.NODE_ENV!=="production"&&cr(g,"patch"),P(nt,tt,p(nt.el),Cr(nt),g,D,O),process.env.NODE_ENV!=="production"&&ur(g,"patch"),H.el=tt.el,ye===null&&Ig(g,tt.el),G&&mt(G,D),(ze=H.props&&H.props.onVnodeUpdated)&&mt(()=>jt(ze,ne,H,_e),D),process.env.NODE_ENV!=="production"&&Nc(g),process.env.NODE_ENV!=="production"&&li()}else{let H;const{el:Y,props:G}=T,{bm:ne,m:_e,parent:ye,root:ze,type:tt}=g,nt=Xr(T);Fn(g,!1),ne&&rr(ne),!nt&&(H=G&&G.onVnodeBeforeMount)&&jt(H,ye,T),Fn(g,!0);{ze.ce&&ze.ce._def.shadowRoot!==!1&&ze.ce._injectChildStyle(tt),process.env.NODE_ENV!=="production"&&cr(g,"render");const vt=g.subTree=cu(g);process.env.NODE_ENV!=="production"&&ur(g,"render"),process.env.NODE_ENV!=="production"&&cr(g,"patch"),P(null,vt,N,F,g,D,O),process.env.NODE_ENV!=="production"&&ur(g,"patch"),T.el=vt.el}if(_e&&mt(_e,D),!nt&&(H=G&&G.onVnodeMounted)){const vt=T;mt(()=>jt(H,ye,vt),D)}(T.shapeFlag&256||ye&&Xr(ye.vnode)&&ye.vnode.shapeFlag&256)&&g.a&&mt(g.a,D),g.isMounted=!0,process.env.NODE_ENV!=="production"&&pm(g),T=N=F=null}};g.scope.on();const U=g.effect=new ec(B);g.scope.off();const x=g.update=U.run.bind(U),J=g.job=U.runIfDirty.bind(U);J.i=g,J.id=g.uid,U.scheduler=()=>ui(J),Fn(g,!0),process.env.NODE_ENV!=="production"&&(U.onTrack=g.rtc?H=>rr(g.rtc,H):void 0,U.onTrigger=g.rtg?H=>rr(g.rtg,H):void 0),x()},ae=(g,T,N)=>{T.component=g;const F=g.vnode.props;g.vnode=T,g.next=null,Jm(g,T.props,F,N),lg(g,T.children,N),Vt(),Ac(g),Nt()},pt=(g,T,N,F,D,O,$,B,U=!1)=>{const x=g&&g.children,J=g?g.shapeFlag:0,H=T.children,{patchFlag:Y,shapeFlag:G}=T;if(Y>0){if(Y&128){Qn(x,H,N,F,D,O,$,B,U);return}else if(Y&256){Nr(x,H,N,F,D,O,$,B,U);return}}G&8?(J&16&&Wt(x,D,O),H!==x&&d(N,H)):J&16?G&16?Qn(x,H,N,F,D,O,$,B,U):Wt(x,D,O,!0):(J&8&&d(N,""),G&16&&y(H,N,F,D,O,$,B,U))},Nr=(g,T,N,F,D,O,$,B,U)=>{g=g||nr,T=T||nr;const x=g.length,J=T.length,H=Math.min(x,J);let Y;for(Y=0;Y<H;Y++){const G=T[Y]=U?pn(T[Y]):Pt(T[Y]);P(g[Y],G,N,null,D,O,$,B,U)}x>J?Wt(g,D,O,!0,!1,H):y(T,N,F,D,O,$,B,U,H)},Qn=(g,T,N,F,D,O,$,B,U)=>{let x=0;const J=T.length;let H=g.length-1,Y=J-1;for(;x<=H&&x<=Y;){const G=g[x],ne=T[x]=U?pn(T[x]):Pt(T[x]);if(rs(G,ne))P(G,ne,N,null,D,O,$,B,U);else break;x++}for(;x<=H&&x<=Y;){const G=g[H],ne=T[Y]=U?pn(T[Y]):Pt(T[Y]);if(rs(G,ne))P(G,ne,N,null,D,O,$,B,U);else break;H--,Y--}if(x>H){if(x<=Y){const G=Y+1,ne=G<J?T[G].el:F;for(;x<=Y;)P(null,T[x]=U?pn(T[x]):Pt(T[x]),N,ne,D,O,$,B,U),x++}}else if(x>Y)for(;x<=H;)be(g[x],D,O,!0),x++;else{const G=x,ne=x,_e=new Map;for(x=ne;x<=Y;x++){const Ge=T[x]=U?pn(T[x]):Pt(T[x]);Ge.key!=null&&(process.env.NODE_ENV!=="production"&&_e.has(Ge.key)&&j("Duplicate keys found during update:",JSON.stringify(Ge.key),"Make sure keys are unique."),_e.set(Ge.key,x))}let ye,ze=0;const tt=Y-ne+1;let nt=!1,vt=0;const In=new Array(tt);for(x=0;x<tt;x++)In[x]=0;for(x=G;x<=H;x++){const Ge=g[x];if(ze>=tt){be(Ge,D,O,!0);continue}let At;if(Ge.key!=null)At=_e.get(Ge.key);else for(ye=ne;ye<=Y;ye++)if(In[ye-ne]===0&&rs(Ge,T[ye])){At=ye;break}At===void 0?be(Ge,D,O,!0):(In[At-ne]=x+1,At>=vt?vt=At:nt=!0,P(Ge,T[At],N,null,D,O,$,B,U),ze++)}const Pr=nt?dg(In):nr;for(ye=Pr.length-1,x=tt-1;x>=0;x--){const Ge=ne+x,At=T[Ge],Dr=T[Ge+1],Ds=Ge+1<J?Dr.el||Dr.placeholder:F;In[x]===0?P(null,At,N,Ds,D,O,$,B,U):nt&&(ye<0||x!==Pr[ye]?ut(At,N,Ds,2):ye--)}}},ut=(g,T,N,F,D=null)=>{const{el:O,type:$,transition:B,children:U,shapeFlag:x}=g;if(x&6){ut(g.component.subTree,T,N,F);return}if(x&128){g.suspense.move(T,N,F);return}if(x&64){$.move(g,T,N,zt);return}if($===gt){r(O,T,N);for(let H=0;H<U.length;H++)ut(U[H],T,N,F);r(g.anchor,T,N);return}if($===wi){pe(g,T,N);return}if(F!==2&&x&1&&B)if(F===0)B.beforeEnter(O),r(O,T,N),mt(()=>B.enter(O),D);else{const{leave:H,delayLeave:Y,afterLeave:G}=B,ne=()=>{g.ctx.isUnmounted?s(O):r(O,T,N)},_e=()=>{O._isLeaving&&O[Im](!0),H(O,()=>{ne(),G&&G()})};Y?Y(O,ne,_e):_e()}else r(O,T,N)},be=(g,T,N,F=!1,D=!1)=>{const{type:O,props:$,ref:B,children:U,dynamicChildren:x,shapeFlag:J,patchFlag:H,dirs:Y,cacheIndex:G}=g;if(H===-2&&(D=!1),B!=null&&(Vt(),Yr(B,null,N,g,!0),Nt()),G!=null&&(T.renderCache[G]=void 0),J&256){T.ctx.deactivate(g);return}const ne=J&1&&Y,_e=!Xr(g);let ye;if(_e&&(ye=$&&$.onVnodeBeforeUnmount)&&jt(ye,T,g),J&6)Cl(g.component,N,F);else{if(J&128){g.suspense.unmount(N,F);return}ne&&kn(g,null,T,"beforeUnmount"),J&64?g.type.remove(g,T,N,zt,F):x&&!x.hasOnce&&(O!==gt||H>0&&H&64)?Wt(x,T,N,!1,!0):(O===gt&&H&384||!D&&J&16)&&Wt(U,T,N),F&&Cs(g)}(_e&&(ye=$&&$.onVnodeUnmounted)||ne)&&mt(()=>{ye&&jt(ye,T,g),ne&&kn(g,null,T,"unmounted")},N)},Cs=g=>{const{type:T,el:N,anchor:F,transition:D}=g;if(T===gt){process.env.NODE_ENV!=="production"&&g.patchFlag>0&&g.patchFlag&2048&&D&&!D.persisted?g.children.forEach($=>{$.type===_t?s($.el):Cs($)}):Yn(N,F);return}if(T===wi){Q(g);return}const O=()=>{s(N),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(g.shapeFlag&1&&D&&!D.persisted){const{leave:$,delayLeave:B}=D,U=()=>$(N,O);B?B(g.el,O,U):U()}else O()},Yn=(g,T)=>{let N;for(;g!==T;)N=v(g),s(g),g=N;s(T)},Cl=(g,T,N)=>{process.env.NODE_ENV!=="production"&&g.type.__hmrId&&cm(g);const{bum:F,scope:D,job:O,subTree:$,um:B,m:U,a:x}=g;iu(U),iu(x),F&&rr(F),D.stop(),O&&(O.flags|=8,be($,g,T,N)),B&&mt(B,T),mt(()=>{g.isUnmounted=!0},T),process.env.NODE_ENV!=="production"&&gm(g)},Wt=(g,T,N,F=!1,D=!1,O=0)=>{for(let $=O;$<g.length;$++)be(g[$],T,N,F,D)},Cr=g=>{if(g.shapeFlag&6)return Cr(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const T=v(g.anchor||g.el),N=T&&T[Tm];return N?v(N):T};let Ps=!1;const Xn=(g,T,N)=>{g==null?T._vnode&&be(T._vnode,null,null,!0):P(T._vnode||null,g,T,null,null,null,N),T._vnode=g,Ps||(Ps=!0,Ac(),bc(),Ps=!1)},zt={p:P,um:be,m:ut,r:Cs,mt:dt,mc:y,pc:pt,pbc:b,n:Cr,o:t};return{render:Xn,hydrate:void 0,createApp:Gm(Xn)}}function ca({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Fn({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function fg(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function vi(t,e,n=!1){const r=t.children,s=e.children;if(Z(r)&&Z(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=pn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&vi(a,l)),l.type===es&&l.patchFlag!==-1&&(l.el=a.el),l.type===_t&&!l.el&&(l.el=a.el),process.env.NODE_ENV!=="production"&&l.el&&(l.el.__vnode=l)}}function dg(t){const e=t.slice(),n=[0];let r,s,i,a,l;const u=t.length;for(r=0;r<u;r++){const f=t[r];if(f!==0){if(s=n[n.length-1],t[s]<f){e[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,t[n[l]]<f?i=l+1:a=l;f<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=e[a];return n}function su(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:su(e)}function iu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const pg=Symbol.for("v-scx"),mg=()=>{{const t=_i(pg);return t||process.env.NODE_ENV!=="production"&&j("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function ua(t,e,n){return process.env.NODE_ENV!=="production"&&!re(e)&&j("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),ou(t,e,n)}function ou(t,e,n=Te){const{immediate:r,deep:s,flush:i,once:a}=n;process.env.NODE_ENV!=="production"&&!e&&(r!==void 0&&j('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&j('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),a!==void 0&&j('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const l=Oe({},n);process.env.NODE_ENV!=="production"&&(l.onWarn=j);const u=e&&r||!e&&i!=="post";let f;if(os){if(i==="sync"){const I=mg();f=I.__watcherHandles||(I.__watcherHandles=[])}else if(!u){const I=()=>{};return I.stop=Fe,I.resume=Fe,I.pause=Fe,I}}const d=$e;l.call=(I,C,P)=>Lt(I,d,C,P);let p=!1;i==="post"?l.scheduler=I=>{mt(I,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(I,C)=>{C?I():ui(I)}),l.augmentJob=I=>{e&&(I.flags|=4),p&&(I.flags|=2,d&&(I.id=d.uid,I.i=d))};const v=Zp(t,e,l);return os&&(f?f.push(v):u&&v()),v}function gg(t,e,n){const r=this.proxy,s=Ve(t)?t.includes(".")?au(r,t):()=>r[t]:t.bind(r,r);let i;re(e)?i=e:(i=e.handler,n=e);const a=is(this),l=ou(s,i.bind(r),n);return a(),l}function au(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const _g=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${bt(e)}Modifiers`]||t[`${cn(e)}Modifiers`];function yg(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Te;if(process.env.NODE_ENV!=="production"){const{emitsOptions:d,propsOptions:[p]}=t;if(d)if(!(e in d))(!p||!(Vn(bt(e))in p))&&j(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${Vn(bt(e))}" prop.`);else{const v=d[e];re(v)&&(v(...n)||j(`Invalid event arguments: event validation failed for event "${e}".`))}}let s=n;const i=e.startsWith("update:"),a=i&&_g(r,e.slice(7));if(a&&(a.trim&&(s=n.map(d=>Ve(d)?d.trim():d)),a.number&&(s=n.map(No))),process.env.NODE_ENV!=="production"&&vm(t,e,s),process.env.NODE_ENV!=="production"){const d=e.toLowerCase();d!==e&&r[Vn(d)]&&j(`Event "${d}" is emitted in component ${Si(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${cn(e)}" instead of "${e}".`)}let l,u=r[l=Vn(e)]||r[l=Vn(bt(e))];!u&&i&&(u=r[l=Vn(cn(e))]),u&&Lt(u,t,6,s);const f=r[l+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Lt(f,t,6,s)}}const vg=new WeakMap;function lu(t,e,n=!1){const r=n?vg:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let a={},l=!1;if(!re(t)){const u=f=>{const d=lu(f,e,!0);d&&(l=!0,Oe(a,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?(Ee(t)&&r.set(t,null),null):(Z(i)?i.forEach(u=>a[u]=null):Oe(a,i),Ee(t)&&r.set(t,a),a)}function Ei(t,e){return!t||!Fr(e)?!1:(e=e.slice(2).replace(/Once$/,""),fe(t,e[0].toLowerCase()+e.slice(1))||fe(t,cn(e))||fe(t,e))}let ha=!1;function Ti(){ha=!0}function cu(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:p,data:v,setupState:I,ctx:C,inheritAttrs:P}=t,k=di(t);let X,K;process.env.NODE_ENV!=="production"&&(ha=!1);try{if(n.shapeFlag&4){const Q=s||r,he=process.env.NODE_ENV!=="production"&&I.__isScriptSetup?new Proxy(Q,{get(A,_,y){return j(`Property '${String(_)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(A,_,y)}}):Q;X=Pt(f.call(he,Q,d,process.env.NODE_ENV!=="production"?Mt(p):p,I,v,C)),K=l}else{const Q=e;process.env.NODE_ENV!=="production"&&l===p&&Ti(),X=Pt(Q.length>1?Q(process.env.NODE_ENV!=="production"?Mt(p):p,process.env.NODE_ENV!=="production"?{get attrs(){return Ti(),Mt(l)},slots:a,emit:u}:{attrs:l,slots:a,emit:u}):Q(process.env.NODE_ENV!=="production"?Mt(p):p,null)),K=e.props?l:Eg(l)}}catch(Q){ts.length=0,Wr(Q,t,1),X=Zt(_t)}let z=X,pe;if(process.env.NODE_ENV!=="production"&&X.patchFlag>0&&X.patchFlag&2048&&([z,pe]=uu(X)),K&&P!==!1){const Q=Object.keys(K),{shapeFlag:he}=z;if(Q.length){if(he&7)i&&Q.some(Ks)&&(K=Tg(K,i)),z=dn(z,K,!1,!0);else if(process.env.NODE_ENV!=="production"&&!ha&&z.type!==_t){const A=Object.keys(l),_=[],y=[];for(let w=0,b=A.length;w<b;w++){const R=A[w];Fr(R)?Ks(R)||_.push(R[2].toLowerCase()+R.slice(3)):y.push(R)}y.length&&j(`Extraneous non-props attributes (${y.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),_.length&&j(`Extraneous non-emits event listeners (${_.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(process.env.NODE_ENV!=="production"&&!hu(z)&&j("Runtime directive used on component with non-element root node. The directives will not function as intended."),z=dn(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&(process.env.NODE_ENV!=="production"&&!hu(z)&&j("Component inside <Transition> renders non-element root node that cannot be animated."),Xo(z,n.transition)),process.env.NODE_ENV!=="production"&&pe?pe(z):X=z,di(k),X}const uu=t=>{const e=t.children,n=t.dynamicChildren,r=fa(e,!1);if(r){if(process.env.NODE_ENV!=="production"&&r.patchFlag>0&&r.patchFlag&2048)return uu(r)}else return[t,void 0];const s=e.indexOf(r),i=n?n.indexOf(r):-1,a=l=>{e[s]=l,n&&(i>-1?n[i]=l:l.patchFlag>0&&(t.dynamicChildren=[...n,l]))};return[Pt(r),a]};function fa(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Ii(s)){if(s.type!==_t||s.children==="v-if"){if(n)return;if(n=s,process.env.NODE_ENV!=="production"&&e&&n.patchFlag>0&&n.patchFlag&2048)return fa(n.children)}}else return}return n}const Eg=t=>{let e;for(const n in t)(n==="class"||n==="style"||Fr(n))&&((e||(e={}))[n]=t[n]);return e},Tg=(t,e)=>{const n={};for(const r in t)(!Ks(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n},hu=t=>t.shapeFlag&7||t.type===_t;function wg(t,e,n){const{props:r,children:s,component:i}=t,{props:a,children:l,patchFlag:u}=e,f=i.emitsOptions;if(process.env.NODE_ENV!=="production"&&(s||l)&&Bt||e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?fu(r,a,f):!!a;if(u&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(a[v]!==r[v]&&!Ei(f,v))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?fu(r,a,f):!0:!!a;return!1}function fu(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ei(n,i))return!0}return!1}function Ig({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const du=t=>t.__isSuspense;function Ag(t,e){e&&e.pendingBranch?Z(t)?e.effects.push(...t):e.effects.push(t):Ic(t)}const gt=Symbol.for("v-fgt"),es=Symbol.for("v-txt"),_t=Symbol.for("v-cmt"),wi=Symbol.for("v-stc"),ts=[];let yt=null;function Ye(t=!1){ts.push(yt=t?null:[])}function bg(){ts.pop(),yt=ts[ts.length-1]||null}let ns=1;function pu(t,e=!1){ns+=t,t<0&&yt&&e&&(yt.hasOnce=!0)}function mu(t){return t.dynamicChildren=ns>0?yt||nr:null,bg(),ns>0&&yt&&yt.push(t),t}function ct(t,e,n,r,s,i){return mu(Pe(t,e,n,r,s,i,!0))}function Rg(t,e,n,r,s){return mu(Zt(t,e,n,r,s,!0))}function Ii(t){return t?t.__v_isVNode===!0:!1}function rs(t,e){if(process.env.NODE_ENV!=="production"&&e.shapeFlag&6&&t.component){const n=hi.get(e.type);if(n&&n.has(t.component))return t.shapeFlag&=-257,e.shapeFlag&=-513,!1}return t.type===e.type&&t.key===e.key}const Sg=(...t)=>_u(...t),gu=({key:t})=>t??null,Ai=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ve(t)||xe(t)||re(t)?{i:at,r:t,k:e,f:!!n}:t:null);function Pe(t,e=null,n=null,r=0,s=null,i=t===gt?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&gu(e),ref:e&&Ai(e),scopeId:Pc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:at};return l?(da(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=Ve(n)?8:16),process.env.NODE_ENV!=="production"&&u.key!==u.key&&j("VNode created with invalid key (NaN). VNode type:",u.type),ns>0&&!a&&yt&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&yt.push(u),u}const Zt=process.env.NODE_ENV!=="production"?Sg:_u;function _u(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Fm)&&(process.env.NODE_ENV!=="production"&&!t&&j(`Invalid vnode type when creating vnode: ${t}.`),t=_t),Ii(t)){const l=dn(t,e,!0);return n&&da(l,n),ns>0&&!i&&yt&&(l.shapeFlag&6?yt[yt.indexOf(t)]=l:yt.push(l)),l.patchFlag=-2,l}if(Ru(t)&&(t=t.__vccOpts),e){e=Vg(e);let{class:l,style:u}=e;l&&!Ve(l)&&(e.class=Ys(l)),Ee(u)&&(ri(u)&&!Z(u)&&(u=Oe({},u)),e.style=Qs(u))}const a=Ve(t)?1:du(t)?128:wm(t)?64:Ee(t)?4:re(t)?2:0;return process.env.NODE_ENV!=="production"&&a&4&&ri(t)&&(t=le(t),j("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Pe(t,e,n,r,s,a,i,!0)}function Vg(t){return t?ri(t)||Qc(t)?Oe({},t):t:null}function dn(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=t,f=e?Cg(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&gu(f),ref:e&&e.ref?n&&i?Z(i)?i.concat(Ai(e)):[i,Ai(e)]:Ai(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:process.env.NODE_ENV!=="production"&&a===-1&&Z(l)?l.map(yu):l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==gt?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&dn(t.ssContent),ssFallback:t.ssFallback&&dn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&Xo(d,u.clone(d)),d}function yu(t){const e=dn(t);return Z(t.children)&&(e.children=t.children.map(yu)),e}function Ng(t=" ",e=0){return Zt(es,null,t,e)}function ss(t="",e=!1){return e?(Ye(),Rg(_t,null,t)):Zt(_t,null,t)}function Pt(t){return t==null||typeof t=="boolean"?Zt(_t):Z(t)?Zt(gt,null,t.slice()):Ii(t)?pn(t):Zt(es,null,String(t))}function pn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:dn(t)}function da(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Z(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),da(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Qc(e)?e._ctx=at:s===3&&at&&(at.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else re(e)?(e={default:e,_ctx:at},n=32):(e=String(e),r&64?(n=16,e=[Ng(e)]):n=8);t.children=e,t.shapeFlag|=n}function Cg(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ys([e.class,r.class]));else if(s==="style")e.style=Qs([e.style,r.style]);else if(Fr(s)){const i=e[s],a=r[s];a&&i!==a&&!(Z(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function jt(t,e,n,r=null){Lt(t,e,7,[n,r])}const Pg=Wc();let Dg=0;function Og(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Pg,i={uid:Dg++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ap(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xc(r,s),emitsOptions:lu(r,s),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:r.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?i.ctx=Lm(i):i.ctx={_:i},i.root=e?e.root:i,i.emit=yg.bind(null,i),t.ce&&t.ce(i),i}let $e=null;const vu=()=>$e||at;let bi,pa;{const t=Br(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};bi=e("__VUE_INSTANCE_SETTERS__",n=>$e=n),pa=e("__VUE_SSR_SETTERS__",n=>os=n)}const is=t=>{const e=$e;return bi(t),t.scope.on(),()=>{t.scope.off(),bi(e)}},Eu=()=>{$e&&$e.scope.off(),bi(null)},xg=Gt("slot,component");function ma(t,{isNativeTag:e}){(xg(t)||e(t))&&j("Do not use built-in or reserved HTML elements as component id: "+t)}function Tu(t){return t.vnode.shapeFlag&4}let os=!1;function kg(t,e=!1,n=!1){e&&pa(e);const{props:r,children:s}=t.vnode,i=Tu(t);Ym(t,r,i,e),ag(t,s,n||e);const a=i?Mg(t,e):void 0;return e&&pa(!1),a}function Mg(t,e){var n;const r=t.type;if(process.env.NODE_ENV!=="production"){if(r.name&&ma(r.name,t.appContext.config),r.components){const i=Object.keys(r.components);for(let a=0;a<i.length;a++)ma(i[a],t.appContext.config)}if(r.directives){const i=Object.keys(r.directives);for(let a=0;a<i.length;a++)Dc(i[a])}r.compilerOptions&&Fg()&&j('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,Uc),process.env.NODE_ENV!=="production"&&Um(t);const{setup:s}=r;if(s){Vt();const i=t.setupContext=s.length>1?Ug(t):null,a=is(t),l=ir(s,t,0,[process.env.NODE_ENV!=="production"?Mt(t.props):t.props,i]),u=Ro(l);if(Nt(),a(),(u||t.sp)&&!Xr(t)&&xc(t),u){if(l.then(Eu,Eu),e)return l.then(f=>{wu(t,f,e)}).catch(f=>{Wr(f,t,0)});if(t.asyncDep=l,process.env.NODE_ENV!=="production"&&!t.suspense){const f=(n=r.name)!=null?n:"Anonymous";j(`Component <${f}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else wu(t,l,e)}else Iu(t,e)}function wu(t,e,n){re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ee(e)?(process.env.NODE_ENV!=="production"&&Ii(e)&&j("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(t.devtoolsRawSetupState=e),t.setupState=vc(e),process.env.NODE_ENV!=="production"&&Bm(t)):process.env.NODE_ENV!=="production"&&e!==void 0&&j(`setup() should return an object. Received: ${e===null?"null":typeof e}`),Iu(t,n)}const Fg=()=>!0;function Iu(t,e,n){const r=t.type;t.render||(t.render=r.render||Fe);{const s=is(t);Vt();try{$m(t)}finally{Nt(),s()}}process.env.NODE_ENV!=="production"&&!r.render&&t.render===Fe&&!e&&(r.template?j('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):j("Component is missing template or render function: ",r))}const Au=process.env.NODE_ENV!=="production"?{get(t,e){return Ti(),Le(t,"get",""),t[e]},set(){return j("setupContext.attrs is readonly."),!1},deleteProperty(){return j("setupContext.attrs is readonly."),!1}}:{get(t,e){return Le(t,"get",""),t[e]}};function Lg(t){return new Proxy(t.slots,{get(e,n){return Le(t,"get","$slots"),e[n]}})}function Ug(t){const e=n=>{if(process.env.NODE_ENV!=="production"&&(t.exposed&&j("expose() should be called only once per setup()."),n!=null)){let r=typeof n;r==="object"&&(Z(n)?r="array":xe(n)&&(r="ref")),r!=="object"&&j(`expose() should be passed a plain object, received ${r}.`)}t.exposed=n||{}};if(process.env.NODE_ENV!=="production"){let n,r;return Object.freeze({get attrs(){return n||(n=new Proxy(t.attrs,Au))},get slots(){return r||(r=Lg(t))},get emit(){return(s,...i)=>t.emit(s,...i)},expose:e})}else return{attrs:new Proxy(t.attrs,Au),slots:t.slots,emit:t.emit,expose:e}}function Ri(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(vc(Kp(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Mn)return Mn[n](t)},has(e,n){return n in e||n in Mn}})):t.proxy}const Bg=/(?:^|[-_])\w/g,jg=t=>t.replace(Bg,e=>e.toUpperCase()).replace(/[-_]/g,"");function bu(t,e=!0){return re(t)?t.displayName||t.name:t.name||e&&t.__name}function Si(t,e,n=!1){let r=bu(e);if(!r&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(r=s[1])}if(!r&&t&&t.parent){const s=i=>{for(const a in i)if(i[a]===e)return a};r=s(t.components||t.parent.type.components)||s(t.appContext.components)}return r?jg(r):n?"App":"Anonymous"}function Ru(t){return re(t)&&"__vccOpts"in t}const Su=(t,e)=>{const n=Xp(t,e,os);if(process.env.NODE_ENV!=="production"){const r=vu();r&&r.appContext.config.warnRecursiveComputed&&(n._warnRecursive=!0)}return n};function $g(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#1677ff"},n={style:"color:#f5222d"},r={style:"color:#eb2f96"},s={__vue_custom_formatter:!0,header(p){if(!Ee(p))return null;if(p.__isVue)return["div",t,"VueInstance"];if(xe(p)){Vt();const v=p.value;return Nt(),["div",{},["span",t,d(p)],"<",l(v),">"]}else{if(Cn(p))return["div",{},["span",t,it(p)?"ShallowReactive":"Reactive"],"<",l(p),`>${Ft(p)?" (readonly)":""}`];if(Ft(p))return["div",{},["span",t,it(p)?"ShallowReadonly":"Readonly"],"<",l(p),">"]}return null},hasBody(p){return p&&p.__isVue},body(p){if(p&&p.__isVue)return["div",{},...i(p.$)]}};function i(p){const v=[];p.type.props&&p.props&&v.push(a("props",le(p.props))),p.setupState!==Te&&v.push(a("setup",p.setupState)),p.data!==Te&&v.push(a("data",le(p.data)));const I=u(p,"computed");I&&v.push(a("computed",I));const C=u(p,"inject");return C&&v.push(a("injected",C)),v.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:p}]]),v}function a(p,v){return v=Oe({},v),Object.keys(v).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},p],["div",{style:"padding-left:1.25em"},...Object.keys(v).map(I=>["div",{},["span",r,I+": "],l(v[I],!1)])]]:["span",{}]}function l(p,v=!0){return typeof p=="number"?["span",e,p]:typeof p=="string"?["span",n,JSON.stringify(p)]:typeof p=="boolean"?["span",r,p]:Ee(p)?["object",{object:v?le(p):p}]:["span",n,String(p)]}function u(p,v){const I=p.type;if(re(I))return;const C={};for(const P in p.ctx)f(I,P,v)&&(C[P]=p.ctx[P]);return C}function f(p,v,I){const C=p[I];if(Z(C)&&C.includes(v)||Ee(C)&&v in C||p.extends&&f(p.extends,v,I)||p.mixins&&p.mixins.some(P=>f(P,v,I)))return!0}function d(p){return it(p)?"ShallowRef":p.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(s):window.devtoolsFormatters=[s]}const Vu="3.5.24",en=process.env.NODE_ENV!=="production"?j:Fe;process.env.NODE_ENV,process.env.NODE_ENV;/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ga;const Nu=typeof window<"u"&&window.trustedTypes;if(Nu)try{ga=Nu.createPolicy("vue",{createHTML:t=>t})}catch(t){process.env.NODE_ENV!=="production"&&en(`Error creating trusted types policy: ${t}`)}const Cu=ga?t=>ga.createHTML(t):t=>t,qg="http://www.w3.org/2000/svg",Hg="http://www.w3.org/1998/Math/MathML",tn=typeof document<"u"?document:null,Pu=tn&&tn.createElement("template"),Kg={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?tn.createElementNS(qg,t):e==="mathml"?tn.createElementNS(Hg,t):n?tn.createElement(t,{is:n}):tn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>tn.createTextNode(t),createComment:t=>tn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>tn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const a=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Pu.innerHTML=Cu(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Pu.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Wg=Symbol("_vtc");function zg(t,e,n){const r=t[Wg];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Du=Symbol("_vod"),Gg=Symbol("_vsh"),Qg=Symbol(process.env.NODE_ENV!=="production"?"CSS_VAR_TEXT":""),Yg=/(?:^|;)\s*display\s*:/;function Xg(t,e,n){const r=t.style,s=Ve(n);let i=!1;if(n&&!s){if(e)if(Ve(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Vi(r,l,"")}else for(const a in e)n[a]==null&&Vi(r,a,"");for(const a in n)a==="display"&&(i=!0),Vi(r,a,n[a])}else if(s){if(e!==n){const a=r[Qg];a&&(n+=";"+a),r.cssText=n,i=Yg.test(n)}}else e&&t.removeAttribute("style");Du in t&&(t[Du]=i?r.display:"",t[Gg]&&(r.display="none"))}const Jg=/[^\\];\s*$/,Ou=/\s*!important$/;function Vi(t,e,n){if(Z(n))n.forEach(r=>Vi(t,e,r));else if(n==null&&(n=""),process.env.NODE_ENV!=="production"&&Jg.test(n)&&en(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const r=Zg(t,e);Ou.test(n)?t.setProperty(cn(r),n.replace(Ou,""),"important"):t[r]=n}}const xu=["Webkit","Moz","ms"],_a={};function Zg(t,e){const n=_a[e];if(n)return n;let r=bt(e);if(r!=="filter"&&r in t)return _a[e]=r;r=zs(r);for(let s=0;s<xu.length;s++){const i=xu[s]+r;if(i in t)return _a[e]=i}return e}const ku="http://www.w3.org/1999/xlink";function Mu(t,e,n,r,s,i=wp(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(ku,e.slice(6,e.length)):t.setAttributeNS(ku,e,n):n==null||i&&!Xl(n)?t.removeAttribute(e):t.setAttribute(e,i?"":xt(n)?String(n):n)}function Fu(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Cu(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Xl(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch(l){process.env.NODE_ENV!=="production"&&!a&&en(`Failed setting prop "${e}" on <${i.toLowerCase()}>: value ${n} is invalid.`,l)}a&&t.removeAttribute(s||e)}function Ln(t,e,n,r){t.addEventListener(e,n,r)}function e_(t,e,n,r){t.removeEventListener(e,n,r)}const Lu=Symbol("_vei");function t_(t,e,n,r,s=null){const i=t[Lu]||(t[Lu]={}),a=i[e];if(r&&a)a.value=process.env.NODE_ENV!=="production"?Bu(r,e):r;else{const[l,u]=n_(e);if(r){const f=i[e]=i_(process.env.NODE_ENV!=="production"?Bu(r,e):r,s);Ln(t,l,f,u)}else a&&(e_(t,l,a,u),i[e]=void 0)}}const Uu=/(?:Once|Passive|Capture)$/;function n_(t){let e;if(Uu.test(t)){e={};let r;for(;r=t.match(Uu);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):cn(t.slice(2)),e]}let ya=0;const r_=Promise.resolve(),s_=()=>ya||(r_.then(()=>ya=0),ya=Date.now());function i_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Lt(o_(r,n.value),e,5,[r])};return n.value=t,n.attached=s_(),n}function Bu(t,e){return re(t)||Z(t)?t:(en(`Wrong type passed as event handler to ${e} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof t}.`),Fe)}function o_(t,e){if(Z(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const ju=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,a_=(t,e,n,r,s,i)=>{const a=s==="svg";e==="class"?zg(t,r,a):e==="style"?Xg(t,n,r):Fr(e)?Ks(e)||t_(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):l_(t,e,r,a))?(Fu(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Mu(t,e,r,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ve(r))?Fu(t,bt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Mu(t,e,r,a))};function l_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&ju(e)&&re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ju(e)&&Ve(n)?!1:e in t}const Ni=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Z(e)?n=>rr(e,n):e};function c_(t){t.target.composing=!0}function $u(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hr=Symbol("_assign");function qu(t,e,n){return e&&(t=t.trim()),n&&(t=No(t)),t}const u_={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[hr]=Ni(s);const i=r||s.props&&s.props.type==="number";Ln(t,e?"change":"input",a=>{a.target.composing||t[hr](qu(t.value,n,i))}),(n||i)&&Ln(t,"change",()=>{t.value=qu(t.value,n,i)}),e||(Ln(t,"compositionstart",c_),Ln(t,"compositionend",$u),Ln(t,"change",$u))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(t[hr]=Ni(a),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?No(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===u)||(t.value=u))}},h_={created(t,{value:e},n){t.checked=Xs(e,n.props.value),t[hr]=Ni(n),Ln(t,"change",()=>{t[hr](f_(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[hr]=Ni(r),e!==n&&(t.checked=Xs(e,r.props.value))}};function f_(t){return"_value"in t?t._value:t.value}const d_=["ctrl","shift","alt","meta"],p_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>d_.some(n=>t[`${n}Key`]&&!e.includes(n))},Hu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let a=0;a<e.length;a++){const l=p_[e[a]];if(l&&l(s,e))return}return t(s,...i)}))},m_=Oe({patchProp:a_},Kg);let Ku;function g_(){return Ku||(Ku=ug(m_))}const __=((...t)=>{const e=g_().createApp(...t);process.env.NODE_ENV!=="production"&&(v_(e),E_(e));const{mount:n}=e;return e.mount=r=>{const s=T_(r);if(!s)return;const i=e._component;!re(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,y_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e});function y_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function v_(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>vp(e)||Ep(e)||Tp(e),writable:!1})}function E_(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){en("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,r='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(t.config,"compilerOptions",{get(){return en(r),n},set(){en(r)}})}}function T_(t){if(Ve(t)){const e=document.querySelector(t);return process.env.NODE_ENV!=="production"&&!e&&en(`Failed to mount app: mount target selector "${t}" returned null.`),e}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&en('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}/**
* vue v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function w_(){$g()}process.env.NODE_ENV!=="production"&&w_();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},I_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},zu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,f=u?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let v=(l&15)<<2|f>>6,I=f&63;u||(I=64,a||(v=64)),r.push(n[d],n[p],n[v],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Wu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):I_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||f==null||p==null)throw new A_;const v=i<<2|l>>4;if(r.push(v),f!==64){const I=l<<4&240|f>>2;if(r.push(I),p!==64){const C=f<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class A_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const b_=function(t){const e=Wu(t);return zu.encodeByteArray(e,!0)},Ci=function(t){return b_(t).replace(/\./g,"")},R_=function(t){try{return zu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=()=>S_().__FIREBASE_DEFAULTS__,N_=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},C_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R_(t[1]);return e&&JSON.parse(e)},va=()=>{try{return V_()||N_()||C_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},P_=t=>{var e,n;return(n=(e=va())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},D_=t=>{const e=P_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gu=()=>{var t;return(t=va())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ci(JSON.stringify(n)),Ci(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function M_(){var t;const e=(t=va())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function F_(){return!M_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L_(){try{return typeof indexedDB=="object"}catch{return!1}}function U_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="FirebaseError";class fr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B_,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qu.prototype.create)}}class Qu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?j_(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fr(s,l,r)}}function j_(t,e){return t.replace($_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $_=/\{\$([^}]+)}/g;function Ea(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Yu(i)&&Yu(a)){if(!Ea(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yu(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new O_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(K_(e))try{this.getOrInitializeService({instanceIdentifier:Un})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Un){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Un){return this.instances.has(e)}getOptions(e=Un){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:H_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Un){return this.component?this.component.multipleInstances?e:Un:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function H_(t){return t===Un?void 0:t}function K_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new q_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const z_={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},G_=me.INFO,Q_={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Y_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Q_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xu{constructor(e){this.name=e,this._logLevel=G_,this._logHandler=Y_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?z_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const X_=(t,e)=>e.some(n=>t instanceof n);let Ju,Zu;function J_(){return Ju||(Ju=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Z_(){return Zu||(Zu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eh=new WeakMap,Ta=new WeakMap,th=new WeakMap,wa=new WeakMap,Ia=new WeakMap;function ey(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(mn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&eh.set(n,t)}).catch(()=>{}),Ia.set(e,t),e}function ty(t){if(Ta.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ta.set(t,e)}let Aa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ta.get(t);if(e==="objectStoreNames")return t.objectStoreNames||th.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ny(t){Aa=t(Aa)}function ry(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ba(this),e,...n);return th.set(r,e.sort?e.sort():[e]),mn(r)}:Z_().includes(t)?function(...e){return t.apply(ba(this),e),mn(eh.get(this))}:function(...e){return mn(t.apply(ba(this),e))}}function sy(t){return typeof t=="function"?ry(t):(t instanceof IDBTransaction&&ty(t),X_(t,J_())?new Proxy(t,Aa):t)}function mn(t){if(t instanceof IDBRequest)return ey(t);if(wa.has(t))return wa.get(t);const e=sy(t);return e!==t&&(wa.set(t,e),Ia.set(e,t)),e}const ba=t=>Ia.get(t);function iy(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=mn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(mn(a.result),u.oldVersion,u.newVersion,mn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const oy=["get","getKey","getAll","getAllKeys","count"],ay=["put","add","delete","clear"],Ra=new Map;function nh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ra.get(e))return Ra.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ay.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||oy.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Ra.set(e,i),i}ny(t=>({...t,get:(e,n,r)=>nh(e,n)||t.get(e,n,r),has:(e,n)=>!!nh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cy(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sa="@firebase/app",rh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn=new Xu("@firebase/app"),uy="@firebase/app-compat",hy="@firebase/analytics-compat",fy="@firebase/analytics",dy="@firebase/app-check-compat",py="@firebase/app-check",my="@firebase/auth",gy="@firebase/auth-compat",_y="@firebase/database",yy="@firebase/data-connect",vy="@firebase/database-compat",Ey="@firebase/functions",Ty="@firebase/functions-compat",wy="@firebase/installations",Iy="@firebase/installations-compat",Ay="@firebase/messaging",by="@firebase/messaging-compat",Ry="@firebase/performance",Sy="@firebase/performance-compat",Vy="@firebase/remote-config",Ny="@firebase/remote-config-compat",Cy="@firebase/storage",Py="@firebase/storage-compat",Dy="@firebase/firestore",Oy="@firebase/vertexai-preview",xy="@firebase/firestore-compat",ky="firebase",My="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]",Fy={[Sa]:"fire-core",[uy]:"fire-core-compat",[fy]:"fire-analytics",[hy]:"fire-analytics-compat",[py]:"fire-app-check",[dy]:"fire-app-check-compat",[my]:"fire-auth",[gy]:"fire-auth-compat",[_y]:"fire-rtdb",[yy]:"fire-data-connect",[vy]:"fire-rtdb-compat",[Ey]:"fire-fn",[Ty]:"fire-fn-compat",[wy]:"fire-iid",[Iy]:"fire-iid-compat",[Ay]:"fire-fcm",[by]:"fire-fcm-compat",[Ry]:"fire-perf",[Sy]:"fire-perf-compat",[Vy]:"fire-rc",[Ny]:"fire-rc-compat",[Cy]:"fire-gcs",[Py]:"fire-gcs-compat",[Dy]:"fire-fst",[xy]:"fire-fst-compat",[Oy]:"fire-vertex","fire-js":"fire-js",[ky]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Map,Ly=new Map,Na=new Map;function sh(t,e){try{t.container.addComponent(e)}catch(n){nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(Na.has(e))return nn.debug(`There were multiple attempts to register component ${e}.`),!1;Na.set(e,t);for(const n of Pi.values())sh(n,t);for(const n of Ly.values())sh(n,t);return!0}function Uy(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gn=new Qu("app","Firebase",By);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=My;function ih(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Va,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw gn.create("bad-app-name",{appName:String(s)});if(n||(n=Gu()),!n)throw gn.create("no-options");const i=Pi.get(s);if(i){if(Ea(n,i.options)&&Ea(r,i.config))return i;throw gn.create("duplicate-app",{appName:s})}const a=new W_(s);for(const u of Na.values())a.addComponent(u);const l=new jy(n,r,a);return Pi.set(s,l),l}function qy(t=Va){const e=Pi.get(t);if(!e&&t===Va&&Gu())return ih();if(!e)throw gn.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let s=(r=Fy[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nn.warn(l.join(" "));return}Di(new ls(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="firebase-heartbeat-database",Ky=1,cs="firebase-heartbeat-store";let Ca=null;function oh(){return Ca||(Ca=iy(Hy,Ky,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cs)}catch(n){console.warn(n)}}}}).catch(t=>{throw gn.create("idb-open",{originalErrorMessage:t.message})})),Ca}async function Wy(t){try{const n=(await oh()).transaction(cs),r=await n.objectStore(cs).get(lh(t));return await n.done,r}catch(e){if(e instanceof fr)nn.warn(e.message);else{const n=gn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});nn.warn(n.message)}}}async function ah(t,e){try{const r=(await oh()).transaction(cs,"readwrite");await r.objectStore(cs).put(e,lh(t)),await r.done}catch(n){if(n instanceof fr)nn.warn(n.message);else{const r=gn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});nn.warn(r.message)}}}function lh(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=1024,Gy=720*60*60*1e3;class Qy{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Xy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ch();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=Gy}),this._storage.overwrite(this._heartbeatsCache))}catch(r){nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ch(),{heartbeatsToSend:r,unsentEntries:s}=Yy(this._heartbeatsCache.heartbeats),i=Ci(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return nn.warn(n),""}}}function ch(){return new Date().toISOString().substring(0,10)}function Yy(t,e=zy){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),uh(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),uh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Xy{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return L_()?U_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Wy(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ah(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ah(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function uh(t){return Ci(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(t){Di(new ls("platform-logger",e=>new ly(e),"PRIVATE")),Di(new ls("heartbeat",e=>new Qy(e),"PRIVATE")),dr(Sa,rh,t),dr(Sa,rh,"esm2017"),dr("fire-js","")}Jy("");var Zy="firebase",ev="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(Zy,ev,"app");var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bn,fh;(function(){var t;/** @license

   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function e(A,_){function y(){}y.prototype=_.prototype,A.D=_.prototype,A.prototype=new y,A.prototype.constructor=A,A.C=function(w,b,R){for(var E=Array(arguments.length-2),It=2;It<arguments.length;It++)E[It-2]=arguments[It];return _.prototype[b].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,_,y){y||(y=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(b=0;16>b;++b)w[b]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=A.g[0],y=A.g[1],b=A.g[2];var R=A.g[3],E=_+(R^y&(b^R))+w[0]+3614090360&4294967295;_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[1]+3905402710&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[2]+606105819&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[3]+3250441966&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(R^y&(b^R))+w[4]+4118548399&4294967295,_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[5]+1200080426&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[6]+2821735955&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[7]+4249261313&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(R^y&(b^R))+w[8]+1770035416&4294967295,_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[9]+2336552879&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[10]+4294925233&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[11]+2304563134&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(R^y&(b^R))+w[12]+1804603682&4294967295,_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[13]+4254626195&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[14]+2792965006&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[15]+1236535329&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(b^R&(y^b))+w[1]+4129170786&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[6]+3225465664&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[11]+643717713&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[0]+3921069994&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(b^R&(y^b))+w[5]+3593408605&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[10]+38016083&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[15]+3634488961&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[4]+3889429448&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(b^R&(y^b))+w[9]+568446438&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[14]+3275163606&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[3]+4107603335&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[8]+1163531501&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(b^R&(y^b))+w[13]+2850285829&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[2]+4243563512&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[7]+1735328473&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[12]+2368359562&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(y^b^R)+w[5]+4294588738&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[8]+2272392833&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[11]+1839030562&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[14]+4259657740&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(y^b^R)+w[1]+2763975236&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[4]+1272893353&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[7]+4139469664&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[10]+3200236656&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(y^b^R)+w[13]+681279174&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[0]+3936430074&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[3]+3572445317&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[6]+76029189&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(y^b^R)+w[9]+3654602809&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[12]+3873151461&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[15]+530742520&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[2]+3299628645&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(b^(y|~R))+w[0]+4096336452&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[7]+1126891415&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[14]+2878612391&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[5]+4237533241&4294967295,y=b+(E<<21&4294967295|E>>>11),E=_+(b^(y|~R))+w[12]+1700485571&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[3]+2399980690&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[10]+4293915773&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[1]+2240044497&4294967295,y=b+(E<<21&4294967295|E>>>11),E=_+(b^(y|~R))+w[8]+1873313359&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[15]+4264355552&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[6]+2734768916&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[13]+1309151649&4294967295,y=b+(E<<21&4294967295|E>>>11),E=_+(b^(y|~R))+w[4]+4149444226&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[11]+3174756917&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[2]+718787259&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,A.g[2]=A.g[2]+b&4294967295,A.g[3]=A.g[3]+R&4294967295}r.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var y=_-this.blockSize,w=this.B,b=this.h,R=0;R<_;){if(b==0)for(;R<=y;)s(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<_;)if(w[b++]=A.charCodeAt(R++),b==this.blockSize){s(this,w),b=0;break}}else for(;R<_;)if(w[b++]=A[R++],b==this.blockSize){s(this,w),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var y=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=y&255,y/=256;for(this.u(A),A=Array(16),_=y=0;4>_;++_)for(var w=0;32>w;w+=8)A[y++]=this.g[_]>>>w&255;return A};function i(A,_){var y=l;return Object.prototype.hasOwnProperty.call(y,A)?y[A]:y[A]=_(A)}function a(A,_){this.h=_;for(var y=[],w=!0,b=A.length-1;0<=b;b--){var R=A[b]|0;w&&R==_||(y[b]=R,w=!1)}this.g=y}var l={};function u(A){return-128<=A&&128>A?i(A,function(_){return new a([_|0],0>_?-1:0)}):new a([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return k(f(-A));for(var _=[],y=1,w=0;A>=y;w++)_[w]=A/y|0,y*=4294967296;return new a(_,0)}function d(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return k(d(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=f(Math.pow(_,8)),w=p,b=0;b<A.length;b+=8){var R=Math.min(8,A.length-b),E=parseInt(A.substring(b,b+R),_);8>R?(R=f(Math.pow(_,R)),w=w.j(R).add(f(E))):(w=w.j(y),w=w.add(f(E)))}return w}var p=u(0),v=u(1),I=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-k(this).m();for(var A=0,_=1,y=0;y<this.g.length;y++){var w=this.i(y);A+=(0<=w?w:4294967296+w)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(P(this))return"-"+k(this).toString(A);for(var _=f(Math.pow(A,6)),y=this,w="";;){var b=pe(y,_).g;y=X(y,b.j(_));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(A);if(y=b,C(y))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=X(this,A),P(A)?-1:C(A)?0:1};function k(A){for(var _=A.g.length,y=[],w=0;w<_;w++)y[w]=~A.g[w];return new a(y,~A.h).add(v)}t.abs=function(){return P(this)?k(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0,b=0;b<=_;b++){var R=w+(this.i(b)&65535)+(A.i(b)&65535),E=(R>>>16)+(this.i(b)>>>16)+(A.i(b)>>>16);w=E>>>16,R&=65535,E&=65535,y[b]=E<<16|R}return new a(y,y[y.length-1]&-2147483648?-1:0)};function X(A,_){return A.add(k(_))}t.j=function(A){if(C(this)||C(A))return p;if(P(this))return P(A)?k(this).j(k(A)):k(k(this).j(A));if(P(A))return k(this.j(k(A)));if(0>this.l(I)&&0>A.l(I))return f(this.m()*A.m());for(var _=this.g.length+A.g.length,y=[],w=0;w<2*_;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<A.g.length;b++){var R=this.i(w)>>>16,E=this.i(w)&65535,It=A.i(b)>>>16,dt=A.i(b)&65535;y[2*w+2*b]+=E*dt,K(y,2*w+2*b),y[2*w+2*b+1]+=R*dt,K(y,2*w+2*b+1),y[2*w+2*b+1]+=E*It,K(y,2*w+2*b+1),y[2*w+2*b+2]+=R*It,K(y,2*w+2*b+2)}for(w=0;w<_;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=_;w<2*_;w++)y[w]=0;return new a(y,0)};function K(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function z(A,_){this.g=A,this.h=_}function pe(A,_){if(C(_))throw Error("division by zero");if(C(A))return new z(p,p);if(P(A))return _=pe(k(A),_),new z(k(_.g),k(_.h));if(P(_))return _=pe(A,k(_)),new z(k(_.g),_.h);if(30<A.g.length){if(P(A)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var y=v,w=_;0>=w.l(A);)y=Q(y),w=Q(w);var b=he(y,1),R=he(w,1);for(w=he(w,2),y=he(y,2);!C(w);){var E=R.add(w);0>=E.l(A)&&(b=b.add(y),R=E),w=he(w,1),y=he(y,1)}return _=X(A,b.j(_)),new z(b,_)}for(b=p;0<=A.l(_);){for(y=Math.max(1,Math.floor(A.m()/_.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=f(y),E=R.j(_);P(E)||0<E.l(A);)y-=w,R=f(y),E=R.j(_);C(R)&&(R=v),b=b.add(R),A=X(A,E)}return new z(b,A)}t.A=function(A){return pe(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)&A.i(w);return new a(y,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)|A.i(w);return new a(y,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)^A.i(w);return new a(y,this.h^A.h)};function Q(A){for(var _=A.g.length+1,y=[],w=0;w<_;w++)y[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(y,A.h)}function he(A,_){var y=_>>5;_%=32;for(var w=A.g.length-y,b=[],R=0;R<w;R++)b[R]=0<_?A.i(R+y)>>>_|A.i(R+y+1)<<32-_:A.i(R+y);return new a(b,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fh=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,Bn=a}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dh,us,ph,xi,Pa,mh,gh,_h;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,h){return o==Array.prototype||o==Object.prototype||(o[c]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oi=="object"&&Oi];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var h=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var S=o[m];if(!(S in h))break e;h=h[S]}o=o[o.length-1],m=h[o],c=c(m),c!=m&&c!=null&&e(h,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var h=0,m=!1,S={next:function(){if(!m&&h<o.length){var V=h++;return{value:c(V,o[V]),done:!1}}return m=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,h){return h})}});/** @license

   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,h){return o.call.apply(o.bind,arguments)}function p(o,c,h){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,m),o.apply(c,S)}}return function(){return o.apply(c,arguments)}}function v(o,c,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,v.apply(null,arguments)}function I(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function C(o,c){function h(){}h.prototype=c.prototype,o.aa=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(m,S,V){for(var q=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)q[Ae-2]=arguments[Ae];return c.prototype[S].apply(m,q)}}function P(o){const c=o.length;if(0<c){const h=Array(c);for(let m=0;m<c;m++)h[m]=o[m];return h}return[]}function k(o,c){for(let h=1;h<arguments.length;h++){const m=arguments[h];if(u(m)){const S=o.length||0,V=m.length||0;o.length=S+V;for(let q=0;q<V;q++)o[S+q]=m[q]}else o.push(m)}}class X{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function K(o){return/^[\s\xa0]*$/.test(o)}function z(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function pe(o){return pe[" "](o),o}pe[" "]=function(){};var Q=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function he(o,c,h){for(const m in o)c.call(h,o[m],m,o)}function A(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function _(o){const c={};for(const h in o)c[h]=o[h];return c}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let h,m;for(let S=1;S<arguments.length;S++){m=arguments[S];for(h in m)o[h]=m[h];for(let V=0;V<y.length;V++)h=y[V],Object.prototype.hasOwnProperty.call(m,h)&&(o[h]=m[h])}}function b(o){var c=1;o=o.split(":");const h=[];for(;0<c&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function R(o){l.setTimeout(()=>{throw o},0)}function E(){var o=pt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class It{constructor(){this.h=this.g=null}add(c,h){const m=dt.get();m.set(c,h),this.h?this.h.next=m:this.g=m,this.h=m}}var dt=new X(()=>new et,o=>o.reset());class et{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ae=!1,pt=new It,Nr=()=>{const o=l.Promise.resolve(void 0);ce=()=>{o.then(Qn)}};var Qn=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){R(h)}var c=dt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}ae=!1};function ut(){this.s=this.s,this.C=this.C}ut.prototype.s=!1,ut.prototype.ma=function(){this.s||(this.s=!0,this.N())},ut.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Cs=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return o})();function Yn(o,c){if(be.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(Q){e:{try{pe(c.nodeName);var S=!0;break e}catch{}S=!1}S||(c=null)}}else h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Cl[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Yn.aa.h.call(this)}}C(Yn,be);var Cl={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),Cr=0;function Ps(o,c,h,m,S){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!m,this.ha=S,this.key=++Cr,this.da=this.fa=!1}function Xn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function zt(o){this.src=o,this.g={},this.h=0}zt.prototype.add=function(o,c,h,m,S){var V=o.toString();o=this.g[V],o||(o=this.g[V]=[],this.h++);var q=g(o,c,m,S);return-1<q?(c=o[q],h||(c.fa=!1)):(c=new Ps(c,this.src,V,!!m,S),c.fa=h,o.push(c)),c};function lo(o,c){var h=c.type;if(h in o.g){var m=o.g[h],S=Array.prototype.indexOf.call(m,c,void 0),V;(V=0<=S)&&Array.prototype.splice.call(m,S,1),V&&(Xn(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function g(o,c,h,m){for(var S=0;S<o.length;++S){var V=o[S];if(!V.da&&V.listener==c&&V.capture==!!h&&V.ha==m)return S}return-1}var T="closure_lm_"+(1e6*Math.random()|0),N={};function F(o,c,h,m,S){if(Array.isArray(c)){for(var V=0;V<c.length;V++)F(o,c[V],h,m,S);return null}return h=Y(h),o&&o[Wt]?o.K(c,h,f(m)?!!m.capture:!1,S):D(o,c,h,!1,m,S)}function D(o,c,h,m,S,V){if(!c)throw Error("Invalid event type");var q=f(S)?!!S.capture:!!S,Ae=J(o);if(Ae||(o[T]=Ae=new zt(o)),h=Ae.add(c,h,m,q,V),h.proxy)return h;if(m=O(),h.proxy=m,m.src=o,m.listener=h,o.addEventListener)Cs||(S=q),S===void 0&&(S=!1),o.addEventListener(c.toString(),m,S);else if(o.attachEvent)o.attachEvent(U(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function O(){function o(h){return c.call(o.src,o.listener,h)}const c=x;return o}function $(o,c,h,m,S){if(Array.isArray(c))for(var V=0;V<c.length;V++)$(o,c[V],h,m,S);else m=f(m)?!!m.capture:!!m,h=Y(h),o&&o[Wt]?(o=o.i,c=String(c).toString(),c in o.g&&(V=o.g[c],h=g(V,h,m,S),-1<h&&(Xn(V[h]),Array.prototype.splice.call(V,h,1),V.length==0&&(delete o.g[c],o.h--)))):o&&(o=J(o))&&(c=o.g[c.toString()],o=-1,c&&(o=g(c,h,m,S)),(h=-1<o?c[o]:null)&&B(h))}function B(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Wt])lo(c.i,o);else{var h=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(h,m,o.capture):c.detachEvent?c.detachEvent(U(h),m):c.addListener&&c.removeListener&&c.removeListener(m),(h=J(c))?(lo(h,o),h.h==0&&(h.src=null,c[T]=null)):Xn(o)}}}function U(o){return o in N?N[o]:N[o]="on"+o}function x(o,c){if(o.da)o=!0;else{c=new Yn(c,this);var h=o.listener,m=o.ha||o.src;o.fa&&B(o),o=h.call(m,c)}return o}function J(o){return o=o[T],o instanceof zt?o:null}var H="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(o){return typeof o=="function"?o:(o[H]||(o[H]=function(c){return o.handleEvent(c)}),o[H])}function G(){ut.call(this),this.i=new zt(this),this.M=this,this.F=null}C(G,ut),G.prototype[Wt]=!0,G.prototype.removeEventListener=function(o,c,h,m){$(this,o,c,h,m)};function ne(o,c){var h,m=o.F;if(m)for(h=[];m;m=m.F)h.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new be(c,o);else if(c instanceof be)c.target=c.target||o;else{var S=c;c=new be(m,o),w(c,S)}if(S=!0,h)for(var V=h.length-1;0<=V;V--){var q=c.g=h[V];S=_e(q,m,!0,c)&&S}if(q=c.g=o,S=_e(q,m,!0,c)&&S,S=_e(q,m,!1,c)&&S,h)for(V=0;V<h.length;V++)q=c.g=h[V],S=_e(q,m,!1,c)&&S}G.prototype.N=function(){if(G.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var h=o.g[c],m=0;m<h.length;m++)Xn(h[m]);delete o.g[c],o.h--}}this.F=null},G.prototype.K=function(o,c,h,m){return this.i.add(String(o),c,!1,h,m)},G.prototype.L=function(o,c,h,m){return this.i.add(String(o),c,!0,h,m)};function _e(o,c,h,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var S=!0,V=0;V<c.length;++V){var q=c[V];if(q&&!q.da&&q.capture==h){var Ae=q.listener,Qe=q.ha||q.src;q.fa&&lo(o.i,q),S=Ae.call(Qe,m)!==!1&&S}}return S&&!m.defaultPrevented}function ye(o,c,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function ze(o){o.g=ye(()=>{o.g=null,o.i&&(o.i=!1,ze(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class tt extends ut{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:ze(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(o){ut.call(this),this.h=o,this.g={}}C(nt,ut);var vt=[];function In(o){he(o.g,function(c,h){this.g.hasOwnProperty(h)&&B(c)},o),o.g={}}nt.prototype.N=function(){nt.aa.N.call(this),In(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pr=l.JSON.stringify,Ge=l.JSON.parse,At=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Dr(){}Dr.prototype.h=null;function Ds(o){return o.h||(o.h=o.i())}function yd(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pl(){be.call(this,"d")}C(Pl,be);function Dl(){be.call(this,"c")}C(Dl,be);var Jn={},vd=null;function co(){return vd=vd||new G}Jn.La="serverreachability";function Ed(o){be.call(this,Jn.La,o)}C(Ed,be);function xs(o){const c=co();ne(c,new Ed(c))}Jn.STAT_EVENT="statevent";function Td(o,c){be.call(this,Jn.STAT_EVENT,o),this.stat=c}C(Td,be);function ht(o){const c=co();ne(c,new Td(c,o))}Jn.Ma="timingevent";function wd(o,c){be.call(this,Jn.Ma,o),this.size=c}C(wd,be);function ks(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function Ow(o,c,h,m,S,V){o.info(function(){if(o.g)if(V)for(var q="",Ae=V.split("&"),Qe=0;Qe<Ae.length;Qe++){var ve=Ae[Qe].split("=");if(1<ve.length){var rt=ve[0];ve=ve[1];var st=rt.split("_");q=2<=st.length&&st[1]=="type"?q+(rt+"="+ve+"&"):q+(rt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+m+") [attempt "+S+"]: "+c+`
`+h+`
`+q})}function xw(o,c,h,m,S,V,q){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+S+"]: "+c+`
`+h+`
`+V+" "+q})}function Or(o,c,h,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Mw(o,h)+(m?" "+m:"")})}function kw(o,c){o.info(function(){return"TIMEOUT: "+c})}Ms.prototype.info=function(){};function Mw(o,c){if(!o.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var m=h[o];if(!(2>m.length)){var S=m[1];if(Array.isArray(S)&&!(1>S.length)){var V=S[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<S.length;q++)S[q]=""}}}}return Pr(h)}catch{return c}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Id={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ol;function ho(){}C(ho,Dr),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},Ol=new ho;function An(o,c,h,m){this.j=o,this.i=c,this.l=h,this.R=m||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ad}function Ad(){this.i=null,this.g="",this.h=!1}var bd={},xl={};function kl(o,c,h){o.L=1,o.v=go(an(c)),o.m=h,o.P=!0,Rd(o,null)}function Rd(o,c){o.F=Date.now(),fo(o),o.A=an(o.v);var h=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Bd(h.i,"t",m),o.C=0,h=o.j.J,o.h=new Ad,o.g=sp(o.j,h?c:null,!o.m),0<o.O&&(o.M=new tt(v(o.Y,o,o.g),o.O)),c=o.U,h=o.g,m=o.ca;var S="readystatechange";Array.isArray(S)||(S&&(vt[0]=S.toString()),S=vt);for(var V=0;V<S.length;V++){var q=F(h,S[V],m||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),xs(),Ow(o.i,o.u,o.A,o.l,o.R,o.m)}An.prototype.ca=function(o){o=o.target;const c=this.M;c&&ln(o)==3?c.j():this.Y(o)},An.prototype.Y=function(o){try{if(o==this.g)e:{const st=ln(this.g);var c=this.g.Ba();const Mr=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||zd(this.g)))){this.J||st!=4||c==7||(c==8||0>=Mr?xs(3):xs(2)),Ml(this);var h=this.g.Z();this.X=h;t:if(Sd(this)){var m=zd(this.g);o="";var S=m.length,V=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),Fs(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<S;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(V&&c==S-1)});m.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,xw(this.i,this.u,this.A,this.l,this.R,st,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,Qe=this.g;if((Ae=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Ae)){var ve=Ae;break t}}ve=null}if(h=ve)Or(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fl(this,h);else{this.o=!1,this.s=3,ht(12),Zn(this),Fs(this);break e}}if(this.P){h=!0;let Ot;for(;!this.J&&this.C<q.length;)if(Ot=Fw(this,q),Ot==xl){st==4&&(this.s=4,ht(14),h=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(Ot==bd){this.s=4,ht(15),Or(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else Or(this.i,this.l,Ot,null),Fl(this,Ot);if(Sd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||q.length!=0||this.h.h||(this.s=1,ht(16),h=!1),this.o=this.o&&h,!h)Or(this.i,this.l,q,"[Invalid Chunked Response]"),Zn(this),Fs(this);else if(0<q.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),ql(rt),rt.M=!0,ht(11))}}else Or(this.i,this.l,q,null),Fl(this,q);st==4&&Zn(this),this.o&&!this.J&&(st==4?ep(this.j,this):(this.o=!1,fo(this)))}else eI(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Zn(this),Fs(this)}}}catch{}finally{}};function Sd(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Fw(o,c){var h=o.C,m=c.indexOf(`
`,h);return m==-1?xl:(h=Number(c.substring(h,m)),isNaN(h)?bd:(m+=1,m+h>c.length?xl:(c=c.slice(m,m+h),o.C=m+h,c)))}An.prototype.cancel=function(){this.J=!0,Zn(this)};function fo(o){o.S=Date.now()+o.I,Vd(o,o.I)}function Vd(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ks(v(o.ba,o),c)}function Ml(o){o.B&&(l.clearTimeout(o.B),o.B=null)}An.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(kw(this.i,this.A),this.L!=2&&(xs(),ht(17)),Zn(this),this.s=2,Fs(this)):Vd(this,this.S-o)};function Fs(o){o.j.G==0||o.J||ep(o.j,o)}function Zn(o){Ml(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,In(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Fl(o,c){try{var h=o.j;if(h.G!=0&&(h.g==o||Ll(h.h,o))){if(!o.K&&Ll(h.h,o)&&h.G==3){try{var m=h.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var S=m;if(S[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)wo(h),Eo(h);else break e;$l(h),ht(18)}}else h.za=S[1],0<h.za-h.T&&37500>S[2]&&h.F&&h.v==0&&!h.C&&(h.C=ks(v(h.Za,h),6e3));if(1>=Pd(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else tr(h,11)}else if((o.K||h.g==o)&&wo(h),!K(c))for(S=h.Da.g.parse(c),c=0;c<S.length;c++){let ve=S[c];if(h.T=ve[0],ve=ve[1],h.G==2)if(ve[0]=="c"){h.K=ve[1],h.ia=ve[2];const rt=ve[3];rt!=null&&(h.la=rt,h.j.info("VER="+h.la));const st=ve[4];st!=null&&(h.Aa=st,h.j.info("SVER="+h.Aa));const Mr=ve[5];Mr!=null&&typeof Mr=="number"&&0<Mr&&(m=1.5*Mr,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;const Ot=o.g;if(Ot){const Ao=Ot.g?Ot.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var V=m.h;V.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Ul(V,V.h),V.h=null))}if(m.D){const Hl=Ot.g?Ot.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(m.ya=Hl,Re(m.I,m.D,Hl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var q=o;if(m.qa=rp(m,m.J?m.ia:null,m.W),q.K){Dd(m.h,q);var Ae=q,Qe=m.L;Qe&&(Ae.I=Qe),Ae.B&&(Ml(Ae),fo(Ae)),m.g=q}else Jd(m);0<h.i.length&&To(h)}else ve[0]!="stop"&&ve[0]!="close"||tr(h,7);else h.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?tr(h,7):jl(h):ve[0]!="noop"&&h.l&&h.l.ta(ve),h.v=0)}}xs(4)}catch{}}var Lw=class{constructor(o,c){this.g=o,this.map=c}};function Nd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Pd(o){return o.h?1:o.g?o.g.size:0}function Ll(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Ul(o,c){o.g?o.g.add(c):o.h=c}function Dd(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Nd.prototype.cancel=function(){if(this.i=Od(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Od(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.D);return c}return P(o.i)}function Uw(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],h=o.length,m=0;m<h;m++)c.push(o[m]);return c}c=[],h=0;for(m in o)c[h++]=o[m];return c}function Bw(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var h=0;h<o;h++)c.push(h);return c}c=[],h=0;for(const m in o)c[h++]=m;return c}}}function xd(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var h=Bw(o),m=Uw(o),S=m.length,V=0;V<S;V++)c.call(void 0,m[V],h&&h[V],o)}var kd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jw(o,c){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var m=o[h].indexOf("="),S=null;if(0<=m){var V=o[h].substring(0,m);S=o[h].substring(m+1)}else V=o[h];c(V,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function er(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof er){this.h=o.h,po(this,o.j),this.o=o.o,this.g=o.g,mo(this,o.s),this.l=o.l;var c=o.i,h=new Bs;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Md(this,h),this.m=o.m}else o&&(c=String(o).match(kd))?(this.h=!1,po(this,c[1]||"",!0),this.o=Ls(c[2]||""),this.g=Ls(c[3]||"",!0),mo(this,c[4]),this.l=Ls(c[5]||"",!0),Md(this,c[6]||"",!0),this.m=Ls(c[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}er.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Us(c,Fd,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Us(c,Fd,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Us(h,h.charAt(0)=="/"?Hw:qw,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Us(h,Ww)),o.join("")};function an(o){return new er(o)}function po(o,c,h){o.j=h?Ls(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function mo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Md(o,c,h){c instanceof Bs?(o.i=c,zw(o.i,o.h)):(h||(c=Us(c,Kw)),o.i=new Bs(c,o.h))}function Re(o,c,h){o.i.set(c,h)}function go(o){return Re(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ls(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Us(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,$w),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function $w(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Fd=/[#\/\?@]/g,qw=/[#\?:]/g,Hw=/[#\?]/g,Kw=/[#\?@]/g,Ww=/#/g;function Bs(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function bn(o){o.g||(o.g=new Map,o.h=0,o.i&&jw(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=Bs.prototype,t.add=function(o,c){bn(this),this.i=null,o=xr(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function Ld(o,c){bn(o),c=xr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function Ud(o,c){return bn(o),c=xr(o,c),o.g.has(c)}t.forEach=function(o,c){bn(this),this.g.forEach(function(h,m){h.forEach(function(S){o.call(c,S,m,this)},this)},this)},t.na=function(){bn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let m=0;m<c.length;m++){const S=o[m];for(let V=0;V<S.length;V++)h.push(c[m])}return h},t.V=function(o){bn(this);let c=[];if(typeof o=="string")Ud(this,o)&&(c=c.concat(this.g.get(xr(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)c=c.concat(o[h])}return c},t.set=function(o,c){return bn(this),this.i=null,o=xr(this,o),Ud(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Bd(o,c,h){Ld(o,c),0<h.length&&(o.i=null,o.g.set(xr(o,c),P(h)),o.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var m=c[h];const V=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var S=V;q[m]!==""&&(S+="="+encodeURIComponent(String(q[m]))),o.push(S)}}return this.i=o.join("&")};function xr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function zw(o,c){c&&!o.j&&(bn(o),o.i=null,o.g.forEach(function(h,m){var S=m.toLowerCase();m!=S&&(Ld(this,m),Bd(this,S,h))},o)),o.j=c}function Gw(o,c){const h=new Ms;if(l.Image){const m=new Image;m.onload=I(Rn,h,"TestLoadImage: loaded",!0,c,m),m.onerror=I(Rn,h,"TestLoadImage: error",!1,c,m),m.onabort=I(Rn,h,"TestLoadImage: abort",!1,c,m),m.ontimeout=I(Rn,h,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function Qw(o,c){const h=new Ms,m=new AbortController,S=setTimeout(()=>{m.abort(),Rn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(V=>{clearTimeout(S),V.ok?Rn(h,"TestPingServer: ok",!0,c):Rn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(S),Rn(h,"TestPingServer: error",!1,c)})}function Rn(o,c,h,m,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),m(h)}catch{}}function Yw(){this.g=new At}function Xw(o,c,h){const m=h||"";try{xd(o,function(S,V){let q=S;f(S)&&(q=Pr(S)),c.push(m+V+"="+encodeURIComponent(q))})}catch(S){throw c.push(m+"type="+encodeURIComponent("_badmap")),S}}function _o(o){this.l=o.Ub||null,this.j=o.eb||!1}C(_o,Dr),_o.prototype.g=function(){return new yo(this.l,this.j)},_o.prototype.i=(function(o){return function(){return o}})({});function yo(o,c){G.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(yo,G),t=yo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,$s(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,$s(this)),this.g&&(this.readyState=3,$s(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function jd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?js(this):$s(this),this.readyState==3&&jd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,js(this))},t.Qa=function(o){this.g&&(this.response=o,js(this))},t.ga=function(){this.g&&js(this)};function js(o){o.readyState=4,o.l=null,o.j=null,o.v=null,$s(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function $s(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function $d(o){let c="";return he(o,function(h,m){c+=m,c+=":",c+=h,c+=`\r
`}),c}function Bl(o,c,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=$d(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Re(o,c,h))}function Ce(o){G.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ce,G);var Jw=/^https?$/i,Zw=["POST","PUT"];t=Ce.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ol.g(),this.v=this.o?Ds(this.o):Ds(Ol),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(V){qd(this,V);return}if(o=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var S in m)h.set(S,m[S]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const V of m.keys())h.set(V,m.get(V));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(V=>V.toLowerCase()=="content-type"),S=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Zw,c,void 0))||m||S||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of h)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wd(this),this.u=!0,this.g.send(o),this.u=!1}catch(V){qd(this,V)}};function qd(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Hd(o),vo(o)}function Hd(o){o.A||(o.A=!0,ne(o,"complete"),ne(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ne(this,"complete"),ne(this,"abort"),vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Kd(this):this.bb())},t.bb=function(){Kd(this)};function Kd(o){if(o.h&&typeof a<"u"&&(!o.v[1]||ln(o)!=4||o.Z()!=2)){if(o.u&&ln(o)==4)ye(o.Ea,0,o);else if(ne(o,"readystatechange"),ln(o)==4){o.h=!1;try{const q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var m;if(m=q===0){var S=String(o.D).match(kd)[1]||null;!S&&l.self&&l.self.location&&(S=l.self.location.protocol.slice(0,-1)),m=!Jw.test(S?S.toLowerCase():"")}h=m}if(h)ne(o,"complete"),ne(o,"success");else{o.m=6;try{var V=2<ln(o)?o.g.statusText:""}catch{V=""}o.l=V+" ["+o.Z()+"]",Hd(o)}}finally{vo(o)}}}}function vo(o,c){if(o.g){Wd(o);const h=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ne(o,"ready");try{h.onreadystatechange=m}catch{}}}function Wd(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function ln(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Ge(c)}};function zd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function eI(o){const c={};o=(o.g&&2<=ln(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(K(o[m]))continue;var h=b(o[m]);const S=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const V=c[S]||[];c[S]=V,V.push(h)}A(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function Gd(o){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,o),this.cb=qs("retryDelaySeedMs",1e4,o),this.Wa=qs("forwardChannelMaxRetries",2,o),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Nd(o&&o.concurrentRequestLimit),this.Da=new Yw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Gd.prototype,t.la=8,t.G=1,t.connect=function(o,c,h,m){ht(0),this.W=o,this.H=c||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=rp(this,null,this.W),To(this)};function jl(o){if(Qd(o),o.G==3){var c=o.U++,h=an(o.I);if(Re(h,"SID",o.K),Re(h,"RID",c),Re(h,"TYPE","terminate"),Hs(o,h),c=new An(o,o.j,c),c.L=2,c.v=go(an(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=sp(c.j,null),c.g.ea(c.v)),c.F=Date.now(),fo(c)}np(o)}function Eo(o){o.g&&(ql(o),o.g.cancel(),o.g=null)}function Qd(o){Eo(o),o.u&&(l.clearTimeout(o.u),o.u=null),wo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function To(o){if(!Cd(o.h)&&!o.s){o.s=!0;var c=o.Ga;ce||Nr(),ae||(ce(),ae=!0),pt.add(c,o),o.B=0}}function tI(o,c){return Pd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ks(v(o.Ga,o,c),tp(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const S=new An(this,this.j,o);let V=this.o;if(this.S&&(V?(V=_(V),w(V,this.S)):V=this.S),this.m!==null||this.O||(S.H=V,V=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=Xd(this,S,c),h=an(this.I),Re(h,"RID",o),Re(h,"CVER",22),this.D&&Re(h,"X-HTTP-Session-Id",this.D),Hs(this,h),V&&(this.O?c="headers="+encodeURIComponent(String($d(V)))+"&"+c:this.m&&Bl(h,this.m,V)),Ul(this.h,S),this.Ua&&Re(h,"TYPE","init"),this.P?(Re(h,"$req",c),Re(h,"SID","null"),S.T=!0,kl(S,h,null)):kl(S,h,c),this.G=2}}else this.G==3&&(o?Yd(this,o):this.i.length==0||Cd(this.h)||Yd(this))};function Yd(o,c){var h;c?h=c.l:h=o.U++;const m=an(o.I);Re(m,"SID",o.K),Re(m,"RID",h),Re(m,"AID",o.T),Hs(o,m),o.m&&o.o&&Bl(m,o.m,o.o),h=new An(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Xd(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),Ul(o.h,h),kl(h,m,c)}function Hs(o,c){o.H&&he(o.H,function(h,m){Re(c,m,h)}),o.l&&xd({},function(h,m){Re(c,m,h)})}function Xd(o,c,h){h=Math.min(o.i.length,h);var m=o.l?v(o.l.Na,o.l,o):null;e:{var S=o.i;let V=-1;for(;;){const q=["count="+h];V==-1?0<h?(V=S[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Ae=!0;for(let Qe=0;Qe<h;Qe++){let ve=S[Qe].g;const rt=S[Qe].map;if(ve-=V,0>ve)V=Math.max(0,S[Qe].g-100),Ae=!1;else try{Xw(rt,q,"req"+ve+"_")}catch{m&&m(rt)}}if(Ae){m=q.join("&");break e}}}return o=o.i.splice(0,h),c.D=o,m}function Jd(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;ce||Nr(),ae||(ce(),ae=!0),pt.add(c,o),o.v=0}}function $l(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ks(v(o.Fa,o),tp(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Zd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ks(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),Eo(this),Zd(this))};function ql(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Zd(o){o.g=new An(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=an(o.qa);Re(c,"RID","rpc"),Re(c,"SID",o.K),Re(c,"AID",o.T),Re(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Re(c,"TO",o.ja),Re(c,"TYPE","xmlhttp"),Hs(o,c),o.m&&o.o&&Bl(c,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=go(an(c)),h.m=null,h.P=!0,Rd(h,o)}t.Za=function(){this.C!=null&&(this.C=null,Eo(this),$l(this),ht(19))};function wo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function ep(o,c){var h=null;if(o.g==c){wo(o),ql(o),o.g=null;var m=2}else if(Ll(o.h,c))h=c.D,Dd(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var S=o.B;m=co(),ne(m,new wd(m,h)),To(o)}else Jd(o);else if(S=c.s,S==3||S==0&&0<c.X||!(m==1&&tI(o,c)||m==2&&$l(o)))switch(h&&0<h.length&&(c=o.h,c.i=c.i.concat(h)),S){case 1:tr(o,5);break;case 4:tr(o,10);break;case 3:tr(o,6);break;default:tr(o,2)}}}function tp(o,c){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*c}function tr(o,c){if(o.j.info("Error code "+c),c==2){var h=v(o.fb,o),m=o.Xa;const S=!m;m=new er(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||po(m,"https"),go(m),S?Gw(m.toString(),h):Qw(m.toString(),h)}else ht(2);o.G=0,o.l&&o.l.sa(c),np(o),Qd(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function np(o){if(o.G=0,o.ka=[],o.l){const c=Od(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,P(o.i),o.i.length=0),o.l.ra()}}function rp(o,c,h){var m=h instanceof er?an(h):new er(h);if(m.g!="")c&&(m.g=c+"."+m.g),mo(m,m.s);else{var S=l.location;m=S.protocol,c=c?c+"."+S.hostname:S.hostname,S=+S.port;var V=new er(null);m&&po(V,m),c&&(V.g=c),S&&mo(V,S),h&&(V.l=h),m=V}return h=o.D,c=o.ya,h&&c&&Re(m,h,c),Re(m,"VER",o.la),Hs(o,m),m}function sp(o,c,h){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ce(new _o({eb:h})):new Ce(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ip(){}t=ip.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Io(){}Io.prototype.g=function(o,c){return new Et(o,c)};function Et(o,c){G.call(this),this.g=new Gd(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!K(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!K(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new kr(this)}C(Et,G),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){jl(this.g)},Et.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Pr(o),o=h);c.i.push(new Lw(c.Ya++,o)),c.G==3&&To(c)},Et.prototype.N=function(){this.g.l=null,delete this.j,jl(this.g),delete this.g,Et.aa.N.call(this)};function op(o){Pl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const h in c){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(op,Pl);function ap(){Dl.call(this),this.status=1}C(ap,Dl);function kr(o){this.g=o}C(kr,ip),kr.prototype.ua=function(){ne(this.g,"a")},kr.prototype.ta=function(o){ne(this.g,new op(o))},kr.prototype.sa=function(o){ne(this.g,new ap)},kr.prototype.ra=function(){ne(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,_h=function(){return new Io},gh=function(){return co()},mh=Jn,Pa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,xi=uo,Id.COMPLETE="complete",ph=Id,yd.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",G.prototype.listen=G.prototype.K,us=yd,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,dh=Ce}).apply(typeof Oi<"u"?Oi:typeof self<"u"?self:typeof window<"u"?window:{});const yh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new Xu("@firebase/firestore");function hs(){return jn.logLevel}function W(t,...e){if(jn.logLevel<=me.DEBUG){const n=e.map(Da);jn.debug(`Firestore (${pr}): ${t}`,...n)}}function rn(t,...e){if(jn.logLevel<=me.ERROR){const n=e.map(Da);jn.error(`Firestore (${pr}): ${t}`,...n)}}function mr(t,...e){if(jn.logLevel<=me.WARN){const n=e.map(Da);jn.warn(`Firestore (${pr}): ${t}`,...n)}}function Da(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${pr}) INTERNAL ASSERTION FAILED: `+t;throw rn(e),new Error(e)}function Ie(t,e){t||se()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Xe.UNAUTHENTICATED)))}shutdown(){}}class nv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rv{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new _n;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new _n,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;e.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new _n)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new vh(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Xe(e)}}class sv{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class iv{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new sv(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Xe.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ov{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class av{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new ov(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=lv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function gr(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ke(0,0))}static max(){return new oe(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends fs{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Se(n)}static emptyPath(){return new Se([])}}const cv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qe extends fs{construct(e,n,r){return new qe(e,n,r)}static isValidIdentifier(e){return cv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ee(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new ee(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qe(n)}static emptyPath(){return new qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Se.fromString(e))}static fromName(e){return new te(Se.fromString(e).popFirst(5))}static empty(){return new te(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Se(e.slice()))}}function uv(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new yn(s,te.empty(),e)}function hv(t){return new yn(t.readTime,t.key,-1)}class yn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yn(oe.min(),te.empty(),-1)}static max(){return new yn(oe.max(),te.empty(),-1)}}function fv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==dv)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,r)=>{n(e)}))}static reject(e){return new M(((n,r)=>{r(e)}))}static waitFor(e){return new M(((n,r)=>{let s=0,i=0,a=!1;e.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new M(((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(e[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(e,n){return new M(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function mv(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ps(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Oa.oe=-1;function ki(t){return t==null}function Mi(t){return t===0&&1/t==-1/0}function gv(t){return typeof t=="number"&&Number.isInteger(t)&&!Mi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||He.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,He.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fi(this.root,e,this.comparator,!0)}}class Fi{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class He{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??He.RED,this.left=s??He.EMPTY,this.right=i??He.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new He(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return He.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return He.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,He.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,He.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}He.EMPTY=null,He.RED=!0,He.BLACK=!1,He.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new He(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ih(this.data.getIterator())}getIteratorFrom(e){return new Ih(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ke)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ke(this.comparator);return n.data=e,n}}class Ih{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.fields=e,e.sort(qe.comparator)}static empty(){return new Dt([])}unionWith(e){let n=new Ke(qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Dt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gr(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ah("Invalid base64 string: "+i):i}})(e);return new We(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new We(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}We.EMPTY_BYTE_STRING=new We("");const _v=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vn(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=_v.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function $n(t){return typeof t=="string"?We.fromBase64String(t):We.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ka(t){const e=t.mapValue.fields.__previous_value__;return xa(e)?ka(e):e}function ms(t){const e=vn(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,n,r,s,i,a,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}}class gs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li={mapValue:{}};function qn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xa(t)?4:Ev(t)?9007199254740991:vv(t)?10:11:se()}function $t(t,e){if(t===e)return!0;const n=qn(t);if(n!==qn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ms(t).isEqual(ms(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=vn(s.timestampValue),l=vn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return $n(s.bytesValue).isEqual($n(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=De(s.doubleValue),l=De(i.doubleValue);return a===l?Mi(a)===Mi(l):isNaN(a)&&isNaN(l)}return!1})(t,e);case 9:return gr(t.arrayValue.values||[],e.arrayValue.values||[],$t);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Th(a)!==Th(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!$t(a[u],l[u])))return!1;return!0})(t,e);default:return se()}}function _s(t,e){return(t.values||[]).find((n=>$t(n,e)))!==void 0}function yr(t,e){if(t===e)return 0;const n=qn(t),r=qn(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return(function(i,a){const l=De(i.integerValue||i.doubleValue),u=De(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(t,e);case 3:return bh(t.timestampValue,e.timestampValue);case 4:return bh(ms(t),ms(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return(function(i,a){const l=$n(i),u=$n(a);return l.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ge(l[f],u[f]);if(d!==0)return d}return ge(l.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,a){const l=ge(De(i.latitude),De(a.latitude));return l!==0?l:ge(De(i.longitude),De(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Rh(t.arrayValue,e.arrayValue);case 10:return(function(i,a){var l,u,f,d;const p=i.fields||{},v=a.fields||{},I=(l=p.value)===null||l===void 0?void 0:l.arrayValue,C=(u=v.value)===null||u===void 0?void 0:u.arrayValue,P=ge(((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0,((d=C==null?void 0:C.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:Rh(I,C)})(t.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Li.mapValue&&a===Li.mapValue)return 0;if(i===Li.mapValue)return 1;if(a===Li.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const v=ge(u[p],d[p]);if(v!==0)return v;const I=yr(l[u[p]],f[d[p]]);if(I!==0)return I}return ge(u.length,d.length)})(t.mapValue,e.mapValue);default:throw se()}}function bh(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=vn(t),r=vn(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function Rh(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=yr(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function vr(t){return Ma(t)}function Ma(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=vn(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return $n(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ma(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ma(n.fields[a])}`;return s+"}"})(t.mapValue):se()}function Fa(t){return!!t&&"integerValue"in t}function La(t){return!!t&&"arrayValue"in t}function Sh(t){return!!t&&"nullValue"in t}function Vh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ui(t){return!!t&&"mapValue"in t}function vv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ys(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _r(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ys(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ys(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Ev(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.value=e}static empty(){return new Tt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ui(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ys(n)}setAll(e){let n=qe.emptyPath(),r={},s=[];e.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ys(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ui(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return $t(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ui(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_r(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new Tt(ys(this.value))}}function Nh(t){const e=[];return _r(t.fields,((n,r)=>{const s=new qe([n]);if(Ui(r)){const i=Nh(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new Dt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Je(e,0,oe.min(),oe.min(),oe.min(),Tt.empty(),0)}static newFoundDocument(e,n,r,s){return new Je(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new Je(e,2,n,oe.min(),oe.min(),Tt.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,oe.min(),oe.min(),Tt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.position=e,this.inclusive=n}}function Ch(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=yr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ph(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!$t(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n="asc"){this.field=e,this.dir=n}}function Tv(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{}class Ue extends Dh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Iv(e,n,r):n==="array-contains"?new Rv(e,r):n==="in"?new Sv(e,r):n==="not-in"?new Vv(e,r):n==="array-contains-any"?new Nv(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Av(e,r):new bv(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yr(n,this.value)):n!==null&&qn(this.value)===qn(n)&&this.matchesComparison(yr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qt extends Dh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qt(e,n)}matches(e){return Oh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Oh(t){return t.op==="and"}function xh(t){return wv(t)&&Oh(t)}function wv(t){for(const e of t.filters)if(e instanceof qt)return!1;return!0}function Ua(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+vr(t.value);if(xh(t))return t.filters.map((e=>Ua(e))).join(",");{const e=t.filters.map((n=>Ua(n))).join(",");return`${t.op}(${e})`}}function kh(t,e){return t instanceof Ue?(function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&$t(r.value,s.value)})(t,e):t instanceof qt?(function(r,s){return s instanceof qt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&kh(a,s.filters[l])),!0):!1})(t,e):void se()}function Mh(t){return t instanceof Ue?(function(n){return`${n.field.canonicalString()} ${n.op} ${vr(n.value)}`})(t):t instanceof qt?(function(n){return n.op.toString()+" {"+n.getFilters().map(Mh).join(" ,")+"}"})(t):"Filter"}class Iv extends Ue{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class Av extends Ue{constructor(e,n){super(e,"in",n),this.keys=Fh("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class bv extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=Fh("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Fh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>te.fromName(r.referenceValue)))}class Rv extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return La(n)&&_s(n.arrayValue,this.value)}}class Sv extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_s(this.value.arrayValue,n)}}class Vv extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(_s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_s(this.value.arrayValue,n)}}class Nv extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!La(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>_s(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function Lh(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Cv(t,e,n,r,s,i,a)}function Ba(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Ua(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ki(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>vr(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>vr(r))).join(",")),e.ue=n}return e.ue}function ja(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Tv(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!kh(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ph(t.startAt,e.startAt)&&Ph(t.endAt,e.endAt)}function $a(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Pv(t,e,n,r,s,i,a,l){return new $i(t,e,n,r,s,i,a,l)}function qa(t){return new $i(t)}function Uh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dv(t){return t.collectionGroup!==null}function vs(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ke(qe.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ji(i,r))})),n.has(qe.keyField().canonicalString())||e.ce.push(new ji(qe.keyField(),r))}return e.ce}function Ht(t){const e=ie(t);return e.le||(e.le=Ov(e,vs(t))),e.le}function Ov(t,e){if(t.limitType==="F")return Lh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new ji(s.field,i)}));const n=t.endAt?new Bi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bi(t.startAt.position,t.startAt.inclusive):null;return Lh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ha(t,e,n){return new $i(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qi(t,e){return ja(Ht(t),Ht(e))&&t.limitType===e.limitType}function Bh(t){return`${Ba(Ht(t))}|lt:${t.limitType}`}function Er(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Mh(s))).join(", ")}]`),ki(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>vr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>vr(s))).join(",")),`Target(${r})`})(Ht(t))}; limitType=${t.limitType})`}function Hi(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of vs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=Ch(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,vs(r),s)||r.endAt&&!(function(a,l,u){const f=Ch(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,vs(r),s))})(t,e)}function xv(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function jh(t){return(e,n)=>{let r=!1;for(const s of vs(t)){const i=kv(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function kv(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?yr(u,f):se()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_r(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return wh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv=new Ne(te.comparator);function sn(){return Mv}const $h=new Ne(te.comparator);function Es(...t){let e=$h;for(const n of t)e=e.insert(n.key,n);return e}function qh(t){let e=$h;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Hn(){return Ts()}function Hh(){return Ts()}function Ts(){return new Tr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Fv=new Ne(te.comparator),Lv=new Ke(te.comparator);function ue(...t){let e=Lv;for(const n of t)e=e.add(n);return e}const Uv=new Ke(ge);function Bv(){return Uv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mi(e)?"-0":e}}function Kh(t){return{integerValue:""+t}}function jv(t,e){return gv(e)?Kh(e):Ka(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this._=void 0}}function $v(t,e,n){return t instanceof Wi?(function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xa(i)&&(i=ka(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}})(n,e):t instanceof ws?zh(t,e):t instanceof Is?Gh(t,e):(function(s,i){const a=Wh(s,i),l=Qh(a)+Qh(s.Pe);return Fa(a)&&Fa(s.Pe)?Kh(l):Ka(s.serializer,l)})(t,e)}function qv(t,e,n){return t instanceof ws?zh(t,e):t instanceof Is?Gh(t,e):n}function Wh(t,e){return t instanceof zi?(function(r){return Fa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Wi extends Ki{}class ws extends Ki{constructor(e){super(),this.elements=e}}function zh(t,e){const n=Yh(e);for(const r of t.elements)n.some((s=>$t(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Is extends Ki{constructor(e){super(),this.elements=e}}function Gh(t,e){let n=Yh(e);for(const r of t.elements)n=n.filter((s=>!$t(s,r)));return{arrayValue:{values:n}}}class zi extends Ki{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Qh(t){return De(t.integerValue||t.doubleValue)}function Yh(t){return La(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Hv(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ws&&s instanceof ws||r instanceof Is&&s instanceof Is?gr(r.elements,s.elements,$t):r instanceof zi&&s instanceof zi?$t(r.Pe,s.Pe):r instanceof Wi&&s instanceof Wi})(t.transform,e.transform)}class Kv{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qi{}function Xh(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new nf(t.key,on.none()):new bs(t.key,t.data,on.none());{const n=t.data,r=Tt.empty();let s=new Ke(qe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Kn(t.key,r,new Dt(s.toArray()),on.none())}}function Wv(t,e,n){t instanceof bs?(function(s,i,a){const l=s.value.clone(),u=ef(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,n):t instanceof Kn?(function(s,i,a){if(!Gi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=ef(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Zh(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function As(t,e,n,r){return t instanceof bs?(function(i,a,l,u){if(!Gi(i.precondition,a))return l;const f=i.value.clone(),d=tf(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Kn?(function(i,a,l,u){if(!Gi(i.precondition,a))return l;const f=tf(i.fieldTransforms,u,a),d=a.data;return d.setAll(Zh(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,a,l){return Gi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(t,e,n)}function zv(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Wh(r.transform,s||null);i!=null&&(n===null&&(n=Tt.empty()),n.set(r.field,i))}return n||null}function Jh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gr(r,s,((i,a)=>Hv(i,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bs extends Qi{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Kn extends Qi{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Zh(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function ef(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,qv(a,l,n[s]))}return r}function tf(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,$v(i,a,e))}return r}class nf extends Qi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Gv extends Qi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Wv(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=As(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=As(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Hh();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Xh(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(oe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ue())}isEqual(e){return this.batchId===e.batchId&&gr(this.mutations,e.mutations,((n,r)=>Jh(n,r)))&&gr(this.baseMutations,e.baseMutations,((n,r)=>Jh(n,r)))}}class Wa{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=(function(){return Fv})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Wa(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,de;function Jv(t){switch(t){default:return se();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function rf(t){if(t===void 0)return rn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Me.OK:return L.OK;case Me.CANCELLED:return L.CANCELLED;case Me.UNKNOWN:return L.UNKNOWN;case Me.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Me.INTERNAL:return L.INTERNAL;case Me.UNAVAILABLE:return L.UNAVAILABLE;case Me.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Me.NOT_FOUND:return L.NOT_FOUND;case Me.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Me.ABORTED:return L.ABORTED;case Me.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Me.DATA_LOSS:return L.DATA_LOSS;default:return se()}}(de=Me||(Me={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=new Bn([4294967295,4294967295],0);function sf(t){const e=Zv().encode(t),n=new fh;return n.update(e),new Uint8Array(n.digest())}function of(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Bn([n,r],0),new Bn([s,i],0)]}class za{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rs(`Invalid padding: ${n}`);if(r<0)throw new Rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bn.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Bn.fromNumber(r)));return s.compare(eE)===1&&(s=new Bn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sf(e),[r,s]=of(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new za(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.Ie===0)return;const n=sf(e),[r,s]=of(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ss.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yi(oe.min(),s,new Ne(ge),sn(),ue())}}class Ss{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ss(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class af{constructor(e,n){this.targetId=e,this.me=n}}class lf{constructor(e,n,r=We.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class cf{constructor(){this.fe=0,this.ge=hf(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se()}})),new Ss(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=hf()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tE{constructor(e){this.Le=e,this.Be=new Map,this.ke=sn(),this.qe=uf(),this.Qe=new Ne(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if($a(i))if(r===0){const a=new te(i.path);this.Ue(n,a,Je.newNoDocument(a,oe.min()))}else Ie(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=$n(r).toUint8Array()}catch(u){if(u instanceof Ah)return mr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new za(a,s,i)}catch(u){return mr(u instanceof Rs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((i,a)=>{const l=this.Je(a);if(l){if(i.current&&$a(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Je.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}}));let r=ue();this.qe.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.ke.forEach(((i,a)=>a.setReadTime(e)));const s=new Yi(e,n,this.Qe,this.ke,r);return this.ke=sn(),this.qe=uf(),this.Qe=new Ne(ge),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new cf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ke(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cf),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function uf(){return new Ne(te.comparator)}function hf(){return new Ne(te.comparator)}const nE={asc:"ASCENDING",desc:"DESCENDING"},rE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sE={and:"AND",or:"OR"};class iE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ga(t,e){return t.useProto3Json||ki(e)?e:{value:e}}function Ji(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ff(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oE(t,e){return Ji(t,e.toTimestamp())}function Kt(t){return Ie(!!t),oe.fromTimestamp((function(n){const r=vn(n);return new ke(r.seconds,r.nanos)})(t))}function Qa(t,e){return Ya(t,e).canonicalString()}function Ya(t,e){const n=(function(s){return new Se(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function df(t){const e=Se.fromString(t);return Ie(vf(e)),e}function Xa(t,e){return Qa(t.databaseId,e.path)}function Ja(t,e){const n=df(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(mf(n))}function pf(t,e){return Qa(t.databaseId,e)}function aE(t){const e=df(t);return e.length===4?Se.emptyPath():mf(e)}function Za(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function mf(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function gf(t,e,n){return{name:Xa(t,e),fields:n.value.mapValue.fields}}function lE(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:se()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(Ie(d===void 0||typeof d=="string"),We.fromBase64String(d||"")):(Ie(d===void 0||d instanceof Buffer||d instanceof Uint8Array),We.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?L.UNKNOWN:rf(f.code);return new ee(d,f.message||"")})(a);n=new lf(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ja(t,r.document.name),i=Kt(r.document.updateTime),a=r.document.createTime?Kt(r.document.createTime):oe.min(),l=new Tt({mapValue:{fields:r.document.fields}}),u=Je.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Xi(f,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ja(t,r.document),i=r.readTime?Kt(r.readTime):oe.min(),a=Je.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Xi([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ja(t,r.document),i=r.removedTargetIds||[];n=new Xi([],i,s,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Xv(s,i),l=r.targetId;n=new af(l,a)}}return n}function cE(t,e){let n;if(e instanceof bs)n={update:gf(t,e.key,e.value)};else if(e instanceof nf)n={delete:Xa(t,e.key)};else if(e instanceof Kn)n={update:gf(t,e.key,e.data),updateMask:yE(e.fieldMask)};else{if(!(e instanceof Gv))return se();n={verify:Xa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ws)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Is)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof zi)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw se()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:oE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()})(t,e.precondition)),n}function uE(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map((n=>(function(s,i){let a=s.updateTime?Kt(s.updateTime):Kt(i);return a.isEqual(oe.min())&&(a=Kt(i)),new Kv(a,s.transformResults||[])})(n,e)))):[]}function hE(t,e){return{documents:[pf(t,e.path)]}}function fE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pf(t,s);const i=(function(f){if(f.length!==0)return yf(qt.create(f,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:wr(v.field),direction:mE(v.dir)}})(d)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ga(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:n,parent:s}}function dE(t){let e=aE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const v=_f(p);return v instanceof qt&&xh(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((v=>(function(C){return new ji(Ir(C.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let v;return v=typeof p=="object"?p.value:p,ki(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(p){const v=!!p.before,I=p.values||[];return new Bi(I,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(p){const v=!p.before,I=p.values||[];return new Bi(I,v)})(n.endAt)),Pv(e,s,a,i,l,"F",u,f)}function pE(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _f(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ir(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ir(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ir(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ir(n.unaryFilter.field);return Ue.create(a,"!=",{nullValue:"NULL_VALUE"});default:return se()}})(t):t.fieldFilter!==void 0?(function(n){return Ue.create(Ir(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return qt.create(n.compositeFilter.filters.map((r=>_f(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se()}})(n.compositeFilter.op))})(t):se()}function mE(t){return nE[t]}function gE(t){return rE[t]}function _E(t){return sE[t]}function wr(t){return{fieldPath:t.canonicalString()}}function Ir(t){return qe.fromServerFormat(t.fieldPath)}function yf(t){return t instanceof Ue?(function(n){if(n.op==="=="){if(Vh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NAN"}};if(Sh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NAN"}};if(Sh(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(n.field),op:gE(n.op),value:n.value}}})(t):t instanceof qt?(function(n){const r=n.getFilters().map((s=>yf(s)));return r.length===1?r[0]:{compositeFilter:{op:_E(n.op),filters:r}}})(t):se()}function yE(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function vf(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e,n,r,s,i=oe.min(),a=oe.min(),l=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new En(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new En(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.ct=e}}function EE(t){const e=dE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ha(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(){this.un=new wE}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(yn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(yn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class wE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ke(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ke(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ar(0)}static kn(){return new Ar(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.changes=new Tr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&As(r.mutation,s,Dt.empty(),ke.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ue()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ue()){const s=Hn();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let a=Es();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Hn();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ue())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(e,n,r,s){let i=sn();const a=Ts(),l=(function(){return Ts()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof Kn)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),As(d.mutation,f,d.mutation.getFieldMask(),ke.now())):a.set(f.key,Dt.empty())})),this.recalculateAndSaveOverlays(e,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>{var p;return l.set(f,new AE(d,(p=a.get(f))!==null&&p!==void 0?p:null))})),l)))}recalculateAndSaveOverlays(e,n){const r=Ts();let s=new Ne(((a,l)=>a-l)),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||Dt.empty();d=l.applyToLocalView(f,d),r.set(u,d);const p=(s.get(l.batchId)||ue()).add(u);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,p=Hh();d.forEach((v=>{if(!i.has(v)){const I=Xh(n.get(v),r.get(v));I!==null&&p.set(v,I),i=i.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,p))}return M.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Hn());let l=-1,u=i;return a.next((f=>M.forEach(f,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next((v=>{u=u.insert(d,v)}))))).next((()=>this.populateOverlays(e,f,i))).next((()=>this.computeViews(e,u,f,ue()))).next((d=>({batchId:l,changes:qh(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next((r=>{let s=Es();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Es();return this.indexManager.getCollectionParents(e,i).next((l=>M.forEach(l,(u=>{const f=(function(p,v){return new $i(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((d=>{d.forEach(((p,v)=>{a=a.insert(p,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,Je.newInvalidDocument(d)))}));let l=Es();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&As(d.mutation,f,Dt.empty(),ke.now()),Hi(n,f)&&(l=l.insert(u,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Kt(s.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:EE(s.bundledQuery),readTime:Kt(s.readTime)}})(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.overlays=new Ne(te.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hn();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.ht(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Hn(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Hn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Hn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return M.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Yv(n,r));let i=this.Ir.get(n);i===void 0&&(i=ue(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.Tr=new Ke(Be.Er),this.dr=new Ke(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new te(new Se([])),r=new Be(n,e),s=new Be(n,e+1),i=[];return this.dr.forEachInRange([r,s],(a=>{this.Vr(a),i.push(a.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Se([])),r=new Be(n,e),s=new Be(n,e+1);let i=ue();return this.dr.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ke(Be.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Qv(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new Be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],(a=>{const l=this.Dr(a.wr);i.push(l)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ke(ge);return n.forEach((s=>{const i=new Be(s,0),a=new Be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],(l=>{r=r.add(l.wr)}))})),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const a=new Be(new te(i),0);let l=new Ke(ge);return this.br.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.wr)),!0)}),a),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,(s=>{const i=new Be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new Be(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e){this.Mr=e,this.docs=(function(){return new Ne(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=sn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Je.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=sn();const a=n.path,l=new te(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||fv(hv(d),r)<=0||(s.has(d.key)||Hi(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se()}Or(e,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new PE(this)}getSize(e){return M.resolve(this.size)}}class PE extends IE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e){this.persistence=e,this.Nr=new Tr((n=>Ba(n)),ja),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new el,this.targetCount=0,this.kr=Ar.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ar(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Oa(0),this.Kr=!1,this.Kr=!0,this.$r=new VE,this.referenceDelegate=e(this),this.Ur=new DE(this),this.indexManager=new TE,this.remoteDocumentCache=(function(s){return new CE(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new vE(n),this.Gr=new RE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new SE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new NE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new xE(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((i=>this.referenceDelegate.jr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Hr(e,n){return M.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class xE extends pv{constructor(e){super(),this.currentSequenceNumber=e}}class tl{constructor(e){this.persistence=e,this.Jr=new el,this.Yr=null}static Zr(e){return new tl(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.Xr.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,(r=>{const s=te.fromPath(r);return this.ei(e,s).next((i=>{i||n.removeEntry(s,oe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nl(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return F_()?8:mv(k_())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.Zi(e,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new kE;return this.Xi(e,n,a).next((l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)}))})).next((()=>i.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(hs()<=me.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Er(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(hs()<=me.DEBUG&&W("QueryEngine","Query:",Er(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(hs()<=me.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Er(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ht(n))):M.resolve())}Yi(e,n){if(Uh(n))return M.resolve(null);let r=Ht(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Ha(n,null,"F"),r=Ht(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=ue(...i);return this.Ji.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((u=>{const f=this.ts(n,l);return this.ns(n,f,a,u.readTime)?this.Yi(e,Ha(n,null,"F")):this.rs(e,f,n,u)}))))})))))}Zi(e,n,r,s){return Uh(n)||s.isEqual(oe.min())?M.resolve(null):this.Ji.getDocuments(e,r).next((i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?M.resolve(null):(hs()<=me.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Er(n)),this.rs(e,a,n,uv(s,-1)).next((l=>l)))}))}ts(e,n){let r=new Ke(jh(e));return n.forEach(((s,i)=>{Hi(e,i)&&(r=r.add(i))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return hs()<=me.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Er(n)),this.Ji.getDocumentsMatchingQuery(e,n,yn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ne(ge),this._s=new Tr((i=>Ba(i)),ja),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function LE(t,e,n,r){return new FE(t,e,n,r)}async function Ef(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=ue();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({hs:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function UE(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const p=f.batch,v=p.keys();let I=M.resolve();return v.forEach((C=>{I=I.next((()=>d.getEntry(u,C))).next((P=>{const k=f.docVersions.get(C);Ie(k!==null),P.version.compareTo(k)<0&&(p.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),d.addEntry(P)))}))})),I.next((()=>l.mutationQueue.removeMutationBatch(u,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=ue();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function Tf(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function BE(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach(((d,p)=>{const v=s.get(p);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p))));let I=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(We.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(d.resumeToken,r)),s=s.insert(p,I),(function(P,k,X){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(v,I,d)&&l.push(n.Ur.updateTargetData(i,I))}));let u=sn(),f=ue();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(jE(i,a,e.documentUpdates).next((d=>{u=d.Ps,f=d.Is}))),!r.isEqual(oe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next((p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return M.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.os=s,i)))}function jE(t,e,n){let r=ue(),s=ue();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let a=sn();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{Ps:a,Is:s}}))}function $E(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function qE(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next((a=>(s=new En(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function rl(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!ps(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function wf(t,e,n){const r=ie(t);let s=oe.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const p=ie(u),v=p._s.get(d);return v!==void 0?M.resolve(p.os.get(v)):p.Ur.getTargetData(f,d)})(r,a,Ht(e)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:oe.min(),n?i:ue()))).next((l=>(HE(r,xv(e),l),{documents:l,Ts:i})))))}function HE(t,e,n){let r=t.us.get(e)||oe.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.us.set(e,r)}class If{constructor(){this.activeTargetIds=Bv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KE{constructor(){this.so=new If,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new If,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi=null;function sl(){return Zi===null?Zi=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zi++,"0x"+Zi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ze="WebChannelConnection";class QE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=sl(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,i,a),this.No(n,u,f,s).then((d=>(W("RestConnection",`Received RPC '${n}' ${l}: `,d),d)),(d=>{throw mr("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",u,"request:",s),d}))}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pr})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,a)=>n[a]=i)),s&&s.headers.forEach(((i,a)=>n[a]=i))}xo(n,r){const s=zE[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=sl();return new Promise(((a,l)=>{const u=new dh;u.setWithCredentials(!0),u.listenOnce(ph.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case xi.NO_ERROR:const d=u.getResponseJson();W(Ze,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case xi.TIMEOUT:W(Ze,`RPC '${e}' ${i} timed out`),l(new ee(L.DEADLINE_EXCEEDED,"Request time out"));break;case xi.HTTP_ERROR:const p=u.getStatus();if(W(Ze,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const C=(function(k){const X=k.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(X)>=0?X:L.UNKNOWN})(I.status);l(new ee(C,I.message))}else l(new ee(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ee(L.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{W(Ze,`RPC '${e}' ${i} completed.`)}}));const f=JSON.stringify(s);W(Ze,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",f,r,15)}))}Bo(e,n,r){const s=sl(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=_h(),l=gh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");W(Ze,`Creating RPC '${e}' stream ${s}: ${d}`,u);const p=a.createWebChannel(d,u);let v=!1,I=!1;const C=new GE({Io:k=>{I?W(Ze,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(v||(W(Ze,`Opening RPC '${e}' stream ${s} transport.`),p.open(),v=!0),W(Ze,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),P=(k,X,K)=>{k.listen(X,(z=>{try{K(z)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return P(p,us.EventType.OPEN,(()=>{I||(W(Ze,`RPC '${e}' stream ${s} transport opened.`),C.yo())})),P(p,us.EventType.CLOSE,(()=>{I||(I=!0,W(Ze,`RPC '${e}' stream ${s} transport closed`),C.So())})),P(p,us.EventType.ERROR,(k=>{I||(I=!0,mr(Ze,`RPC '${e}' stream ${s} transport errored:`,k),C.So(new ee(L.UNAVAILABLE,"The operation could not be completed")))})),P(p,us.EventType.MESSAGE,(k=>{var X;if(!I){const K=k.data[0];Ie(!!K);const z=K,pe=z.error||((X=z[0])===null||X===void 0?void 0:X.error);if(pe){W(Ze,`RPC '${e}' stream ${s} received error:`,pe);const Q=pe.status;let he=(function(y){const w=Me[y];if(w!==void 0)return rf(w)})(Q),A=pe.message;he===void 0&&(he=L.INTERNAL,A="Unknown error status: "+Q+" with message "+pe.message),I=!0,C.So(new ee(he,A)),p.close()}else W(Ze,`RPC '${e}' stream ${s} received:`,K),C.bo(K)}})),P(l,mh.STAT_EVENT,(k=>{k.stat===Pa.PROXY?W(Ze,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Pa.NOPROXY&&W(Ze,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.wo()}),0),C}}function il(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){return new iE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bf(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(rn(n.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new ee(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class YE extends Rf{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=lE(this.serializer,e),r=(function(i){if(!("targetChange"in i))return oe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?oe.min():a.readTime?Kt(a.readTime):oe.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Za(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=$a(u)?{documents:hE(i,u)}:{query:fE(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=ff(i,a.resumeToken);const f=Ga(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(oe.min())>0){l.readTime=Ji(i,a.snapshotVersion.toTimestamp());const f=Ga(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const r=pE(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Za(this.serializer),n.removeTarget=e,this.a_(n)}}class XE extends Rf{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=uE(e.writeResults,e.commitTime),r=Kt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Za(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>cE(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ee(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Mo(e,Ya(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(L.UNKNOWN,i.toString())}))}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Lo(e,Ya(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(L.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class ZE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((a=>{r.enqueueAndForget((async()=>{Wn(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const f=ie(u);f.L_.add(4),await Vs(f),f.q_.set("Unknown"),f.L_.delete(4),await to(f)})(this))}))})),this.q_=new ZE(r,s)}}async function to(t){if(Wn(t))for(const e of t.B_)await e(!0)}async function Vs(t){for(const e of t.B_)await e(!1)}function Sf(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cl(n)?ll(n):br(n).r_()&&al(n,e))}function ol(t,e){const n=ie(t),r=br(n);n.N_.delete(e),r.r_()&&Vf(n,e),n.N_.size===0&&(r.r_()?r.o_():Wn(n)&&n.q_.set("Unknown"))}function al(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}br(t).A_(e)}function Vf(t,e){t.Q_.xe(e),br(t).R_(e)}function ll(t){t.Q_=new tE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),br(t).start(),t.q_.v_()}function cl(t){return Wn(t)&&!br(t).n_()&&t.N_.size>0}function Wn(t){return ie(t).L_.size===0}function Nf(t){t.Q_=void 0}async function tT(t){t.q_.set("Online")}async function nT(t){t.N_.forEach(((e,n)=>{al(t,e)}))}async function rT(t,e){Nf(t),cl(t)?(t.q_.M_(e),ll(t)):t.q_.set("Unknown")}async function sT(t,e,n){if(t.q_.set("Online"),e instanceof lf&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))})(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await no(t,r)}else if(e instanceof Xi?t.Q_.Ke(e):e instanceof af?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await Tf(t.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.N_.get(f);d&&i.N_.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.N_.get(u);if(!d)return;i.N_.set(u,d.withResumeToken(We.EMPTY_BYTE_STRING,d.snapshotVersion)),Vf(i,u);const p=new En(d.target,u,f,d.sequenceNumber);al(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await no(t,r)}}async function no(t,e,n){if(!ps(e))throw e;t.L_.add(1),await Vs(t),t.q_.set("Offline"),n||(n=()=>Tf(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await to(t)}))}function Cf(t,e){return e().catch((n=>no(t,n,e)))}async function ro(t){const e=ie(t),n=Tn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;iT(e);)try{const s=await $E(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,oT(e,s)}catch(s){await no(e,s)}Pf(e)&&Df(e)}function iT(t){return Wn(t)&&t.O_.length<10}function oT(t,e){t.O_.push(e);const n=Tn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Pf(t){return Wn(t)&&!Tn(t).n_()&&t.O_.length>0}function Df(t){Tn(t).start()}async function aT(t){Tn(t).p_()}async function lT(t){const e=Tn(t);for(const n of t.O_)e.m_(n.mutations)}async function cT(t,e,n){const r=t.O_.shift(),s=Wa.from(r,e,n);await Cf(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await ro(t)}async function uT(t,e){e&&Tn(t).V_&&await(async function(r,s){if((function(a){return Jv(a)&&a!==L.ABORTED})(s.code)){const i=r.O_.shift();Tn(r).s_(),await Cf(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await ro(r)}})(t,e),Pf(t)&&Df(t)}async function Of(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Wn(n);n.L_.add(3),await Vs(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await to(n)}async function hT(t,e){const n=ie(t);e?(n.L_.delete(2),await to(n)):e||(n.L_.add(2),await Vs(n),n.q_.set("Unknown"))}function br(t){return t.K_||(t.K_=(function(n,r,s){const i=ie(n);return i.w_(),new YE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:tT.bind(null,t),Ro:nT.bind(null,t),mo:rT.bind(null,t),d_:sT.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),cl(t)?ll(t):t.q_.set("Unknown")):(await t.K_.stop(),Nf(t))}))),t.K_}function Tn(t){return t.U_||(t.U_=(function(n,r,s){const i=ie(n);return i.w_(),new XE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:aT.bind(null,t),mo:uT.bind(null,t),f_:lT.bind(null,t),g_:cT.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await ro(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new _n,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new ul(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hl(t,e){if(rn("AsyncQueue",`${e}: ${t}`),ps(t))return new ee(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Es(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Rr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this.W_=new Ne(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Sr{constructor(e,n,r,s,i,a,l,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Sr(e,n,Rr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class dT{constructor(){this.queries=kf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=kf(),i.forEach(((a,l)=>{for(const u of l.j_)u.onError(r)}))})(this,new ee(L.ABORTED,"Firestore shutting down"))}}function kf(){return new Tr((t=>Bh(t)),qi)}async function pT(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new fT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=hl(a,`Initialization of query '${Er(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&fl(n)}async function mT(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function gT(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&fl(n)}function _T(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function fl(t){t.Y_.forEach((e=>{e.next()}))}var dl,Mf;(Mf=dl||(dl={})).ea="default",Mf.Cache="cache";class yT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Sr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Sr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e){this.key=e}}class Lf{constructor(e){this.key=e}}class vT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=jh(e),this.Ra=new Rr(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new xf,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const v=s.get(d),I=Hi(this.query,p)?p:null,C=!!v&&this.mutatedKeys.has(v.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let k=!1;v&&I?v.data.isEqual(I.data)?C!==P&&(r.track({type:3,doc:I}),k=!0):this.ga(v,I)||(r.track({type:2,doc:I}),k=!0,(u&&this.Aa(I,u)>0||f&&this.Aa(I,f)<0)&&(l=!0)):!v&&I?(r.track({type:0,doc:I}),k=!0):v&&!I&&(r.track({type:1,doc:v}),k=!0,(u||f)&&(l=!0)),k&&(I?(a=a.add(I),i=P?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((d,p)=>(function(I,C){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return P(I)-P(C)})(d.type,p.type)||this.Aa(d.doc,p.doc))),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,f=u!==this.Ea;return this.Ea=u,a.length!==0||f?{snapshot:new Sr(this.query,e.Ra,i,a,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new Lf(r))})),this.da.forEach((r=>{e.has(r)||n.push(new Ff(r))})),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Sr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ET{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TT{constructor(e){this.key=e,this.va=!1}}class wT{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Tr((l=>Bh(l)),qi),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(te.comparator),this.Na=new Map,this.La=new el,this.Ba={},this.ka=new Map,this.qa=Ar.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function IT(t,e,n=!0){const r=Wf(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Uf(r,e,n,!0),s}async function AT(t,e){const n=Wf(t);await Uf(n,e,!0,!1)}async function Uf(t,e,n,r){const s=await qE(t.localStore,Ht(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await bT(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Sf(t.remoteStore,s),l}async function bT(t,e,n,r,s){t.Ka=(p,v,I)=>(async function(P,k,X,K){let z=k.view.ma(X);z.ns&&(z=await wf(P.localStore,k.query,!1).then((({documents:A})=>k.view.ma(A,z))));const pe=K&&K.targetChanges.get(k.targetId),Q=K&&K.targetMismatches.get(k.targetId)!=null,he=k.view.applyChanges(z,P.isPrimaryClient,pe,Q);return Kf(P,k.targetId,he.wa),he.snapshot})(t,p,v,I);const i=await wf(t.localStore,e,!0),a=new vT(e,i.Ts),l=a.ma(i.documents),u=Ss.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=a.applyChanges(l,t.isPrimaryClient,u);Kf(t,n,f.wa);const d=new ET(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function RT(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter((a=>!qi(a,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ol(r.remoteStore,s.targetId),pl(r,s.targetId)})).catch(ds)):(pl(r,s.targetId),await rl(r.localStore,s.targetId,!0))}async function ST(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ol(n.remoteStore,r.targetId))}async function VT(t,e,n){const r=kT(t);try{const s=await(function(a,l){const u=ie(a),f=ke.now(),d=l.reduce(((I,C)=>I.add(C.key)),ue());let p,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let C=sn(),P=ue();return u.cs.getEntries(I,d).next((k=>{C=k,C.forEach(((X,K)=>{K.isValidDocument()||(P=P.add(X))}))})).next((()=>u.localDocuments.getOverlayedDocuments(I,C))).next((k=>{p=k;const X=[];for(const K of l){const z=zv(K,p.get(K.key).overlayedDocument);z!=null&&X.push(new Kn(K.key,z,Nh(z.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,X,l)})).next((k=>{v=k;const X=k.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(I,k.batchId,X)}))})).then((()=>({batchId:v.batchId,changes:qh(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Ba[a.currentUser.toKey()];f||(f=new Ne(ge)),f=f.insert(l,u),a.Ba[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ns(r,s.changes),await ro(r.remoteStore)}catch(s){const i=hl(s,"Failed to persist write");n.reject(i)}}async function Bf(t,e){const n=ie(t);try{const r=await BE(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=n.Na.get(i);a&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ie(a.va):s.removedDocuments.size>0&&(Ie(a.va),a.va=!1))})),await Ns(n,r,e)}catch(r){await ds(r)}}function jf(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=ie(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,p)=>{for(const v of p.j_)v.Z_(l)&&(f=!0)})),f&&fl(u)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NT(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ne(te.comparator);a=a.insert(i,Je.newNoDocument(i,oe.min()));const l=ue().add(i),u=new Yi(oe.min(),new Map,new Ne(ge),a,l);await Bf(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),ml(r)}else await rl(r.localStore,e,!1).then((()=>pl(r,e,n))).catch(ds)}async function CT(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await UE(n.localStore,e);qf(n,r,null),$f(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ns(n,s)}catch(s){await ds(s)}}async function PT(t,e,n){const r=ie(t);try{const s=await(function(a,l){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((p=>(Ie(p!==null),d=p.keys(),u.mutationQueue.removeMutationBatch(f,p)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,e);qf(r,e,n),$f(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ns(r,s)}catch(s){await ds(s)}}function $f(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function qf(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function pl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||Hf(t,r)}))}function Hf(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ol(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ml(t))}function Kf(t,e,n){for(const r of n)r instanceof Ff?(t.La.addReference(r.key,e),DT(t,r)):r instanceof Lf?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Hf(t,r.key)):se()}function DT(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),ml(t))}function ml(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new TT(n)),t.Oa=t.Oa.insert(n,r),Sf(t.remoteStore,new En(Ht(qa(n.path)),r,"TargetPurposeLimboResolution",Oa.oe))}}async function Ns(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((l,u)=>{a.push(r.Ka(u,e,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){s.push(f);const p=nl.Wi(u.targetId,f);i.push(p)}})))})),await Promise.all(a),r.Ca.d_(s),await(async function(u,f){const d=ie(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(f,(v=>M.forEach(v.$i,(I=>d.persistence.referenceDelegate.addReference(p,v.targetId,I))).next((()=>M.forEach(v.Ui,(I=>d.persistence.referenceDelegate.removeReference(p,v.targetId,I)))))))))}catch(p){if(!ps(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const I=d.os.get(v),C=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(C);d.os=d.os.insert(v,P)}}})(r.localStore,i))}async function OT(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Ef(n.localStore,e);n.currentUser=e,(function(i,a){i.ka.forEach((l=>{l.forEach((u=>{u.reject(new ee(L.CANCELLED,a))}))})),i.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ns(n,r.hs)}}function xT(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let s=ue();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function Wf(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NT.bind(null,e),e.Ca.d_=gT.bind(null,e.eventManager),e.Ca.$a=_T.bind(null,e.eventManager),e}function kT(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PT.bind(null,e),e}class so{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eo(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return LE(this.persistence,new ME,e.initialUser,this.serializer)}Ga(e){return new OE(tl.Zr,this.serializer)}Wa(e){return new KE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}so.provider={build:()=>new so};class gl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>jf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=OT.bind(null,this.syncEngine),await hT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dT})()}createDatastore(e){const n=eo(e.databaseInfo.databaseId),r=(function(i){return new QE(i)})(e.databaseInfo);return(function(i,a,l,u){return new JE(i,a,l,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,a,l){return new eT(r,s,i,a,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>jf(this.syncEngine,n,0)),(function(){return Af.D()?new Af:new WE})())}createSyncEngine(e,n){return(function(s,i,a,l,u,f,d){const p=new wT(s,i,a,l,u,f);return d&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const i=ie(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Vs(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gl.provider={build:()=>new gl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Xe.UNAUTHENTICATED,this.clientId=Eh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{W("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(W("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _n;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hl(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _l(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Ef(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function zf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LT(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Of(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Of(e.remoteStore,s))),t._onlineComponents=e}async function LT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await _l(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;mr("Error using user provided cache. Falling back to memory cache: "+n),await _l(t,new so)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await _l(t,new so);return t._offlineComponents}async function Gf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await zf(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await zf(t,new gl))),t._onlineComponents}function UT(t){return Gf(t).then((e=>e.syncEngine))}async function BT(t){const e=await Gf(t),n=e.eventManager;return n.onListen=IT.bind(null,e.syncEngine),n.onUnlisten=RT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ST.bind(null,e.syncEngine),n}function jT(t,e,n={}){const r=new _n;return t.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new MT({next:v=>{d.Za(),a.enqueueAndForget((()=>mT(i,p)));const I=v.docs.has(l);!I&&v.fromCache?f.reject(new ee(L.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&u&&u.source==="server"?f.reject(new ee(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new yT(qa(l.path),d,{includeMetadataChanges:!0,_a:!0});return pT(i,p)})(await BT(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e,n){if(!n)throw new ee(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $T(t,e,n,r){if(e===!0&&r===!0)throw new ee(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Jf(t){if(!te.isDocumentKey(t))throw new ee(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Zf(t){if(te.isDocumentKey(t))throw new ee(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yl(t);throw new ee(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$T("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qf((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oo{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ed({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ed(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tv;switch(r.type){case"firstParty":return new iv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Yf.get(n);r&&(W("ComponentProvider","Removing Datastore"),Yf.delete(n),r.terminate())})(this),Promise.resolve()}}function qT(t,e,n,r={}){var s;const i=(t=io(t,oo))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Xe.MOCK_USER;else{l=x_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ee(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xe(f)}t._authCredentials=new nv(new vh(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vl(this.firestore,e,this._query)}}class wt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wt(this.firestore,e,this._key)}}class wn extends vl{constructor(e,n,r){super(e,n,qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new te(e))}withConverter(e){return new wn(this.firestore,e,this._path)}}function HT(t,e,...n){if(t=as(t),Xf("collection","path",e),t instanceof oo){const r=Se.fromString(e,...n);return Zf(r),new wn(t,null,r)}{if(!(t instanceof wt||t instanceof wn))throw new ee(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Zf(r),new wn(t.firestore,null,r)}}function td(t,e,...n){if(t=as(t),arguments.length===1&&(e=Eh.newId()),Xf("doc","path",e),t instanceof oo){const r=Se.fromString(e,...n);return Jf(r),new wt(t,null,new te(r))}{if(!(t instanceof wt||t instanceof wn))throw new ee(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Jf(r),new wt(t.firestore,t instanceof wn?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new bf(this,"async_queue_retry"),this.Vu=()=>{const r=il();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=il();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=il();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new _n;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ps(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l})(r);throw rn("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ul.createAndSchedule(this,e,n,r,(i=>this.yu(i)));return this.Tu.push(s),s}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class El extends oo{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new nd,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nd(e),this._firestoreClient=void 0,await e}}}function KT(t,e){const n=typeof t=="object"?t:qy(),r=typeof t=="string"?t:"(default)",s=Uy(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=D_("firestore");i&&qT(s,...i)}return s}function rd(t){if(t._terminated)throw new ee(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WT(t),t._firestoreClient}function WT(t){var e,n,r;const s=t._freezeSettings(),i=(function(l,u,f,d){return new yv(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Qf(d.experimentalLongPollingOptions),d.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new FT(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Vr(We.fromBase64String(e))}catch(n){throw new ee(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Vr(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zT=/^__.*__$/;class GT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Kn(e,this.data,this.fieldMask,n,this.fieldTransforms):new bs(e,this.data,n,this.fieldTransforms)}}function id(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class Al{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Al(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ao(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(id(this.Cu)&&zT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class QT{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eo(e)}Qu(e,n,r,s=!1){return new Al({Cu:e,methodName:n,qu:r,path:qe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function YT(t){const e=t._freezeSettings(),n=eo(t._databaseId);return new QT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XT(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);cd("Data must be an object, but it was:",a,r);const l=ad(r,a);let u,f;if(i.merge)u=new Dt(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const v=JT(e,p,n);if(!a.contains(v))throw new ee(L.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);ew(d,v)||d.push(v)}u=new Dt(d),f=a.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,f=a.fieldTransforms;return new GT(new Tt(l),u,f)}function od(t,e){if(ld(t=as(t)))return cd("Unsupported field value:",e,t),ad(t,e);if(t instanceof sd)return(function(r,s){if(!id(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=od(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=as(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:Ji(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ji(s.serializer,i)}}if(r instanceof wl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:ff(s.serializer,r._byteString)};if(r instanceof wt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qa(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Il)return(function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ka(l.serializer,u)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${yl(r)}`)})(t,e)}function ad(t,e){const n={};return wh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_r(t,((r,s)=>{const i=od(s,e.Mu(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function ld(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof wl||t instanceof Vr||t instanceof wt||t instanceof sd||t instanceof Il)}function cd(t,e,n){if(!ld(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=yl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function JT(t,e,n){if((e=as(e))instanceof Tl)return e._internalPath;if(typeof e=="string")return ud(t,e);throw ao("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZT=new RegExp("[~\\*/\\[\\]]");function ud(t,e,n){if(e.search(ZT)>=0)throw ao(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tl(...e.split("."))._internalPath}catch{throw ao(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ao(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new ee(L.INVALID_ARGUMENT,l+t+u)}function ew(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class tw extends hd{data(){return super.data()}}function fd(t,e){return typeof e=="string"?ud(t,e):e instanceof Tl?e._internalPath:e._delegate._internalPath}class nw{convertValue(e,n="none"){switch(qn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes($n(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _r(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((a=>De(a.doubleValue)));return new Il(i)}convertGeoPoint(e){return new wl(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ka(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ms(e));default:return null}}convertTimestamp(e){const n=vn(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);Ie(vf(r));const s=new gs(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||rn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class dd extends hd{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new iw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class iw extends dd{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){t=io(t,wt);const e=io(t.firestore,El);return jT(rd(e),t._key).then((n=>uw(e,t,n)))}class aw extends nw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}}function lw(t,e){const n=io(t.firestore,El),r=td(t),s=rw(t.converter,e);return cw(n,[XT(YT(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then((()=>r))}function cw(t,e){return(function(r,s){const i=new _n;return r.asyncQueue.enqueueAndForget((async()=>VT(await UT(r),s,i))),i.promise})(rd(t),e)}function uw(t,e,n){const r=n.docs.get(e._key),s=new aw(t);return new dd(t,s,e._key,r,new sw(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pr=s})($y),Di(new ls("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new El(new rv(r.getProvider("auth-internal")),new av(r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gs(f.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),dr(yh,"4.7.3",e),dr(yh,"4.7.3","esm2017")})();const zn=document.currentScript,hw=()=>zn?{apiKey:zn.getAttribute("data-firebase-api-key")||"",authDomain:zn.getAttribute("data-firebase-auth-domain")||"",projectId:zn.getAttribute("data-firebase-project-id")||"",storageBucket:zn.getAttribute("data-firebase-storage-bucket")||"",messagingSenderId:zn.getAttribute("data-firebase-messaging-sender-id")||"",appId:zn.getAttribute("data-firebase-app-id")||""}:null,fw=()=>{var t,e;return(t=window.framerSurveyWidgetConfig)!=null&&t.firebase?window.framerSurveyWidgetConfig.firebase:(e=window.framerSurveyConfig)!=null&&e.firebase?window.framerSurveyConfig.firebase:null},dw=hw(),pw=fw(),pd=dw||pw;if(!pd)throw console.error("Framer Survey Widget: Firebase config is missing!"),console.error("Make sure the script element has Firebase data attributes or window.framerSurveyWidgetConfig is set"),new Error("Firebase configuration is required");const mw=ih(pd),md=KT(mw);async function gw(t){try{if(console.log("getSurvey",t),!t||t.trim()==="")throw new Error("Project ID is required but was empty or undefined");const e=td(md,"surveys",t.trim()),n=await ow(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting survey:",e),console.error("Project ID used:",t),e}}async function _w(t){try{return(await lw(HT(md,"surveyResponses"),{...t,submittedAt:ke.now()})).id}catch(e){throw console.error("Error saving survey response:",e),e}}const yw={class:"survey-widget"},vw={class:"survey-modal"},Ew={class:"survey-header"},Tw={key:0,class:"loading"},ww={key:1,class:"error"},Iw={class:"question-label"},Aw={key:0,class:"options"},bw=["name","value","onUpdate:modelValue"],Rw=["onUpdate:modelValue","name"],Sw={key:2,class:"rating"},Vw=["onClick"],Nw={class:"form-actions"},Cw=["disabled"],Pw={key:3,class:"success-message"},Dw=Am({__name:"App",props:{projectId:{},licenseKey:{},position:{},buttonText:{},buttonColor:{}},setup(t){const e=t,n=Pn(!1),r=Pn(null),s=Pn(!1),i=Pn(null),a=Pn({}),l=Pn(!1),u=Pn(!1),f=Su(()=>({...{"bottom-right":{bottom:"20px",right:"20px"},"bottom-left":{bottom:"20px",left:"20px"},"top-right":{top:"20px",right:"20px"},"top-left":{top:"20px",left:"20px"}}[e.position],backgroundColor:e.buttonColor})),d=async()=>{n.value=!0,s.value=!0,i.value=null,console.error("openSurvey",e);try{if(!e.projectId||e.projectId.trim()==="")throw new Error("Project ID bulunamad. Ltfen script element'inde 'data-project-id' attribute'unun olduundan emin olun.");const I=await gw(e.projectId.trim());I?(r.value=I,I.questions.forEach(C=>{a.value[C.id]=C.type==="rating"?0:""})):i.value="Anket bulunamad"}catch(I){console.error("Error opening survey:",I),i.value=I.message||"Anket yklenirken bir hata olutu"}finally{s.value=!1}},p=()=>{n.value=!1,u.value=!1,a.value={}},v=async()=>{l.value=!0,i.value=null;try{const I=Object.entries(a.value).map(([C,P])=>({questionId:C,value:P}));await _w({surveyId:r.value.id||e.projectId,projectId:e.projectId,responses:I,submittedAt:new Date}),u.value=!0}catch(I){i.value=I.message||"Yant kaydedilirken bir hata olutu"}finally{l.value=!1}};return(I,C)=>{var P;return Ye(),ct("div",yw,[n.value?ss("",!0):(Ye(),ct("button",{key:0,class:"feedback-button",style:Qs(f.value),onClick:d},hn(t.buttonText),5)),n.value?(Ye(),ct("div",{key:1,class:"survey-modal-overlay",onClick:Hu(p,["self"])},[Pe("div",vw,[Pe("div",Ew,[Pe("h2",null,hn(((P=r.value)==null?void 0:P.surveyName)||"Anket"),1),Pe("button",{class:"close-button",onClick:p},"")]),s.value?(Ye(),ct("div",Tw,[...C[0]||(C[0]=[Pe("div",{class:"spinner"},null,-1),Pe("p",null,"Anket ykleniyor...",-1)])])):i.value?(Ye(),ct("div",ww,[Pe("p",null,hn(i.value),1),Pe("button",{class:"framer-button-primary",onClick:p},"Kapat")])):r.value?(Ye(),ct("form",{key:2,onSubmit:Hu(v,["prevent"]),class:"survey-form"},[(Ye(!0),ct(gt,null,Zo(r.value.questions,(k,X)=>(Ye(),ct("div",{key:k.id,class:"question-section"},[Pe("label",Iw,hn(X+1)+". "+hn(k.text),1),k.type==="multiple-choice"?(Ye(),ct("div",Aw,[(Ye(!0),ct(gt,null,Zo(k.options,(K,z)=>(Ye(),ct("label",{key:z,class:"option-label"},[Oc(Pe("input",{type:"radio",name:`question-${k.id}`,value:K,"onUpdate:modelValue":pe=>a.value[k.id]=pe,required:""},null,8,bw),[[h_,a.value[k.id]]]),Pe("span",null,hn(K),1)]))),128))])):k.type==="text"?Oc((Ye(),ct("textarea",{key:1,"onUpdate:modelValue":K=>a.value[k.id]=K,name:`question-${k.id}`,placeholder:"Cevabnz yazn...",rows:"4",required:""},null,8,Rw)),[[u_,a.value[k.id]]]):k.type==="rating"?(Ye(),ct("div",Sw,[(Ye(),ct(gt,null,Zo(5,K=>Pe("button",{key:K,type:"button",class:Ys(["rating-button",{active:a.value[k.id]===K}]),onClick:z=>a.value[k.id]=K},"  ",10,Vw)),64))])):ss("",!0)]))),128)),Pe("div",Nw,[Pe("button",{type:"button",class:"framer-button-secondary",onClick:p}," ptal "),Pe("button",{type:"submit",class:"framer-button-primary",disabled:l.value},hn(l.value?"Gnderiliyor...":"Gnder"),9,Cw)])],32)):ss("",!0),u.value?(Ye(),ct("div",Pw,[C[1]||(C[1]=Pe("div",{class:"success-icon"},"",-1)),C[2]||(C[2]=Pe("h3",null,"Teekkrler!",-1)),C[3]||(C[3]=Pe("p",null,"Yantnz baaryla kaydedildi.",-1)),Pe("button",{class:"framer-button-primary",onClick:p},"Kapat")])):ss("",!0)])])):ss("",!0)])}}});console.log("Framer Survey Widget: main.ts loaded"),console.log("Window object:",window),console.log("Window.framerSurveyWidgetConfig:",window.framerSurveyWidgetConfig);let Gn="",bl="",Rl="bottom-right",Sl="Feedback",Vl="#0066ff";if(window.framerSurveyWidgetConfig){console.log("widget if e girdi, config:",window.framerSurveyWidgetConfig);const t=window.framerSurveyWidgetConfig;Gn=t.projectId||"",bl=t.licenseKey||"",Rl=t.position||"bottom-right",Sl=t.buttonText||"Feedback",Vl=t.buttonColor||"#0066ff",console.log("Framer Survey Widget: Config loaded from window object",{projectId:Gn})}else{console.log("widget else e girdi, config:",window.framerSurveyWidgetConfig);let t=document.currentScript;if(t||(t=document.querySelector("script[data-project-id]")),!t){const e=document.querySelectorAll('script[type="module"]');t=Array.from(e).find(n=>n.getAttribute("data-project-id")!==null)}t&&(Gn=((gd=t.getAttribute("data-project-id"))==null?void 0:gd.trim())||"",bl=((_d=t.getAttribute("data-license-key"))==null?void 0:_d.trim())||"",Rl=t.getAttribute("data-position")||"bottom-right",Sl=t.getAttribute("data-button-text")||"Feedback",Vl=t.getAttribute("data-button-color")||"#0066ff",console.log("Framer Survey Widget: Config loaded from script element",{projectId:Gn}))}(!Gn||Gn.trim()==="")&&(console.error("Framer Survey Widget: Project ID is missing!"),console.error("Make sure the script element has 'data-project-id' attribute or window.framerSurveyWidgetConfig is set"),console.error("Available script elements:",document.querySelectorAll("script[data-project-id]")),console.error("Window config:",window.framerSurveyWidgetConfig));const Nl=document.createElement("div");Nl.id="framer-survey-widget",document.body.appendChild(Nl),__(Dw,{projectId:Gn,licenseKey:bl,position:Rl,buttonText:Sl,buttonColor:Vl}).mount(Nl)})();

(function(){"use strict";/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var fd,dd;function Qt(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Te=process.env.NODE_ENV!=="production"?Object.freeze({}):{},nr=process.env.NODE_ENV!=="production"?Object.freeze([]):[],Fe=()=>{},$l=()=>!1,Fr=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ks=t=>t.startsWith("onUpdate:"),Oe=Object.assign,bo=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},sp=Object.prototype.hasOwnProperty,fe=(t,e)=>sp.call(t,e),Z=Array.isArray,Sn=t=>Lr(t)==="[object Map]",jl=t=>Lr(t)==="[object Set]",ql=t=>Lr(t)==="[object Date]",re=t=>typeof t=="function",Se=t=>typeof t=="string",kt=t=>typeof t=="symbol",Ee=t=>t!==null&&typeof t=="object",Ro=t=>(Ee(t)||re(t))&&re(t.then)&&re(t.catch),Hl=Object.prototype.toString,Lr=t=>Hl.call(t),Vo=t=>Lr(t).slice(8,-1),Kl=t=>Lr(t)==="[object Object]",So=t=>Se(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ur=Qt(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ip=Qt("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),zs=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},op=/-\w/g,Rt=zs(t=>t.replace(op,e=>e.slice(1).toUpperCase())),ap=/\B([A-Z])/g,un=zs(t=>t.replace(ap,"-$1").toLowerCase()),Ws=zs(t=>t.charAt(0).toUpperCase()+t.slice(1)),Nn=zs(t=>t?`on${Ws(t)}`:""),hn=(t,e)=>!Object.is(t,e),rr=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Gs=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},No=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let zl;const Br=()=>zl||(zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Qs(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Se(r)?hp(r):Qs(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(Se(t)||Ee(t))return t}const lp=/;(?![^(]*\))/g,cp=/:([^]+)/,up=/\/\*[^]*?\*\//g;function hp(t){const e={};return t.replace(up,"").split(lp).forEach(n=>{if(n){const r=n.split(cp);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Ys(t){let e="";if(Se(t))e=t;else if(Z(t))for(let n=0;n<t.length;n++){const r=Ys(t[n]);r&&(e+=r+" ")}else if(Ee(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const fp="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",dp="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",pp="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",mp=Qt(fp),gp=Qt(dp),_p=Qt(pp),yp=Qt("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Wl(t){return!!t||t===""}function vp(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Xs(t[r],e[r]);return n}function Xs(t,e){if(t===e)return!0;let n=ql(t),r=ql(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=kt(t),r=kt(e),n||r)return t===e;if(n=Z(t),r=Z(e),n||r)return n&&r?vp(t,e):!1;if(n=Ee(t),r=Ee(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,i=Object.keys(e).length;if(s!==i)return!1;for(const a in t){const l=t.hasOwnProperty(a),u=e.hasOwnProperty(a);if(l&&!u||!l&&u||!Xs(t[a],e[a]))return!1}}return String(t)===String(e)}const Gl=t=>!!(t&&t.__v_isRef===!0),fn=t=>Se(t)?t:t==null?"":Z(t)||Ee(t)&&(t.toString===Hl||!re(t.toString))?Gl(t)?fn(t.value):JSON.stringify(t,Ql,2):String(t),Ql=(t,e)=>Gl(e)?Ql(t,e.value):Sn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[Co(r,i)+" =>"]=s,n),{})}:jl(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Co(n))}:kt(e)?Co(e):Ee(e)&&!Z(e)&&!Kl(e)?String(e):e,Co=(t,e="")=>{var n;return kt(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Vt(t,...e){console.warn(`[Vue warn] ${t}`,...e)}let dt;class Ep{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=dt,!e&&dt&&(this.index=(dt.scopes||(dt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=dt;try{return dt=this,e()}finally{dt=n}}else process.env.NODE_ENV!=="production"&&Vt("cannot run an inactive effect scope.")}on(){++this._on===1&&(this.prevScope=dt,dt=this)}off(){this._on>0&&--this._on===0&&(dt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Tp(){return dt}let we;const Po=new WeakSet;class Yl{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,dt&&dt.active&&dt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Po.has(this)&&(Po.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Jl(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rc(this),Zl(this);const e=we,n=St;we=this,St=!0;try{return this.fn()}finally{process.env.NODE_ENV!=="production"&&we!==this&&Vt("Active effect was not restored correctly - this is likely a Vue internal bug."),ec(this),we=e,St=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ko(e);this.deps=this.depsTail=void 0,rc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Po.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){xo(this)&&this.run()}get dirty(){return xo(this)}}let Xl=0,$r,jr;function Jl(t,e=!1){if(t.flags|=8,e){t.next=jr,jr=t;return}t.next=$r,$r=t}function Do(){Xl++}function Oo(){if(--Xl>0)return;if(jr){let e=jr;for(jr=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;$r;){let e=$r;for($r=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function Zl(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function ec(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),ko(r),wp(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function xo(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(tc(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function tc(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===qr)||(t.globalVersion=qr,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!xo(t))))return;t.flags|=2;const e=t.dep,n=we,r=St;we=t,St=!0;try{Zl(t);const s=t.fn(t._value);(e.version===0||hn(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{we=n,St=r,ec(t),t.flags&=-3}}function ko(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),process.env.NODE_ENV!=="production"&&n.subsHead===t&&(n.subsHead=s),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)ko(i,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function wp(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let St=!0;const nc=[];function Nt(){nc.push(St),St=!1}function Ct(){const t=nc.pop();St=t===void 0?!0:t}function rc(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=we;we=void 0;try{e()}finally{we=n}}}let qr=0;class Ip{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Mo{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0,process.env.NODE_ENV!=="production"&&(this.subsHead=void 0)}track(e){if(!we||!St||we===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==we)n=this.activeLink=new Ip(we,this),we.deps?(n.prevDep=we.depsTail,we.depsTail.nextDep=n,we.depsTail=n):we.deps=we.depsTail=n,sc(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=we.depsTail,n.nextDep=void 0,we.depsTail.nextDep=n,we.depsTail=n,we.deps===n&&(we.deps=r)}return process.env.NODE_ENV!=="production"&&we.onTrack&&we.onTrack(Oe({effect:we},e)),n}trigger(e){this.version++,qr++,this.notify(e)}notify(e){Do();try{if(process.env.NODE_ENV!=="production")for(let n=this.subsHead;n;n=n.nextSub)n.sub.onTrigger&&!(n.sub.flags&8)&&n.sub.onTrigger(Oe({effect:n.sub},e));for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Oo()}}}function sc(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)sc(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),process.env.NODE_ENV!=="production"&&t.dep.subsHead===void 0&&(t.dep.subsHead=t),t.dep.subs=t}}const Fo=new WeakMap,Cn=Symbol(process.env.NODE_ENV!=="production"?"Object iterate":""),Lo=Symbol(process.env.NODE_ENV!=="production"?"Map keys iterate":""),Hr=Symbol(process.env.NODE_ENV!=="production"?"Array iterate":"");function Le(t,e,n){if(St&&we){let r=Fo.get(t);r||Fo.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Mo),s.map=r,s.key=n),process.env.NODE_ENV!=="production"?s.track({target:t,type:e,key:n}):s.track()}}function Mt(t,e,n,r,s,i){const a=Fo.get(t);if(!a){qr++;return}const l=u=>{u&&(process.env.NODE_ENV!=="production"?u.trigger({target:t,type:e,key:n,newValue:r,oldValue:s,oldTarget:i}):u.trigger())};if(Do(),e==="clear")a.forEach(l);else{const u=Z(t),f=u&&So(n);if(u&&n==="length"){const d=Number(r);a.forEach((p,v)=>{(v==="length"||v===Hr||!kt(v)&&v>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Hr)),e){case"add":u?f&&l(a.get("length")):(l(a.get(Cn)),Sn(t)&&l(a.get(Lo)));break;case"delete":u||(l(a.get(Cn)),Sn(t)&&l(a.get(Lo)));break;case"set":Sn(t)&&l(a.get(Cn));break}}Oo()}function sr(t){const e=le(t);return e===t?e:(Le(e,"iterate",Hr),ot(t)?e:e.map(je))}function Js(t){return Le(t=le(t),"iterate",Hr),t}const Ap={__proto__:null,[Symbol.iterator](){return Uo(this,Symbol.iterator,je)},concat(...t){return sr(this).concat(...t.map(e=>Z(e)?sr(e):e))},entries(){return Uo(this,"entries",t=>(t[1]=je(t[1]),t))},every(t,e){return Yt(this,"every",t,e,void 0,arguments)},filter(t,e){return Yt(this,"filter",t,e,n=>n.map(je),arguments)},find(t,e){return Yt(this,"find",t,e,je,arguments)},findIndex(t,e){return Yt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Yt(this,"findLast",t,e,je,arguments)},findLastIndex(t,e){return Yt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Yt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Bo(this,"includes",t)},indexOf(...t){return Bo(this,"indexOf",t)},join(t){return sr(this).join(t)},lastIndexOf(...t){return Bo(this,"lastIndexOf",t)},map(t,e){return Yt(this,"map",t,e,void 0,arguments)},pop(){return Kr(this,"pop")},push(...t){return Kr(this,"push",t)},reduce(t,...e){return ic(this,"reduce",t,e)},reduceRight(t,...e){return ic(this,"reduceRight",t,e)},shift(){return Kr(this,"shift")},some(t,e){return Yt(this,"some",t,e,void 0,arguments)},splice(...t){return Kr(this,"splice",t)},toReversed(){return sr(this).toReversed()},toSorted(t){return sr(this).toSorted(t)},toSpliced(...t){return sr(this).toSpliced(...t)},unshift(...t){return Kr(this,"unshift",t)},values(){return Uo(this,"values",je)}};function Uo(t,e,n){const r=Js(t),s=r[e]();return r!==t&&!ot(t)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const bp=Array.prototype;function Yt(t,e,n,r,s,i){const a=Js(t),l=a!==t&&!ot(t),u=a[e];if(u!==bp[e]){const p=u.apply(t,i);return l?je(p):p}let f=n;a!==t&&(l?f=function(p,v){return n.call(this,je(p),v,t)}:n.length>2&&(f=function(p,v){return n.call(this,p,v,t)}));const d=u.call(a,f,r);return l&&s?s(d):d}function ic(t,e,n,r){const s=Js(t);let i=n;return s!==t&&(ot(t)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,t)}):i=function(a,l,u){return n.call(this,a,je(l),u,t)}),s[e](i,...r)}function Bo(t,e,n){const r=le(t);Le(r,"iterate",Hr);const s=r[e](...n);return(s===-1||s===!1)&&ri(n[0])?(n[0]=le(n[0]),r[e](...n)):s}function Kr(t,e,n=[]){Nt(),Do();const r=le(t)[e].apply(t,n);return Oo(),Ct(),r}const Rp=Qt("__proto__,__v_isRef,__isVue"),oc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(kt));function Vp(t){kt(t)||(t=String(t));const e=le(this);return Le(e,"has",t),e.hasOwnProperty(t)}class ac{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?pc:dc:i?fc:hc).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const a=Z(e);if(!s){let u;if(a&&(u=Ap[n]))return u;if(n==="hasOwnProperty")return Vp}const l=Reflect.get(e,n,xe(e)?e:r);if((kt(n)?oc.has(n):Rp(n))||(s||Le(e,"get",n),i))return l;if(xe(l)){const u=a&&So(n)?l:l.value;return s&&Ee(u)?qo(u):u}return Ee(l)?s?qo(l):jo(l):l}}class lc extends ac{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const u=Lt(i);if(!ot(r)&&!Lt(r)&&(i=le(i),r=le(r)),!Z(e)&&xe(i)&&!xe(r))return u?(process.env.NODE_ENV!=="production"&&Vt(`Set operation on key "${String(n)}" failed: target is readonly.`,e[n]),!0):(i.value=r,!0)}const a=Z(e)&&So(n)?Number(n)<e.length:fe(e,n),l=Reflect.set(e,n,r,xe(e)?e:s);return e===le(s)&&(a?hn(r,i)&&Mt(e,"set",n,r,i):Mt(e,"add",n,r)),l}deleteProperty(e,n){const r=fe(e,n),s=e[n],i=Reflect.deleteProperty(e,n);return i&&r&&Mt(e,"delete",n,void 0,s),i}has(e,n){const r=Reflect.has(e,n);return(!kt(n)||!oc.has(n))&&Le(e,"has",n),r}ownKeys(e){return Le(e,"iterate",Z(e)?"length":Cn),Reflect.ownKeys(e)}}class cc extends ac{constructor(e=!1){super(!0,e)}set(e,n){return process.env.NODE_ENV!=="production"&&Vt(`Set operation on key "${String(n)}" failed: target is readonly.`,e),!0}deleteProperty(e,n){return process.env.NODE_ENV!=="production"&&Vt(`Delete operation on key "${String(n)}" failed: target is readonly.`,e),!0}}const Sp=new lc,Np=new cc,Cp=new lc(!0),Pp=new cc(!0),$o=t=>t,Zs=t=>Reflect.getPrototypeOf(t);function Dp(t,e,n){return function(...r){const s=this.__v_raw,i=le(s),a=Sn(i),l=t==="entries"||t===Symbol.iterator&&a,u=t==="keys"&&a,f=s[t](...r),d=n?$o:e?si:je;return!e&&Le(i,"iterate",u?Lo:Cn),{next(){const{value:p,done:v}=f.next();return v?{value:p,done:v}:{value:l?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function ei(t){return function(...e){if(process.env.NODE_ENV!=="production"){const n=e[0]?`on key "${e[0]}" `:"";Vt(`${Ws(t)} operation ${n}failed: target is readonly.`,le(this))}return t==="delete"?!1:t==="clear"?void 0:this}}function Op(t,e){const n={get(s){const i=this.__v_raw,a=le(i),l=le(s);t||(hn(s,l)&&Le(a,"get",s),Le(a,"get",l));const{has:u}=Zs(a),f=e?$o:t?si:je;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!t&&Le(le(s),"iterate",Cn),s.size},has(s){const i=this.__v_raw,a=le(i),l=le(s);return t||(hn(s,l)&&Le(a,"has",s),Le(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=le(l),f=e?$o:t?si:je;return!t&&Le(u,"iterate",Cn),l.forEach((d,p)=>s.call(i,f(d),f(p),a))}};return Oe(n,t?{add:ei("add"),set:ei("set"),delete:ei("delete"),clear:ei("clear")}:{add(s){!e&&!ot(s)&&!Lt(s)&&(s=le(s));const i=le(this);return Zs(i).has.call(i,s)||(i.add(s),Mt(i,"add",s,s)),this},set(s,i){!e&&!ot(i)&&!Lt(i)&&(i=le(i));const a=le(this),{has:l,get:u}=Zs(a);let f=l.call(a,s);f?process.env.NODE_ENV!=="production"&&uc(a,l,s):(s=le(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?hn(i,d)&&Mt(a,"set",s,i,d):Mt(a,"add",s,i),this},delete(s){const i=le(this),{has:a,get:l}=Zs(i);let u=a.call(i,s);u?process.env.NODE_ENV!=="production"&&uc(i,a,s):(s=le(s),u=a.call(i,s));const f=l?l.call(i,s):void 0,d=i.delete(s);return u&&Mt(i,"delete",s,void 0,f),d},clear(){const s=le(this),i=s.size!==0,a=process.env.NODE_ENV!=="production"?Sn(s)?new Map(s):new Set(s):void 0,l=s.clear();return i&&Mt(s,"clear",void 0,void 0,a),l}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Dp(s,t,e)}),n}function ti(t,e){const n=Op(t,e);return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(fe(n,s)&&s in r?n:r,s,i)}const xp={get:ti(!1,!1)},kp={get:ti(!1,!0)},Mp={get:ti(!0,!1)},Fp={get:ti(!0,!0)};function uc(t,e,n){const r=le(n);if(r!==n&&e.call(t,r)){const s=Vo(t);Vt(`Reactive ${s} contains both the raw and reactive versions of the same object${s==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const hc=new WeakMap,fc=new WeakMap,dc=new WeakMap,pc=new WeakMap;function Lp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Up(t){return t.__v_skip||!Object.isExtensible(t)?0:Lp(Vo(t))}function jo(t){return Lt(t)?t:ni(t,!1,Sp,xp,hc)}function Bp(t){return ni(t,!1,Cp,kp,fc)}function qo(t){return ni(t,!0,Np,Mp,dc)}function Ft(t){return ni(t,!0,Pp,Fp,pc)}function ni(t,e,n,r,s){if(!Ee(t))return process.env.NODE_ENV!=="production"&&Vt(`value cannot be made ${e?"readonly":"reactive"}: ${String(t)}`),t;if(t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Up(t);if(i===0)return t;const a=s.get(t);if(a)return a;const l=new Proxy(t,i===2?r:n);return s.set(t,l),l}function Pn(t){return Lt(t)?Pn(t.__v_raw):!!(t&&t.__v_isReactive)}function Lt(t){return!!(t&&t.__v_isReadonly)}function ot(t){return!!(t&&t.__v_isShallow)}function ri(t){return t?!!t.__v_raw:!1}function le(t){const e=t&&t.__v_raw;return e?le(e):t}function $p(t){return!fe(t,"__v_skip")&&Object.isExtensible(t)&&Gs(t,"__v_skip",!0),t}const je=t=>Ee(t)?jo(t):t,si=t=>Ee(t)?qo(t):t;function xe(t){return t?t.__v_isRef===!0:!1}function Dn(t){return jp(t,!1)}function jp(t,e){return xe(t)?t:new qp(t,e)}class qp{constructor(e,n){this.dep=new Mo,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:le(e),this._value=n?e:je(e),this.__v_isShallow=n}get value(){return process.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||ot(e)||Lt(e);e=r?e:le(e),hn(e,n)&&(this._rawValue=e,this._value=r?e:je(e),process.env.NODE_ENV!=="production"?this.dep.trigger({target:this,type:"set",key:"value",newValue:e,oldValue:n}):this.dep.trigger())}}function Hp(t){return xe(t)?t.value:t}const Kp={get:(t,e,n)=>e==="__v_raw"?t:Hp(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return xe(s)&&!xe(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function mc(t){return Pn(t)?t:new Proxy(t,Kp)}class zp{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Mo(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=qr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&we!==this)return Jl(this,!0),!0;process.env.NODE_ENV}get value(){const e=process.env.NODE_ENV!=="production"?this.dep.track({target:this,type:"get",key:"value"}):this.dep.track();return tc(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter?this.setter(e):process.env.NODE_ENV!=="production"&&Vt("Write operation failed: computed value is readonly")}}function Wp(t,e,n=!1){let r,s;re(t)?r=t:(r=t.get,s=t.set);const i=new zp(r,s,n);return process.env.NODE_ENV,i}const ii={},oi=new WeakMap;let On;function Gp(t,e=!1,n=On){if(n){let r=oi.get(n);r||oi.set(n,r=[]),r.push(t)}else process.env.NODE_ENV!=="production"&&!e&&Vt("onWatcherCleanup() was called when there was no active watcher to associate with.")}function Qp(t,e,n=Te){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=Q=>{(n.onWarn||Vt)("Invalid watch source: ",Q,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},d=Q=>s?Q:ot(Q)||s===!1||s===0?Xt(Q,1):Xt(Q);let p,v,I,C,P=!1,k=!1;if(xe(t)?(v=()=>t.value,P=ot(t)):Pn(t)?(v=()=>d(t),P=!0):Z(t)?(k=!0,P=t.some(Q=>Pn(Q)||ot(Q)),v=()=>t.map(Q=>{if(xe(Q))return Q.value;if(Pn(Q))return d(Q);if(re(Q))return u?u(Q,2):Q();process.env.NODE_ENV!=="production"&&f(Q)})):re(t)?e?v=u?()=>u(t,2):t:v=()=>{if(I){Nt();try{I()}finally{Ct()}}const Q=On;On=p;try{return u?u(t,3,[C]):t(C)}finally{On=Q}}:(v=Fe,process.env.NODE_ENV!=="production"&&f(t)),e&&s){const Q=v,he=s===!0?1/0:s;v=()=>Xt(Q(),he)}const X=Tp(),K=()=>{p.stop(),X&&X.active&&bo(X.effects,p)};if(i&&e){const Q=e;e=(...he)=>{Q(...he),K()}}let W=k?new Array(t.length).fill(ii):ii;const pe=Q=>{if(!(!(p.flags&1)||!p.dirty&&!Q))if(e){const he=p.run();if(s||P||(k?he.some((A,_)=>hn(A,W[_])):hn(he,W))){I&&I();const A=On;On=p;try{const _=[he,W===ii?void 0:k&&W[0]===ii?[]:W,C];W=he,u?u(e,3,_):e(..._)}finally{On=A}}}else p.run()};return l&&l(pe),p=new Yl(v),p.scheduler=a?()=>a(pe,!1):pe,C=Q=>Gp(Q,!1,p),I=p.onStop=()=>{const Q=oi.get(p);if(Q){if(u)u(Q,4);else for(const he of Q)he();oi.delete(p)}},process.env.NODE_ENV!=="production"&&(p.onTrack=n.onTrack,p.onTrigger=n.onTrigger),e?r?pe(!0):W=p.run():a?a(pe.bind(null,!0),!0):p.run(),K.pause=p.pause.bind(p),K.resume=p.resume.bind(p),K.stop=K,K}function Xt(t,e=1/0,n){if(e<=0||!Ee(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,xe(t))Xt(t.value,e,n);else if(Z(t))for(let r=0;r<t.length;r++)Xt(t[r],e,n);else if(jl(t)||Sn(t))t.forEach(r=>{Xt(r,e,n)});else if(Kl(t)){for(const r in t)Xt(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Xt(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const xn=[];function ai(t){xn.push(t)}function li(){xn.pop()}let Ho=!1;function $(t,...e){if(Ho)return;Ho=!0,Nt();const n=xn.length?xn[xn.length-1].component:null,r=n&&n.appContext.config.warnHandler,s=Yp();if(r)ir(r,n,11,[t+e.map(i=>{var a,l;return(l=(a=i.toString)==null?void 0:a.call(i))!=null?l:JSON.stringify(i)}).join(""),n&&n.proxy,s.map(({vnode:i})=>`at <${Vi(n,i.type)}>`).join(`
`),s]);else{const i=[`[Vue warn]: ${t}`,...e];s.length&&i.push(`
`,...Xp(s)),console.warn(...i)}Ct(),Ho=!1}function Yp(){let t=xn[xn.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const r=t.component&&t.component.parent;t=r&&r.vnode}return e}function Xp(t){const e=[];return t.forEach((n,r)=>{e.push(...r===0?[]:[`
`],...Jp(n))}),e}function Jp({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",r=t.component?t.component.parent==null:!1,s=` at <${Vi(t.component,t.type,r)}`,i=">"+n;return t.props?[s,...Zp(t.props),i]:[s+i]}function Zp(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(r=>{e.push(...gc(r,t[r]))}),n.length>3&&e.push(" ..."),e}function gc(t,e,n){return Se(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:xe(e)?(e=gc(t,le(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):re(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=le(e),n?e:[`${t}=`,e])}const Ko={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ir(t,e,n,r){try{return r?t(...r):t()}catch(s){zr(s,e,n)}}function Ut(t,e,n,r){if(re(t)){const s=ir(t,e,n,r);return s&&Ro(s)&&s.catch(i=>{zr(i,e,n)}),s}if(Z(t)){const s=[];for(let i=0;i<t.length;i++)s.push(Ut(t[i],e,n,r));return s}else process.env.NODE_ENV!=="production"&&$(`Invalid value type passed to callWithAsyncErrorHandling(): ${typeof t}`)}function zr(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||Te;if(e){let l=e.parent;const u=e.proxy,f=process.env.NODE_ENV!=="production"?Ko[n]:`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,u,f)===!1)return}l=l.parent}if(i){Nt(),ir(i,null,10,[t,u,f]),Ct();return}}em(t,n,s,r,a)}function em(t,e,n,r=!0,s=!1){if(process.env.NODE_ENV!=="production"){const i=Ko[e];if(n&&ai(n),$(`Unhandled error${i?` during execution of ${i}`:""}`),n&&li(),r)throw t;console.error(t)}else{if(s)throw t;console.error(t)}}const at=[];let Bt=-1;const or=[];let dn=null,ar=0;const _c=Promise.resolve();let ci=null;const tm=100;function nm(t){const e=ci||_c;return t?e.then(this?t.bind(this):t):e}function rm(t){let e=Bt+1,n=at.length;for(;e<n;){const r=e+n>>>1,s=at[r],i=Wr(s);i<t||i===t&&s.flags&2?e=r+1:n=r}return e}function ui(t){if(!(t.flags&1)){const e=Wr(t),n=at[at.length-1];!n||!(t.flags&2)&&e>=Wr(n)?at.push(t):at.splice(rm(e),0,t),t.flags|=1,yc()}}function yc(){ci||(ci=_c.then(wc))}function vc(t){Z(t)?or.push(...t):dn&&t.id===-1?dn.splice(ar+1,0,t):t.flags&1||(or.push(t),t.flags|=1),yc()}function Ec(t,e,n=Bt+1){for(process.env.NODE_ENV!=="production"&&(e=e||new Map);n<at.length;n++){const r=at[n];if(r&&r.flags&2){if(t&&r.id!==t.uid||process.env.NODE_ENV!=="production"&&zo(e,r))continue;at.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Tc(t){if(or.length){const e=[...new Set(or)].sort((n,r)=>Wr(n)-Wr(r));if(or.length=0,dn){dn.push(...e);return}for(dn=e,process.env.NODE_ENV!=="production"&&(t=t||new Map),ar=0;ar<dn.length;ar++){const n=dn[ar];process.env.NODE_ENV!=="production"&&zo(t,n)||(n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2)}dn=null,ar=0}}const Wr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function wc(t){process.env.NODE_ENV!=="production"&&(t=t||new Map);const e=process.env.NODE_ENV!=="production"?n=>zo(t,n):Fe;try{for(Bt=0;Bt<at.length;Bt++){const n=at[Bt];if(n&&!(n.flags&8)){if(process.env.NODE_ENV!=="production"&&e(n))continue;n.flags&4&&(n.flags&=-2),ir(n,n.i,n.i?15:14),n.flags&4||(n.flags&=-2)}}}finally{for(;Bt<at.length;Bt++){const n=at[Bt];n&&(n.flags&=-2)}Bt=-1,at.length=0,Tc(t),ci=null,(at.length||or.length)&&wc(t)}}function zo(t,e){const n=t.get(e)||0;if(n>tm){const r=e.i,s=r&&Tu(r.type);return zr(`Maximum recursive updates exceeded${s?` in component <${s}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`,null,10),!0}return t.set(e,n+1),!1}let $t=!1;const hi=new Map;process.env.NODE_ENV!=="production"&&(Br().__VUE_HMR_RUNTIME__={createRecord:Wo(Ic),rerender:Wo(om),reload:Wo(am)});const kn=new Map;function sm(t){const e=t.type.__hmrId;let n=kn.get(e);n||(Ic(e,t.type),n=kn.get(e)),n.instances.add(t)}function im(t){kn.get(t.type.__hmrId).instances.delete(t)}function Ic(t,e){return kn.has(t)?!1:(kn.set(t,{initialDef:fi(e),instances:new Set}),!0)}function fi(t){return wu(t)?t.__vccOpts:t}function om(t,e){const n=kn.get(t);n&&(n.initialDef.render=e,[...n.instances].forEach(r=>{e&&(r.render=e,fi(r.type).render=e),r.renderCache=[],$t=!0,r.job.flags&8||r.update(),$t=!1}))}function am(t,e){const n=kn.get(t);if(!n)return;e=fi(e),Ac(n.initialDef,e);const r=[...n.instances];for(let s=0;s<r.length;s++){const i=r[s],a=fi(i.type);let l=hi.get(a);l||(a!==n.initialDef&&Ac(a,e),hi.set(a,l=new Set)),l.add(i),i.appContext.propsCache.delete(i.type),i.appContext.emitsCache.delete(i.type),i.appContext.optionsCache.delete(i.type),i.ceReload?(l.add(i),i.ceReload(e.styles),l.delete(i)):i.parent?ui(()=>{i.job.flags&8||($t=!0,i.parent.update(),$t=!1,l.delete(i))}):i.appContext.reload?i.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required."),i.root.ce&&i!==i.root&&i.root.ce._removeChildStyle(a)}vc(()=>{hi.clear()})}function Ac(t,e){Oe(t,e);for(const n in t)n!=="__file"&&!(n in e)&&delete t[n]}function Wo(t){return(e,n)=>{try{return t(e,n)}catch(r){console.error(r),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Pt,Gr=[],Go=!1;function Qr(t,...e){Pt?Pt.emit(t,...e):Go||Gr.push({event:t,args:e})}function Qo(t,e){var n,r;Pt=t,Pt?(Pt.enabled=!0,Gr.forEach(({event:s,args:i})=>Pt.emit(s,...i)),Gr=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(i=>{Qo(i,e)}),setTimeout(()=>{Pt||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Go=!0,Gr=[])},3e3)):(Go=!0,Gr=[])}function lm(t,e){Qr("app:init",t,e,{Fragment:_t,Text:es,Comment:yt,Static:wi})}function cm(t){Qr("app:unmount",t)}const um=Yo("component:added"),bc=Yo("component:updated"),hm=Yo("component:removed"),fm=t=>{Pt&&typeof Pt.cleanupBuffer=="function"&&!Pt.cleanupBuffer(t)&&hm(t)};function Yo(t){return e=>{Qr(t,e.appContext.app,e.uid,e.parent?e.parent.uid:void 0,e)}}const dm=Rc("perf:start"),pm=Rc("perf:end");function Rc(t){return(e,n,r)=>{Qr(t,e.appContext.app,e.uid,e,n,r)}}function mm(t,e,n){Qr("component:emit",t.appContext.app,t,e,n)}let lt=null,Vc=null;function di(t){const e=lt;return lt=t,Vc=t&&t.type.__scopeId||null,e}function gm(t,e=lt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&uu(-1);const i=di(e);let a;try{a=t(...s)}finally{di(i),r._d&&uu(1)}return process.env.NODE_ENV!=="production"&&bc(e),a};return r._n=!0,r._c=!0,r._d=!0,r}function Sc(t){ip(t)&&$("Do not use built-in directive ids as custom directive id: "+t)}function Nc(t,e){if(lt===null)return process.env.NODE_ENV!=="production"&&$("withDirectives can only be used inside render functions."),t;const n=Ri(lt),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,a,l,u=Te]=e[s];i&&(re(i)&&(i={mounted:i,updated:i}),i.deep&&Xt(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return t}function Mn(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(Nt(),Ut(u,n,8,[t.el,l,t,e]),Ct())}}const _m=Symbol("_vte"),ym=t=>t.__isTeleport,vm=Symbol("_leaveCb");function Xo(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Xo(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Em(t,e){return re(t)?Oe({name:t.name},e,{setup:t}):t}function Cc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Pc=new WeakSet,pi=new WeakMap;function Yr(t,e,n,r,s=!1){if(Z(t)){t.forEach((P,k)=>Yr(P,e&&(Z(e)?e[k]:e),n,r,s));return}if(Xr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Yr(t,e,n,r.component.subTree);return}const i=r.shapeFlag&4?Ri(r.component):r.el,a=s?null:i,{i:l,r:u}=t;if(process.env.NODE_ENV!=="production"&&!l){$("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const f=e&&e.r,d=l.refs===Te?l.refs={}:l.refs,p=l.setupState,v=le(p),I=p===Te?$l:P=>process.env.NODE_ENV!=="production"&&(fe(v,P)&&!xe(v[P])&&$(`Template ref "${P}" used on a non-ref value. It will not work in the production build.`),Pc.has(v[P]))?!1:fe(v,P),C=P=>process.env.NODE_ENV==="production"||!Pc.has(P);if(f!=null&&f!==u){if(Dc(e),Se(f))d[f]=null,I(f)&&(p[f]=null);else if(xe(f)){C(f)&&(f.value=null);const P=e;P.k&&(d[P.k]=null)}}if(re(u))ir(u,l,12,[a,d]);else{const P=Se(u),k=xe(u);if(P||k){const X=()=>{if(t.f){const K=P?I(u)?p[u]:d[u]:C(u)||!t.k?u.value:d[t.k];if(s)Z(K)&&bo(K,i);else if(Z(K))K.includes(i)||K.push(i);else if(P)d[u]=[i],I(u)&&(p[u]=d[u]);else{const W=[i];C(u)&&(u.value=W),t.k&&(d[t.k]=W)}}else P?(d[u]=a,I(u)&&(p[u]=a)):k?(C(u)&&(u.value=a),t.k&&(d[t.k]=a)):process.env.NODE_ENV!=="production"&&$("Invalid template ref type:",u,`(${typeof u})`)};if(a){const K=()=>{X(),pi.delete(t)};K.id=-1,pi.set(t,K),gt(K,n)}else Dc(t),X()}else process.env.NODE_ENV!=="production"&&$("Invalid template ref type:",u,`(${typeof u})`)}}function Dc(t){const e=pi.get(t);e&&(e.flags|=8,pi.delete(t))}Br().requestIdleCallback,Br().cancelIdleCallback;const Xr=t=>!!t.type.__asyncLoader,Jo=t=>t.type.__isKeepAlive;function Tm(t,e){Oc(t,"a",e)}function wm(t,e){Oc(t,"da",e)}function Oc(t,e,n=qe){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(mi(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Jo(s.parent.vnode)&&Im(r,e,n,s),s=s.parent}}function Im(t,e,n,r){const s=mi(e,t,r,!0);xc(()=>{bo(r[e],s)},n)}function mi(t,e,n=qe,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Nt();const l=is(n),u=Ut(e,n,t,a);return l(),Ct(),u});return r?s.unshift(i):s.push(i),i}else if(process.env.NODE_ENV!=="production"){const s=Nn(Ko[t].replace(/ hook$/,""));$(`${s} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Jt=t=>(e,n=qe)=>{(!os||t==="sp")&&mi(t,(...r)=>e(...r),n)},Am=Jt("bm"),bm=Jt("m"),Rm=Jt("bu"),Vm=Jt("u"),Sm=Jt("bum"),xc=Jt("um"),Nm=Jt("sp"),Cm=Jt("rtg"),Pm=Jt("rtc");function Dm(t,e=qe){mi("ec",t,e)}const Om=Symbol.for("v-ndc");function Zo(t,e,n,r){let s;const i=n,a=Z(t);if(a||Se(t)){const l=a&&Pn(t);let u=!1,f=!1;l&&(u=!ot(t),f=Lt(t),t=Js(t)),s=new Array(t.length);for(let d=0,p=t.length;d<p;d++)s[d]=e(u?f?si(je(t[d])):je(t[d]):t[d],d,void 0,i)}else if(typeof t=="number"){process.env.NODE_ENV!=="production"&&!Number.isInteger(t)&&$(`The v-for range expect an integer value but got ${t}.`),s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,i)}else if(Ee(t))if(t[Symbol.iterator])s=Array.from(t,(l,u)=>e(l,u,void 0,i));else{const l=Object.keys(t);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=e(t[d],d,u,i)}}else s=[];return s}const ea=t=>t?_u(t)?Ri(t):ea(t.parent):null,Fn=Oe(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>process.env.NODE_ENV!=="production"?Ft(t.props):t.props,$attrs:t=>process.env.NODE_ENV!=="production"?Ft(t.attrs):t.attrs,$slots:t=>process.env.NODE_ENV!=="production"?Ft(t.slots):t.slots,$refs:t=>process.env.NODE_ENV!=="production"?Ft(t.refs):t.refs,$parent:t=>ea(t.parent),$root:t=>ea(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Uc(t),$forceUpdate:t=>t.f||(t.f=()=>{ui(t.update)}),$nextTick:t=>t.n||(t.n=nm.bind(t.proxy)),$watch:t=>fg.bind(t)}),ta=t=>t==="_"||t==="$",na=(t,e)=>t!==Te&&!t.__isScriptSetup&&fe(t,e),kc={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=t;if(process.env.NODE_ENV!=="production"&&e==="__isVue")return!0;let f;if(e[0]!=="$"){const I=a[e];if(I!==void 0)switch(I){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(na(r,e))return a[e]=1,r[e];if(s!==Te&&fe(s,e))return a[e]=2,s[e];if((f=t.propsOptions[0])&&fe(f,e))return a[e]=3,i[e];if(n!==Te&&fe(n,e))return a[e]=4,n[e];ra&&(a[e]=0)}}const d=Fn[e];let p,v;if(d)return e==="$attrs"?(Le(t.attrs,"get",""),process.env.NODE_ENV!=="production"&&Ti()):process.env.NODE_ENV!=="production"&&e==="$slots"&&Le(t,"get",e),d(t);if((p=l.__cssModules)&&(p=p[e]))return p;if(n!==Te&&fe(n,e))return a[e]=4,n[e];if(v=u.config.globalProperties,fe(v,e))return v[e];process.env.NODE_ENV!=="production"&&lt&&(!Se(e)||e.indexOf("__v")!==0)&&(s!==Te&&ta(e[0])&&fe(s,e)?$(`Property ${JSON.stringify(e)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):t===lt&&$(`Property ${JSON.stringify(e)} was accessed during render but is not defined on instance.`))},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return na(s,e)?(s[e]=n,!0):process.env.NODE_ENV!=="production"&&s.__isScriptSetup&&fe(s,e)?($(`Cannot mutate <script setup> binding "${e}" from Options API.`),!1):r!==Te&&fe(r,e)?(r[e]=n,!0):fe(t.props,e)?(process.env.NODE_ENV!=="production"&&$(`Attempting to mutate prop "${e}". Props are readonly.`),!1):e[0]==="$"&&e.slice(1)in t?(process.env.NODE_ENV!=="production"&&$(`Attempting to mutate public property "${e}". Properties starting with $ are reserved and readonly.`),!1):(process.env.NODE_ENV!=="production"&&e in t.appContext.config.globalProperties?Object.defineProperty(i,e,{enumerable:!0,configurable:!0,value:n}):i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||t!==Te&&l[0]!=="$"&&fe(t,l)||na(e,l)||(u=i[0])&&fe(u,l)||fe(r,l)||fe(Fn,l)||fe(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:fe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};process.env.NODE_ENV!=="production"&&(kc.ownKeys=t=>($("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(t)));function xm(t){const e={};return Object.defineProperty(e,"_",{configurable:!0,enumerable:!1,get:()=>t}),Object.keys(Fn).forEach(n=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:()=>Fn[n](t),set:Fe})}),e}function km(t){const{ctx:e,propsOptions:[n]}=t;n&&Object.keys(n).forEach(r=>{Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>t.props[r],set:Fe})})}function Mm(t){const{ctx:e,setupState:n}=t;Object.keys(le(n)).forEach(r=>{if(!n.__isScriptSetup){if(ta(r[0])){$(`setup() return property ${JSON.stringify(r)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>n[r],set:Fe})}})}function Mc(t){return Z(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function Fm(){const t=Object.create(null);return(e,n)=>{t[n]?$(`${e} property "${n}" is already defined in ${t[n]}.`):t[n]=e}}let ra=!0;function Lm(t){const e=Uc(t),n=t.proxy,r=t.ctx;ra=!1,e.beforeCreate&&Fc(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:p,mounted:v,beforeUpdate:I,updated:C,activated:P,deactivated:k,beforeDestroy:X,beforeUnmount:K,destroyed:W,unmounted:pe,render:Q,renderTracked:he,renderTriggered:A,errorCaptured:_,serverPrefetch:y,expose:w,inheritAttrs:b,components:R,directives:E,filters:At}=e,pt=process.env.NODE_ENV!=="production"?Fm():null;if(process.env.NODE_ENV!=="production"){const[ce]=t.propsOptions;if(ce)for(const ae in ce)pt("Props",ae)}if(f&&Um(f,r,pt),a)for(const ce in a){const ae=a[ce];re(ae)?(process.env.NODE_ENV!=="production"?Object.defineProperty(r,ce,{value:ae.bind(n),configurable:!0,enumerable:!0,writable:!0}):r[ce]=ae.bind(n),process.env.NODE_ENV!=="production"&&pt("Methods",ce)):process.env.NODE_ENV!=="production"&&$(`Method "${ce}" has type "${typeof ae}" in the component definition. Did you reference the function correctly?`)}if(s){process.env.NODE_ENV!=="production"&&!re(s)&&$("The data option must be a function. Plain object usage is no longer supported.");const ce=s.call(n,n);if(process.env.NODE_ENV!=="production"&&Ro(ce)&&$("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Ee(ce))process.env.NODE_ENV!=="production"&&$("data() should return an object.");else if(t.data=jo(ce),process.env.NODE_ENV!=="production")for(const ae in ce)pt("Data",ae),ta(ae[0])||Object.defineProperty(r,ae,{configurable:!0,enumerable:!0,get:()=>ce[ae],set:Fe})}if(ra=!0,i)for(const ce in i){const ae=i[ce],mt=re(ae)?ae.bind(n,n):re(ae.get)?ae.get.bind(n,n):Fe;process.env.NODE_ENV!=="production"&&mt===Fe&&$(`Computed property "${ce}" has no getter.`);const Nr=!re(ae)&&re(ae.set)?ae.set.bind(n):process.env.NODE_ENV!=="production"?()=>{$(`Write operation failed: computed property "${ce}" is readonly.`)}:Fe,Qn=Iu({get:mt,set:Nr});Object.defineProperty(r,ce,{enumerable:!0,configurable:!0,get:()=>Qn.value,set:ht=>Qn.value=ht}),process.env.NODE_ENV!=="production"&&pt("Computed",ce)}if(l)for(const ce in l)Lc(l[ce],r,n,ce);if(u){const ce=re(u)?u.call(n):u;Reflect.ownKeys(ce).forEach(ae=>{Km(ae,ce[ae])})}d&&Fc(d,t,"c");function tt(ce,ae){Z(ae)?ae.forEach(mt=>ce(mt.bind(n))):ae&&ce(ae.bind(n))}if(tt(Am,p),tt(bm,v),tt(Rm,I),tt(Vm,C),tt(Tm,P),tt(wm,k),tt(Dm,_),tt(Pm,he),tt(Cm,A),tt(Sm,K),tt(xc,pe),tt(Nm,y),Z(w))if(w.length){const ce=t.exposed||(t.exposed={});w.forEach(ae=>{Object.defineProperty(ce,ae,{get:()=>n[ae],set:mt=>n[ae]=mt,enumerable:!0})})}else t.exposed||(t.exposed={});Q&&t.render===Fe&&(t.render=Q),b!=null&&(t.inheritAttrs=b),R&&(t.components=R),E&&(t.directives=E),y&&Cc(t)}function Um(t,e,n=Fe){Z(t)&&(t=sa(t));for(const r in t){const s=t[r];let i;Ee(s)?"default"in s?i=_i(s.from||r,s.default,!0):i=_i(s.from||r):i=_i(s),xe(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[r]=i,process.env.NODE_ENV!=="production"&&n("Inject",r)}}function Fc(t,e,n){Ut(Z(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Lc(t,e,n,r){let s=r.includes(".")?ru(n,r):()=>n[r];if(Se(t)){const i=e[t];re(i)?ua(s,i):process.env.NODE_ENV!=="production"&&$(`Invalid watch handler specified by key "${t}"`,i)}else if(re(t))ua(s,t.bind(n));else if(Ee(t))if(Z(t))t.forEach(i=>Lc(i,e,n,r));else{const i=re(t.handler)?t.handler.bind(n):e[t.handler];re(i)?ua(s,i,t):process.env.NODE_ENV!=="production"&&$(`Invalid watch handler specified by key "${t.handler}"`,i)}else process.env.NODE_ENV!=="production"&&$(`Invalid watch option: "${r}"`,t)}function Uc(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,l=i.get(e);let u;return l?u=l:!s.length&&!n&&!r?u=e:(u={},s.length&&s.forEach(f=>gi(u,f,a,!0)),gi(u,e,a)),Ee(e)&&i.set(e,u),u}function gi(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&gi(t,i,n,!0),s&&s.forEach(a=>gi(t,a,n,!0));for(const a in e)if(r&&a==="expose")process.env.NODE_ENV!=="production"&&$('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const l=Bm[a]||n&&n[a];t[a]=l?l(t[a],e[a]):e[a]}return t}const Bm={data:Bc,props:$c,emits:$c,methods:Jr,computed:Jr,beforeCreate:ct,created:ct,beforeMount:ct,mounted:ct,beforeUpdate:ct,updated:ct,beforeDestroy:ct,beforeUnmount:ct,destroyed:ct,unmounted:ct,activated:ct,deactivated:ct,errorCaptured:ct,serverPrefetch:ct,components:Jr,directives:Jr,watch:jm,provide:Bc,inject:$m};function Bc(t,e){return e?t?function(){return Oe(re(t)?t.call(this,this):t,re(e)?e.call(this,this):e)}:e:t}function $m(t,e){return Jr(sa(t),sa(e))}function sa(t){if(Z(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ct(t,e){return t?[...new Set([].concat(t,e))]:e}function Jr(t,e){return t?Oe(Object.create(null),t,e):e}function $c(t,e){return t?Z(t)&&Z(e)?[...new Set([...t,...e])]:Oe(Object.create(null),Mc(t),Mc(e??{})):e}function jm(t,e){if(!t)return e;if(!e)return t;const n=Oe(Object.create(null),t);for(const r in e)n[r]=ct(t[r],e[r]);return n}function jc(){return{app:null,config:{isNativeTag:$l,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let qm=0;function Hm(t,e){return function(r,s=null){re(r)||(r=Oe({},r)),s!=null&&!Ee(s)&&(process.env.NODE_ENV!=="production"&&$("root props passed to app.mount() must be an object."),s=null);const i=jc(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:qm++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Au,get config(){return i.config},set config(d){process.env.NODE_ENV!=="production"&&$("app.config cannot be replaced. Modify individual options instead.")},use(d,...p){return a.has(d)?process.env.NODE_ENV!=="production"&&$("Plugin has already been applied to target app."):d&&re(d.install)?(a.add(d),d.install(f,...p)):re(d)?(a.add(d),d(f,...p)):process.env.NODE_ENV!=="production"&&$('A plugin must either be a function or an object with an "install" function.'),f},mixin(d){return i.mixins.includes(d)?process.env.NODE_ENV!=="production"&&$("Mixin has already been applied to target app"+(d.name?`: ${d.name}`:"")):i.mixins.push(d),f},component(d,p){return process.env.NODE_ENV!=="production"&&ma(d,i.config),p?(process.env.NODE_ENV!=="production"&&i.components[d]&&$(`Component "${d}" has already been registered in target app.`),i.components[d]=p,f):i.components[d]},directive(d,p){return process.env.NODE_ENV!=="production"&&Sc(d),p?(process.env.NODE_ENV!=="production"&&i.directives[d]&&$(`Directive "${d}" has already been registered in target app.`),i.directives[d]=p,f):i.directives[d]},mount(d,p,v){if(u)process.env.NODE_ENV!=="production"&&$("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{process.env.NODE_ENV!=="production"&&d.__vue_app__&&$("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const I=f._ceVNode||en(r,s);return I.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),process.env.NODE_ENV!=="production"&&(i.reload=()=>{const C=pn(I);C.el=null,t(C,d,v)}),t(I,d,v),u=!0,f._container=d,d.__vue_app__=f,process.env.NODE_ENV!=="production"&&(f._instance=I.component,lm(f,Au)),Ri(I.component)}},onUnmount(d){process.env.NODE_ENV!=="production"&&typeof d!="function"&&$(`Expected function as first argument to app.onUnmount(), but got ${typeof d}`),l.push(d)},unmount(){u?(Ut(l,f._instance,16),t(null,f._container),process.env.NODE_ENV!=="production"&&(f._instance=null,cm(f)),delete f._container.__vue_app__):process.env.NODE_ENV!=="production"&&$("Cannot unmount an app that is not mounted.")},provide(d,p){return process.env.NODE_ENV!=="production"&&d in i.provides&&(fe(i.provides,d)?$(`App already provides property with key "${String(d)}". It will be overwritten with the new value.`):$(`App already provides property with key "${String(d)}" inherited from its parent element. It will be overwritten with the new value.`)),i.provides[d]=p,f},runWithContext(d){const p=lr;lr=f;try{return d()}finally{lr=p}}};return f}}let lr=null;function Km(t,e){if(!qe)process.env.NODE_ENV!=="production"&&$("provide() can only be used inside setup().");else{let n=qe.provides;const r=qe.parent&&qe.parent.provides;r===n&&(n=qe.provides=Object.create(r)),n[t]=e}}function _i(t,e,n=!1){const r=mu();if(r||lr){let s=lr?lr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&re(e)?e.call(r&&r.proxy):e;process.env.NODE_ENV!=="production"&&$(`injection "${String(t)}" not found.`)}else process.env.NODE_ENV!=="production"&&$("inject() can only be used inside setup() or functional components.")}const qc={},Hc=()=>Object.create(qc),Kc=t=>Object.getPrototypeOf(t)===qc;function zm(t,e,n,r=!1){const s={},i=Hc();t.propsDefaults=Object.create(null),zc(t,e,s,i);for(const a in t.propsOptions[0])a in s||(s[a]=void 0);process.env.NODE_ENV!=="production"&&Qc(e||{},s,t),n?t.props=r?s:Bp(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function Wm(t){for(;t;){if(t.type.__hmrId)return!0;t=t.parent}}function Gm(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=t,l=le(s),[u]=t.propsOptions;let f=!1;if(!(process.env.NODE_ENV!=="production"&&Wm(t))&&(r||a>0)&&!(a&16)){if(a&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Ei(t.emitsOptions,v))continue;const I=e[v];if(u)if(fe(i,v))I!==i[v]&&(i[v]=I,f=!0);else{const C=Rt(v);s[C]=ia(u,l,C,I,t,!1)}else I!==i[v]&&(i[v]=I,f=!0)}}}else{zc(t,e,s,i)&&(f=!0);let d;for(const p in l)(!e||!fe(e,p)&&((d=un(p))===p||!fe(e,d)))&&(u?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=ia(u,l,p,void 0,t,!0)):delete s[p]);if(i!==l)for(const p in i)(!e||!fe(e,p))&&(delete i[p],f=!0)}f&&Mt(t.attrs,"set",""),process.env.NODE_ENV!=="production"&&Qc(e||{},s,t)}function zc(t,e,n,r){const[s,i]=t.propsOptions;let a=!1,l;if(e)for(let u in e){if(Ur(u))continue;const f=e[u];let d;s&&fe(s,d=Rt(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Ei(t.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=le(n),f=l||Te;for(let d=0;d<i.length;d++){const p=i[d];n[p]=ia(s,u,p,f[p],t,!fe(f,p))}}return a}function ia(t,e,n,r,s,i){const a=t[n];if(a!=null){const l=fe(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&re(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=is(s);r=f[n]=u.call(null,e),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===un(n))&&(r=!0))}return r}const Qm=new WeakMap;function Wc(t,e,n=!1){const r=n?Qm:e.propsCache,s=r.get(t);if(s)return s;const i=t.props,a={},l=[];let u=!1;if(!re(t)){const d=p=>{u=!0;const[v,I]=Wc(p,e,!0);Oe(a,v),I&&l.push(...I)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!i&&!u)return Ee(t)&&r.set(t,nr),nr;if(Z(i))for(let d=0;d<i.length;d++){process.env.NODE_ENV!=="production"&&!Se(i[d])&&$("props must be strings when using array syntax.",i[d]);const p=Rt(i[d]);Gc(p)&&(a[p]=Te)}else if(i){process.env.NODE_ENV!=="production"&&!Ee(i)&&$("invalid props options",i);for(const d in i){const p=Rt(d);if(Gc(p)){const v=i[d],I=a[p]=Z(v)||re(v)?{type:v}:Oe({},v),C=I.type;let P=!1,k=!0;if(Z(C))for(let X=0;X<C.length;++X){const K=C[X],W=re(K)&&K.name;if(W==="Boolean"){P=!0;break}else W==="String"&&(k=!1)}else P=re(C)&&C.name==="Boolean";I[0]=P,I[1]=k,(P||fe(I,"default"))&&l.push(p)}}}const f=[a,l];return Ee(t)&&r.set(t,f),f}function Gc(t){return t[0]!=="$"&&!Ur(t)?!0:(process.env.NODE_ENV!=="production"&&$(`Invalid prop name: "${t}" is a reserved property.`),!1)}function Ym(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function Qc(t,e,n){const r=le(e),s=n.propsOptions[0],i=Object.keys(t).map(a=>Rt(a));for(const a in s){let l=s[a];l!=null&&Xm(a,r[a],l,process.env.NODE_ENV!=="production"?Ft(r):r,!i.includes(a))}}function Xm(t,e,n,r,s){const{type:i,required:a,validator:l,skipCheck:u}=n;if(a&&s){$('Missing required prop: "'+t+'"');return}if(!(e==null&&!a)){if(i!=null&&i!==!0&&!u){let f=!1;const d=Z(i)?i:[i],p=[];for(let v=0;v<d.length&&!f;v++){const{valid:I,expectedType:C}=Zm(e,d[v]);p.push(C||""),f=I}if(!f){$(eg(t,e,p));return}}l&&!l(e,r)&&$('Invalid prop: custom validator check failed for prop "'+t+'".')}}const Jm=Qt("String,Number,Boolean,Function,Symbol,BigInt");function Zm(t,e){let n;const r=Ym(e);if(r==="null")n=t===null;else if(Jm(r)){const s=typeof t;n=s===r.toLowerCase(),!n&&s==="object"&&(n=t instanceof e)}else r==="Object"?n=Ee(t):r==="Array"?n=Z(t):n=t instanceof e;return{valid:n,expectedType:r}}function eg(t,e,n){if(n.length===0)return`Prop type [] for prop "${t}" won't match anything. Did you mean to use type Array instead?`;let r=`Invalid prop: type check failed for prop "${t}". Expected ${n.map(Ws).join(" | ")}`;const s=n[0],i=Vo(e),a=Yc(e,s),l=Yc(e,i);return n.length===1&&Xc(s)&&!tg(s,i)&&(r+=` with value ${a}`),r+=`, got ${i} `,Xc(i)&&(r+=`with value ${l}.`),r}function Yc(t,e){return e==="String"?`"${t}"`:e==="Number"?`${Number(t)}`:`${t}`}function Xc(t){return["string","number","boolean"].some(n=>t.toLowerCase()===n)}function tg(...t){return t.some(e=>e.toLowerCase()==="boolean")}const oa=t=>t==="_"||t==="_ctx"||t==="$stable",aa=t=>Z(t)?t.map(Dt):[Dt(t)],ng=(t,e,n)=>{if(e._n)return e;const r=gm((...s)=>(process.env.NODE_ENV!=="production"&&qe&&!(n===null&&lt)&&!(n&&n.root!==qe.root)&&$(`Slot "${t}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),aa(e(...s))),n);return r._c=!1,r},Jc=(t,e,n)=>{const r=t._ctx;for(const s in t){if(oa(s))continue;const i=t[s];if(re(i))e[s]=ng(s,i,r);else if(i!=null){process.env.NODE_ENV!=="production"&&$(`Non-function value encountered for slot "${s}". Prefer function slots for better performance.`);const a=aa(i);e[s]=()=>a}}},Zc=(t,e)=>{process.env.NODE_ENV!=="production"&&!Jo(t.vnode)&&$("Non-function value encountered for default slot. Prefer function slots for better performance.");const n=aa(e);t.slots.default=()=>n},la=(t,e,n)=>{for(const r in e)(n||!oa(r))&&(t[r]=e[r])},rg=(t,e,n)=>{const r=t.slots=Hc();if(t.vnode.shapeFlag&32){const s=e._;s?(la(r,e,n),n&&Gs(r,"_",s,!0)):Jc(e,r)}else e&&Zc(t,e)},sg=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,a=Te;if(r.shapeFlag&32){const l=e._;l?process.env.NODE_ENV!=="production"&&$t?(la(s,e,n),Mt(t,"set","$slots")):n&&l===1?i=!1:la(s,e,n):(i=!e.$stable,Jc(e,s)),a=e}else e&&(Zc(t,e),a={default:1});if(i)for(const l in s)!oa(l)&&a[l]==null&&delete s[l]};let Zr,Zt;function cr(t,e){t.appContext.config.performance&&yi()&&Zt.mark(`vue-${e}-${t.uid}`),process.env.NODE_ENV!=="production"&&dm(t,e,yi()?Zt.now():Date.now())}function ur(t,e){if(t.appContext.config.performance&&yi()){const n=`vue-${e}-${t.uid}`,r=n+":end",s=`<${Vi(t,t.type)}> ${e}`;Zt.mark(r),Zt.measure(s,n,r),Zt.clearMeasures(s),Zt.clearMarks(n),Zt.clearMarks(r)}process.env.NODE_ENV!=="production"&&pm(t,e,yi()?Zt.now():Date.now())}function yi(){return Zr!==void 0||(typeof window<"u"&&window.performance?(Zr=!0,Zt=window.performance):Zr=!1),Zr}function ig(){const t=[];if(process.env.NODE_ENV!=="production"&&t.length){const e=t.length>1;console.warn(`Feature flag${e?"s":""} ${t.join(", ")} ${e?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const gt=Eg;function og(t){return ag(t)}function ag(t,e){ig();const n=Br();n.__VUE__=!0,process.env.NODE_ENV!=="production"&&Qo(n.__VUE_DEVTOOLS_GLOBAL_HOOK__,n);const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:p,nextSibling:v,setScopeId:I=Fe,insertStaticContent:C}=t,P=(g,T,N,F=null,D=null,O=null,j=void 0,B=null,U=process.env.NODE_ENV!=="production"&&$t?!1:!!T.dynamicChildren)=>{if(g===T)return;g&&!rs(g,T)&&(F=Cr(g),be(g,D,O,!0),g=null),T.patchFlag===-2&&(U=!1,T.dynamicChildren=null);const{type:x,ref:J,shapeFlag:H}=T;switch(x){case es:k(g,T,N,F);break;case yt:X(g,T,N,F);break;case wi:g==null?K(T,N,F,j):process.env.NODE_ENV!=="production"&&W(g,T,N,j);break;case _t:E(g,T,N,F,D,O,j,B,U);break;default:H&1?he(g,T,N,F,D,O,j,B,U):H&6?At(g,T,N,F,D,O,j,B,U):H&64||H&128?x.process(g,T,N,F,D,O,j,B,U,Gt):process.env.NODE_ENV!=="production"&&$("Invalid VNode type:",x,`(${typeof x})`)}J!=null&&D?Yr(J,g&&g.ref,O,T||g,!T):J==null&&g&&g.ref!=null&&Yr(g.ref,null,O,g,!0)},k=(g,T,N,F)=>{if(g==null)r(T.el=l(T.children),N,F);else{const D=T.el=g.el;T.children!==g.children&&f(D,T.children)}},X=(g,T,N,F)=>{g==null?r(T.el=u(T.children||""),N,F):T.el=g.el},K=(g,T,N,F)=>{[g.el,g.anchor]=C(g.children,T,N,F,g.el,g.anchor)},W=(g,T,N,F)=>{if(T.children!==g.children){const D=v(g.anchor);Q(g),[T.el,T.anchor]=C(T.children,N,D,F)}else T.el=g.el,T.anchor=g.anchor},pe=({el:g,anchor:T},N,F)=>{let D;for(;g&&g!==T;)D=v(g),r(g,N,F),g=D;r(T,N,F)},Q=({el:g,anchor:T})=>{let N;for(;g&&g!==T;)N=v(g),s(g),g=N;s(T)},he=(g,T,N,F,D,O,j,B,U)=>{if(T.type==="svg"?j="svg":T.type==="math"&&(j="mathml"),g==null)A(T,N,F,D,O,j,B,U);else{const x=g.el&&g.el._isVueCE?g.el:null;try{x&&x._beginPatch(),w(g,T,D,O,j,B,U)}finally{x&&x._endPatch()}}},A=(g,T,N,F,D,O,j,B)=>{let U,x;const{props:J,shapeFlag:H,transition:Y,dirs:G}=g;if(U=g.el=a(g.type,O,J&&J.is,J),H&8?d(U,g.children):H&16&&y(g.children,U,null,F,D,ca(g,O),j,B),G&&Mn(g,null,F,"created"),_(U,g,g.scopeId,j,F),J){for(const _e in J)_e!=="value"&&!Ur(_e)&&i(U,_e,null,J[_e],O,F);"value"in J&&i(U,"value",null,J.value,O),(x=J.onVnodeBeforeMount)&&jt(x,F,g)}process.env.NODE_ENV!=="production"&&(Gs(U,"__vnode",g,!0),Gs(U,"__vueParentComponent",F,!0)),G&&Mn(g,null,F,"beforeMount");const ne=lg(D,Y);ne&&Y.beforeEnter(U),r(U,T,N),((x=J&&J.onVnodeMounted)||ne||G)&&gt(()=>{x&&jt(x,F,g),ne&&Y.enter(U),G&&Mn(g,null,F,"mounted")},D)},_=(g,T,N,F,D)=>{if(N&&I(g,N),F)for(let O=0;O<F.length;O++)I(g,F[O]);if(D){let O=D.subTree;if(process.env.NODE_ENV!=="production"&&O.patchFlag>0&&O.patchFlag&2048&&(O=fa(O.children)||O),T===O||cu(O.type)&&(O.ssContent===T||O.ssFallback===T)){const j=D.vnode;_(g,j,j.scopeId,j.slotScopeIds,D.parent)}}},y=(g,T,N,F,D,O,j,B,U=0)=>{for(let x=U;x<g.length;x++){const J=g[x]=B?mn(g[x]):Dt(g[x]);P(null,J,T,N,F,D,O,j,B)}},w=(g,T,N,F,D,O,j)=>{const B=T.el=g.el;process.env.NODE_ENV!=="production"&&(B.__vnode=T);let{patchFlag:U,dynamicChildren:x,dirs:J}=T;U|=g.patchFlag&16;const H=g.props||Te,Y=T.props||Te;let G;if(N&&Ln(N,!1),(G=Y.onVnodeBeforeUpdate)&&jt(G,N,T,g),J&&Mn(T,g,N,"beforeUpdate"),N&&Ln(N,!0),process.env.NODE_ENV!=="production"&&$t&&(U=0,j=!1,x=null),(H.innerHTML&&Y.innerHTML==null||H.textContent&&Y.textContent==null)&&d(B,""),x?(b(g.dynamicChildren,x,B,N,F,ca(T,D),O),process.env.NODE_ENV!=="production"&&vi(g,T)):j||mt(g,T,B,null,N,F,ca(T,D),O,!1),U>0){if(U&16)R(B,H,Y,N,D);else if(U&2&&H.class!==Y.class&&i(B,"class",null,Y.class,D),U&4&&i(B,"style",H.style,Y.style,D),U&8){const ne=T.dynamicProps;for(let _e=0;_e<ne.length;_e++){const ye=ne[_e],Ge=H[ye],nt=Y[ye];(nt!==Ge||ye==="value")&&i(B,ye,Ge,nt,D,N)}}U&1&&g.children!==T.children&&d(B,T.children)}else!j&&x==null&&R(B,H,Y,N,D);((G=Y.onVnodeUpdated)||J)&&gt(()=>{G&&jt(G,N,T,g),J&&Mn(T,g,N,"updated")},F)},b=(g,T,N,F,D,O,j)=>{for(let B=0;B<T.length;B++){const U=g[B],x=T[B],J=U.el&&(U.type===_t||!rs(U,x)||U.shapeFlag&198)?p(U.el):N;P(U,x,J,null,F,D,O,j,!0)}},R=(g,T,N,F,D)=>{if(T!==N){if(T!==Te)for(const O in T)!Ur(O)&&!(O in N)&&i(g,O,T[O],null,D,F);for(const O in N){if(Ur(O))continue;const j=N[O],B=T[O];j!==B&&O!=="value"&&i(g,O,B,j,D,F)}"value"in N&&i(g,"value",T.value,N.value,D)}},E=(g,T,N,F,D,O,j,B,U)=>{const x=T.el=g?g.el:l(""),J=T.anchor=g?g.anchor:l("");let{patchFlag:H,dynamicChildren:Y,slotScopeIds:G}=T;process.env.NODE_ENV!=="production"&&($t||H&2048)&&(H=0,U=!1,Y=null),G&&(B=B?B.concat(G):G),g==null?(r(x,N,F),r(J,N,F),y(T.children||[],N,J,D,O,j,B,U)):H>0&&H&64&&Y&&g.dynamicChildren?(b(g.dynamicChildren,Y,N,D,O,j,B),process.env.NODE_ENV!=="production"?vi(g,T):(T.key!=null||D&&T===D.subTree)&&vi(g,T,!0)):mt(g,T,N,J,D,O,j,B,U)},At=(g,T,N,F,D,O,j,B,U)=>{T.slotScopeIds=B,g==null?T.shapeFlag&512?D.ctx.activate(T,N,F,j,U):pt(T,N,F,D,O,j,U):tt(g,T,U)},pt=(g,T,N,F,D,O,j)=>{const B=g.component=Ng(g,F,D);if(process.env.NODE_ENV!=="production"&&B.type.__hmrId&&sm(B),process.env.NODE_ENV!=="production"&&(ai(g),cr(B,"mount")),Jo(g)&&(B.ctx.renderer=Gt),process.env.NODE_ENV!=="production"&&cr(B,"init"),Pg(B,!1,j),process.env.NODE_ENV!=="production"&&ur(B,"init"),process.env.NODE_ENV!=="production"&&$t&&(g.el=null),B.asyncDep){if(D&&D.registerDep(B,ce,j),!g.el){const U=B.subTree=en(yt);X(null,U,T,N),g.placeholder=U.el}}else ce(B,g,T,N,D,O,j);process.env.NODE_ENV!=="production"&&(li(),ur(B,"mount"))},tt=(g,T,N)=>{const F=T.component=g.component;if(yg(g,T,N))if(F.asyncDep&&!F.asyncResolved){process.env.NODE_ENV!=="production"&&ai(T),ae(F,T,N),process.env.NODE_ENV!=="production"&&li();return}else F.next=T,F.update();else T.el=g.el,F.vnode=T},ce=(g,T,N,F,D,O,j)=>{const B=()=>{if(g.isMounted){let{next:H,bu:Y,u:G,parent:ne,vnode:_e}=g;{const Et=eu(g);if(Et){H&&(H.el=_e.el,ae(g,H,j)),Et.asyncDep.then(()=>{g.isUnmounted||B()});return}}let ye=H,Ge;process.env.NODE_ENV!=="production"&&ai(H||g.vnode),Ln(g,!1),H?(H.el=_e.el,ae(g,H,j)):H=_e,Y&&rr(Y),(Ge=H.props&&H.props.onVnodeBeforeUpdate)&&jt(Ge,ne,H,_e),Ln(g,!0),process.env.NODE_ENV!=="production"&&cr(g,"render");const nt=iu(g);process.env.NODE_ENV!=="production"&&ur(g,"render");const rt=g.subTree;g.subTree=nt,process.env.NODE_ENV!=="production"&&cr(g,"patch"),P(rt,nt,p(rt.el),Cr(rt),g,D,O),process.env.NODE_ENV!=="production"&&ur(g,"patch"),H.el=nt.el,ye===null&&vg(g,nt.el),G&&gt(G,D),(Ge=H.props&&H.props.onVnodeUpdated)&&gt(()=>jt(Ge,ne,H,_e),D),process.env.NODE_ENV!=="production"&&bc(g),process.env.NODE_ENV!=="production"&&li()}else{let H;const{el:Y,props:G}=T,{bm:ne,m:_e,parent:ye,root:Ge,type:nt}=g,rt=Xr(T);Ln(g,!1),ne&&rr(ne),!rt&&(H=G&&G.onVnodeBeforeMount)&&jt(H,ye,T),Ln(g,!0);{Ge.ce&&Ge.ce._def.shadowRoot!==!1&&Ge.ce._injectChildStyle(nt),process.env.NODE_ENV!=="production"&&cr(g,"render");const Et=g.subTree=iu(g);process.env.NODE_ENV!=="production"&&ur(g,"render"),process.env.NODE_ENV!=="production"&&cr(g,"patch"),P(null,Et,N,F,g,D,O),process.env.NODE_ENV!=="production"&&ur(g,"patch"),T.el=Et.el}if(_e&&gt(_e,D),!rt&&(H=G&&G.onVnodeMounted)){const Et=T;gt(()=>jt(H,ye,Et),D)}(T.shapeFlag&256||ye&&Xr(ye.vnode)&&ye.vnode.shapeFlag&256)&&g.a&&gt(g.a,D),g.isMounted=!0,process.env.NODE_ENV!=="production"&&um(g),T=N=F=null}};g.scope.on();const U=g.effect=new Yl(B);g.scope.off();const x=g.update=U.run.bind(U),J=g.job=U.runIfDirty.bind(U);J.i=g,J.id=g.uid,U.scheduler=()=>ui(J),Ln(g,!0),process.env.NODE_ENV!=="production"&&(U.onTrack=g.rtc?H=>rr(g.rtc,H):void 0,U.onTrigger=g.rtg?H=>rr(g.rtg,H):void 0),x()},ae=(g,T,N)=>{T.component=g;const F=g.vnode.props;g.vnode=T,g.next=null,Gm(g,T.props,F,N),sg(g,T.children,N),Nt(),Ec(g),Ct()},mt=(g,T,N,F,D,O,j,B,U=!1)=>{const x=g&&g.children,J=g?g.shapeFlag:0,H=T.children,{patchFlag:Y,shapeFlag:G}=T;if(Y>0){if(Y&128){Qn(x,H,N,F,D,O,j,B,U);return}else if(Y&256){Nr(x,H,N,F,D,O,j,B,U);return}}G&8?(J&16&&Wt(x,D,O),H!==x&&d(N,H)):J&16?G&16?Qn(x,H,N,F,D,O,j,B,U):Wt(x,D,O,!0):(J&8&&d(N,""),G&16&&y(H,N,F,D,O,j,B,U))},Nr=(g,T,N,F,D,O,j,B,U)=>{g=g||nr,T=T||nr;const x=g.length,J=T.length,H=Math.min(x,J);let Y;for(Y=0;Y<H;Y++){const G=T[Y]=U?mn(T[Y]):Dt(T[Y]);P(g[Y],G,N,null,D,O,j,B,U)}x>J?Wt(g,D,O,!0,!1,H):y(T,N,F,D,O,j,B,U,H)},Qn=(g,T,N,F,D,O,j,B,U)=>{let x=0;const J=T.length;let H=g.length-1,Y=J-1;for(;x<=H&&x<=Y;){const G=g[x],ne=T[x]=U?mn(T[x]):Dt(T[x]);if(rs(G,ne))P(G,ne,N,null,D,O,j,B,U);else break;x++}for(;x<=H&&x<=Y;){const G=g[H],ne=T[Y]=U?mn(T[Y]):Dt(T[Y]);if(rs(G,ne))P(G,ne,N,null,D,O,j,B,U);else break;H--,Y--}if(x>H){if(x<=Y){const G=Y+1,ne=G<J?T[G].el:F;for(;x<=Y;)P(null,T[x]=U?mn(T[x]):Dt(T[x]),N,ne,D,O,j,B,U),x++}}else if(x>Y)for(;x<=H;)be(g[x],D,O,!0),x++;else{const G=x,ne=x,_e=new Map;for(x=ne;x<=Y;x++){const Qe=T[x]=U?mn(T[x]):Dt(T[x]);Qe.key!=null&&(process.env.NODE_ENV!=="production"&&_e.has(Qe.key)&&$("Duplicate keys found during update:",JSON.stringify(Qe.key),"Make sure keys are unique."),_e.set(Qe.key,x))}let ye,Ge=0;const nt=Y-ne+1;let rt=!1,Et=0;const An=new Array(nt);for(x=0;x<nt;x++)An[x]=0;for(x=G;x<=H;x++){const Qe=g[x];if(Ge>=nt){be(Qe,D,O,!0);continue}let bt;if(Qe.key!=null)bt=_e.get(Qe.key);else for(ye=ne;ye<=Y;ye++)if(An[ye-ne]===0&&rs(Qe,T[ye])){bt=ye;break}bt===void 0?be(Qe,D,O,!0):(An[bt-ne]=x+1,bt>=Et?Et=bt:rt=!0,P(Qe,T[bt],N,null,D,O,j,B,U),Ge++)}const Pr=rt?cg(An):nr;for(ye=Pr.length-1,x=nt-1;x>=0;x--){const Qe=ne+x,bt=T[Qe],Dr=T[Qe+1],Ds=Qe+1<J?Dr.el||Dr.placeholder:F;An[x]===0?P(null,bt,N,Ds,D,O,j,B,U):rt&&(ye<0||x!==Pr[ye]?ht(bt,N,Ds,2):ye--)}}},ht=(g,T,N,F,D=null)=>{const{el:O,type:j,transition:B,children:U,shapeFlag:x}=g;if(x&6){ht(g.component.subTree,T,N,F);return}if(x&128){g.suspense.move(T,N,F);return}if(x&64){j.move(g,T,N,Gt);return}if(j===_t){r(O,T,N);for(let H=0;H<U.length;H++)ht(U[H],T,N,F);r(g.anchor,T,N);return}if(j===wi){pe(g,T,N);return}if(F!==2&&x&1&&B)if(F===0)B.beforeEnter(O),r(O,T,N),gt(()=>B.enter(O),D);else{const{leave:H,delayLeave:Y,afterLeave:G}=B,ne=()=>{g.ctx.isUnmounted?s(O):r(O,T,N)},_e=()=>{O._isLeaving&&O[vm](!0),H(O,()=>{ne(),G&&G()})};Y?Y(O,ne,_e):_e()}else r(O,T,N)},be=(g,T,N,F=!1,D=!1)=>{const{type:O,props:j,ref:B,children:U,dynamicChildren:x,shapeFlag:J,patchFlag:H,dirs:Y,cacheIndex:G}=g;if(H===-2&&(D=!1),B!=null&&(Nt(),Yr(B,null,N,g,!0),Ct()),G!=null&&(T.renderCache[G]=void 0),J&256){T.ctx.deactivate(g);return}const ne=J&1&&Y,_e=!Xr(g);let ye;if(_e&&(ye=j&&j.onVnodeBeforeUnmount)&&jt(ye,T,g),J&6)Rl(g.component,N,F);else{if(J&128){g.suspense.unmount(N,F);return}ne&&Mn(g,null,T,"beforeUnmount"),J&64?g.type.remove(g,T,N,Gt,F):x&&!x.hasOnce&&(O!==_t||H>0&&H&64)?Wt(x,T,N,!1,!0):(O===_t&&H&384||!D&&J&16)&&Wt(U,T,N),F&&Cs(g)}(_e&&(ye=j&&j.onVnodeUnmounted)||ne)&&gt(()=>{ye&&jt(ye,T,g),ne&&Mn(g,null,T,"unmounted")},N)},Cs=g=>{const{type:T,el:N,anchor:F,transition:D}=g;if(T===_t){process.env.NODE_ENV!=="production"&&g.patchFlag>0&&g.patchFlag&2048&&D&&!D.persisted?g.children.forEach(j=>{j.type===yt?s(j.el):Cs(j)}):Yn(N,F);return}if(T===wi){Q(g);return}const O=()=>{s(N),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(g.shapeFlag&1&&D&&!D.persisted){const{leave:j,delayLeave:B}=D,U=()=>j(N,O);B?B(g.el,O,U):U()}else O()},Yn=(g,T)=>{let N;for(;g!==T;)N=v(g),s(g),g=N;s(T)},Rl=(g,T,N)=>{process.env.NODE_ENV!=="production"&&g.type.__hmrId&&im(g);const{bum:F,scope:D,job:O,subTree:j,um:B,m:U,a:x}=g;tu(U),tu(x),F&&rr(F),D.stop(),O&&(O.flags|=8,be(j,g,T,N)),B&&gt(B,T),gt(()=>{g.isUnmounted=!0},T),process.env.NODE_ENV!=="production"&&fm(g)},Wt=(g,T,N,F=!1,D=!1,O=0)=>{for(let j=O;j<g.length;j++)be(g[j],T,N,F,D)},Cr=g=>{if(g.shapeFlag&6)return Cr(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const T=v(g.anchor||g.el),N=T&&T[_m];return N?v(N):T};let Ps=!1;const Xn=(g,T,N)=>{g==null?T._vnode&&be(T._vnode,null,null,!0):P(T._vnode||null,g,T,null,null,null,N),T._vnode=g,Ps||(Ps=!0,Ec(),Tc(),Ps=!1)},Gt={p:P,um:be,m:ht,r:Cs,mt:pt,mc:y,pc:mt,pbc:b,n:Cr,o:t};return{render:Xn,hydrate:void 0,createApp:Hm(Xn)}}function ca({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ln({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function lg(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function vi(t,e,n=!1){const r=t.children,s=e.children;if(Z(r)&&Z(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=mn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&vi(a,l)),l.type===es&&l.patchFlag!==-1&&(l.el=a.el),l.type===yt&&!l.el&&(l.el=a.el),process.env.NODE_ENV!=="production"&&l.el&&(l.el.__vnode=l)}}function cg(t){const e=t.slice(),n=[0];let r,s,i,a,l;const u=t.length;for(r=0;r<u;r++){const f=t[r];if(f!==0){if(s=n[n.length-1],t[s]<f){e[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,t[n[l]]<f?i=l+1:a=l;f<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=e[a];return n}function eu(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:eu(e)}function tu(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const ug=Symbol.for("v-scx"),hg=()=>{{const t=_i(ug);return t||process.env.NODE_ENV!=="production"&&$("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),t}};function ua(t,e,n){return process.env.NODE_ENV!=="production"&&!re(e)&&$("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),nu(t,e,n)}function nu(t,e,n=Te){const{immediate:r,deep:s,flush:i,once:a}=n;process.env.NODE_ENV!=="production"&&!e&&(r!==void 0&&$('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),s!==void 0&&$('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'),a!==void 0&&$('watch() "once" option is only respected when using the watch(source, callback, options?) signature.'));const l=Oe({},n);process.env.NODE_ENV!=="production"&&(l.onWarn=$);const u=e&&r||!e&&i!=="post";let f;if(os){if(i==="sync"){const I=hg();f=I.__watcherHandles||(I.__watcherHandles=[])}else if(!u){const I=()=>{};return I.stop=Fe,I.resume=Fe,I.pause=Fe,I}}const d=qe;l.call=(I,C,P)=>Ut(I,d,C,P);let p=!1;i==="post"?l.scheduler=I=>{gt(I,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(I,C)=>{C?I():ui(I)}),l.augmentJob=I=>{e&&(I.flags|=4),p&&(I.flags|=2,d&&(I.id=d.uid,I.i=d))};const v=Qp(t,e,l);return os&&(f?f.push(v):u&&v()),v}function fg(t,e,n){const r=this.proxy,s=Se(t)?t.includes(".")?ru(r,t):()=>r[t]:t.bind(r,r);let i;re(e)?i=e:(i=e.handler,n=e);const a=is(this),l=nu(s,i.bind(r),n);return a(),l}function ru(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const dg=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Rt(e)}Modifiers`]||t[`${un(e)}Modifiers`];function pg(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Te;if(process.env.NODE_ENV!=="production"){const{emitsOptions:d,propsOptions:[p]}=t;if(d)if(!(e in d))(!p||!(Nn(Rt(e))in p))&&$(`Component emitted event "${e}" but it is neither declared in the emits option nor as an "${Nn(Rt(e))}" prop.`);else{const v=d[e];re(v)&&(v(...n)||$(`Invalid event arguments: event validation failed for event "${e}".`))}}let s=n;const i=e.startsWith("update:"),a=i&&dg(r,e.slice(7));if(a&&(a.trim&&(s=n.map(d=>Se(d)?d.trim():d)),a.number&&(s=n.map(No))),process.env.NODE_ENV!=="production"&&mm(t,e,s),process.env.NODE_ENV!=="production"){const d=e.toLowerCase();d!==e&&r[Nn(d)]&&$(`Event "${d}" is emitted in component ${Vi(t,t.type)} but the handler is registered for "${e}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${un(e)}" instead of "${e}".`)}let l,u=r[l=Nn(e)]||r[l=Nn(Rt(e))];!u&&i&&(u=r[l=Nn(un(e))]),u&&Ut(u,t,6,s);const f=r[l+"Once"];if(f){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Ut(f,t,6,s)}}const mg=new WeakMap;function su(t,e,n=!1){const r=n?mg:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let a={},l=!1;if(!re(t)){const u=f=>{const d=su(f,e,!0);d&&(l=!0,Oe(a,d))};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}return!i&&!l?(Ee(t)&&r.set(t,null),null):(Z(i)?i.forEach(u=>a[u]=null):Oe(a,i),Ee(t)&&r.set(t,a),a)}function Ei(t,e){return!t||!Fr(e)?!1:(e=e.slice(2).replace(/Once$/,""),fe(t,e[0].toLowerCase()+e.slice(1))||fe(t,un(e))||fe(t,e))}let ha=!1;function Ti(){ha=!0}function iu(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:p,data:v,setupState:I,ctx:C,inheritAttrs:P}=t,k=di(t);let X,K;process.env.NODE_ENV!=="production"&&(ha=!1);try{if(n.shapeFlag&4){const Q=s||r,he=process.env.NODE_ENV!=="production"&&I.__isScriptSetup?new Proxy(Q,{get(A,_,y){return $(`Property '${String(_)}' was accessed via 'this'. Avoid using 'this' in templates.`),Reflect.get(A,_,y)}}):Q;X=Dt(f.call(he,Q,d,process.env.NODE_ENV!=="production"?Ft(p):p,I,v,C)),K=l}else{const Q=e;process.env.NODE_ENV!=="production"&&l===p&&Ti(),X=Dt(Q.length>1?Q(process.env.NODE_ENV!=="production"?Ft(p):p,process.env.NODE_ENV!=="production"?{get attrs(){return Ti(),Ft(l)},slots:a,emit:u}:{attrs:l,slots:a,emit:u}):Q(process.env.NODE_ENV!=="production"?Ft(p):p,null)),K=e.props?l:gg(l)}}catch(Q){ts.length=0,zr(Q,t,1),X=en(yt)}let W=X,pe;if(process.env.NODE_ENV!=="production"&&X.patchFlag>0&&X.patchFlag&2048&&([W,pe]=ou(X)),K&&P!==!1){const Q=Object.keys(K),{shapeFlag:he}=W;if(Q.length){if(he&7)i&&Q.some(Ks)&&(K=_g(K,i)),W=pn(W,K,!1,!0);else if(process.env.NODE_ENV!=="production"&&!ha&&W.type!==yt){const A=Object.keys(l),_=[],y=[];for(let w=0,b=A.length;w<b;w++){const R=A[w];Fr(R)?Ks(R)||_.push(R[2].toLowerCase()+R.slice(3)):y.push(R)}y.length&&$(`Extraneous non-props attributes (${y.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text or teleport root nodes.`),_.length&&$(`Extraneous non-emits event listeners (${_.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return n.dirs&&(process.env.NODE_ENV!=="production"&&!au(W)&&$("Runtime directive used on component with non-element root node. The directives will not function as intended."),W=pn(W,null,!1,!0),W.dirs=W.dirs?W.dirs.concat(n.dirs):n.dirs),n.transition&&(process.env.NODE_ENV!=="production"&&!au(W)&&$("Component inside <Transition> renders non-element root node that cannot be animated."),Xo(W,n.transition)),process.env.NODE_ENV!=="production"&&pe?pe(W):X=W,di(k),X}const ou=t=>{const e=t.children,n=t.dynamicChildren,r=fa(e,!1);if(r){if(process.env.NODE_ENV!=="production"&&r.patchFlag>0&&r.patchFlag&2048)return ou(r)}else return[t,void 0];const s=e.indexOf(r),i=n?n.indexOf(r):-1,a=l=>{e[s]=l,n&&(i>-1?n[i]=l:l.patchFlag>0&&(t.dynamicChildren=[...n,l]))};return[Dt(r),a]};function fa(t,e=!0){let n;for(let r=0;r<t.length;r++){const s=t[r];if(Ii(s)){if(s.type!==yt||s.children==="v-if"){if(n)return;if(n=s,process.env.NODE_ENV!=="production"&&e&&n.patchFlag>0&&n.patchFlag&2048)return fa(n.children)}}else return}return n}const gg=t=>{let e;for(const n in t)(n==="class"||n==="style"||Fr(n))&&((e||(e={}))[n]=t[n]);return e},_g=(t,e)=>{const n={};for(const r in t)(!Ks(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n},au=t=>t.shapeFlag&7||t.type===yt;function yg(t,e,n){const{props:r,children:s,component:i}=t,{props:a,children:l,patchFlag:u}=e,f=i.emitsOptions;if(process.env.NODE_ENV!=="production"&&(s||l)&&$t||e.dirs||e.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?lu(r,a,f):!!a;if(u&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(a[v]!==r[v]&&!Ei(f,v))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?lu(r,a,f):!0:!!a;return!1}function lu(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!Ei(n,i))return!0}return!1}function vg({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const cu=t=>t.__isSuspense;function Eg(t,e){e&&e.pendingBranch?Z(t)?e.effects.push(...t):e.effects.push(t):vc(t)}const _t=Symbol.for("v-fgt"),es=Symbol.for("v-txt"),yt=Symbol.for("v-cmt"),wi=Symbol.for("v-stc"),ts=[];let vt=null;function Xe(t=!1){ts.push(vt=t?null:[])}function Tg(){ts.pop(),vt=ts[ts.length-1]||null}let ns=1;function uu(t,e=!1){ns+=t,t<0&&vt&&e&&(vt.hasOnce=!0)}function hu(t){return t.dynamicChildren=ns>0?vt||nr:null,Tg(),ns>0&&vt&&vt.push(t),t}function ut(t,e,n,r,s,i){return hu(Pe(t,e,n,r,s,i,!0))}function wg(t,e,n,r,s){return hu(en(t,e,n,r,s,!0))}function Ii(t){return t?t.__v_isVNode===!0:!1}function rs(t,e){if(process.env.NODE_ENV!=="production"&&e.shapeFlag&6&&t.component){const n=hi.get(e.type);if(n&&n.has(t.component))return t.shapeFlag&=-257,e.shapeFlag&=-513,!1}return t.type===e.type&&t.key===e.key}const Ig=(...t)=>du(...t),fu=({key:t})=>t??null,Ai=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Se(t)||xe(t)||re(t)?{i:lt,r:t,k:e,f:!!n}:t:null);function Pe(t,e=null,n=null,r=0,s=null,i=t===_t?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&fu(e),ref:e&&Ai(e),scopeId:Vc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:lt};return l?(da(u,n),i&128&&t.normalize(u)):n&&(u.shapeFlag|=Se(n)?8:16),process.env.NODE_ENV!=="production"&&u.key!==u.key&&$("VNode created with invalid key (NaN). VNode type:",u.type),ns>0&&!a&&vt&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&vt.push(u),u}const en=process.env.NODE_ENV!=="production"?Ig:du;function du(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===Om)&&(process.env.NODE_ENV!=="production"&&!t&&$(`Invalid vnode type when creating vnode: ${t}.`),t=yt),Ii(t)){const l=pn(t,e,!0);return n&&da(l,n),ns>0&&!i&&vt&&(l.shapeFlag&6?vt[vt.indexOf(t)]=l:vt.push(l)),l.patchFlag=-2,l}if(wu(t)&&(t=t.__vccOpts),e){e=Ag(e);let{class:l,style:u}=e;l&&!Se(l)&&(e.class=Ys(l)),Ee(u)&&(ri(u)&&!Z(u)&&(u=Oe({},u)),e.style=Qs(u))}const a=Se(t)?1:cu(t)?128:ym(t)?64:Ee(t)?4:re(t)?2:0;return process.env.NODE_ENV!=="production"&&a&4&&ri(t)&&(t=le(t),$("Vue received a Component that was made a reactive object. This can lead to unnecessary performance overhead and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,t)),Pe(t,e,n,r,s,a,i,!0)}function Ag(t){return t?ri(t)||Kc(t)?Oe({},t):t:null}function pn(t,e,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=t,f=e?Rg(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:f,key:f&&fu(f),ref:e&&e.ref?n&&i?Z(i)?i.concat(Ai(e)):[i,Ai(e)]:Ai(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:process.env.NODE_ENV!=="production"&&a===-1&&Z(l)?l.map(pu):l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==_t?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:u,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&pn(t.ssContent),ssFallback:t.ssFallback&&pn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return u&&r&&Xo(d,u.clone(d)),d}function pu(t){const e=pn(t);return Z(t.children)&&(e.children=t.children.map(pu)),e}function bg(t=" ",e=0){return en(es,null,t,e)}function ss(t="",e=!1){return e?(Xe(),wg(yt,null,t)):en(yt,null,t)}function Dt(t){return t==null||typeof t=="boolean"?en(yt):Z(t)?en(_t,null,t.slice()):Ii(t)?mn(t):en(es,null,String(t))}function mn(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:pn(t)}function da(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Z(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),da(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Kc(e)?e._ctx=lt:s===3&&lt&&(lt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else re(e)?(e={default:e,_ctx:lt},n=32):(e=String(e),r&64?(n=16,e=[bg(e)]):n=8);t.children=e,t.shapeFlag|=n}function Rg(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Ys([e.class,r.class]));else if(s==="style")e.style=Qs([e.style,r.style]);else if(Fr(s)){const i=e[s],a=r[s];a&&i!==a&&!(Z(i)&&i.includes(a))&&(e[s]=i?[].concat(i,a):a)}else s!==""&&(e[s]=r[s])}return e}function jt(t,e,n,r=null){Ut(t,e,7,[n,r])}const Vg=jc();let Sg=0;function Ng(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||Vg,i={uid:Sg++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ep(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Wc(r,s),emitsOptions:su(r,s),emit:null,emitted:null,propsDefaults:Te,inheritAttrs:r.inheritAttrs,ctx:Te,data:Te,props:Te,attrs:Te,slots:Te,refs:Te,setupState:Te,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return process.env.NODE_ENV!=="production"?i.ctx=xm(i):i.ctx={_:i},i.root=e?e.root:i,i.emit=pg.bind(null,i),t.ce&&t.ce(i),i}let qe=null;const mu=()=>qe||lt;let bi,pa;{const t=Br(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};bi=e("__VUE_INSTANCE_SETTERS__",n=>qe=n),pa=e("__VUE_SSR_SETTERS__",n=>os=n)}const is=t=>{const e=qe;return bi(t),t.scope.on(),()=>{t.scope.off(),bi(e)}},gu=()=>{qe&&qe.scope.off(),bi(null)},Cg=Qt("slot,component");function ma(t,{isNativeTag:e}){(Cg(t)||e(t))&&$("Do not use built-in or reserved HTML elements as component id: "+t)}function _u(t){return t.vnode.shapeFlag&4}let os=!1;function Pg(t,e=!1,n=!1){e&&pa(e);const{props:r,children:s}=t.vnode,i=_u(t);zm(t,r,i,e),rg(t,s,n||e);const a=i?Dg(t,e):void 0;return e&&pa(!1),a}function Dg(t,e){var n;const r=t.type;if(process.env.NODE_ENV!=="production"){if(r.name&&ma(r.name,t.appContext.config),r.components){const i=Object.keys(r.components);for(let a=0;a<i.length;a++)ma(i[a],t.appContext.config)}if(r.directives){const i=Object.keys(r.directives);for(let a=0;a<i.length;a++)Sc(i[a])}r.compilerOptions&&Og()&&$('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,kc),process.env.NODE_ENV!=="production"&&km(t);const{setup:s}=r;if(s){Nt();const i=t.setupContext=s.length>1?kg(t):null,a=is(t),l=ir(s,t,0,[process.env.NODE_ENV!=="production"?Ft(t.props):t.props,i]),u=Ro(l);if(Ct(),a(),(u||t.sp)&&!Xr(t)&&Cc(t),u){if(l.then(gu,gu),e)return l.then(f=>{yu(t,f,e)}).catch(f=>{zr(f,t,0)});if(t.asyncDep=l,process.env.NODE_ENV!=="production"&&!t.suspense){const f=(n=r.name)!=null?n:"Anonymous";$(`Component <${f}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else yu(t,l,e)}else vu(t,e)}function yu(t,e,n){re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:Ee(e)?(process.env.NODE_ENV!=="production"&&Ii(e)&&$("setup() should not return VNodes directly - return a render function instead."),process.env.NODE_ENV!=="production"&&(t.devtoolsRawSetupState=e),t.setupState=mc(e),process.env.NODE_ENV!=="production"&&Mm(t)):process.env.NODE_ENV!=="production"&&e!==void 0&&$(`setup() should return an object. Received: ${e===null?"null":typeof e}`),vu(t,n)}const Og=()=>!0;function vu(t,e,n){const r=t.type;t.render||(t.render=r.render||Fe);{const s=is(t);Nt();try{Lm(t)}finally{Ct(),s()}}process.env.NODE_ENV!=="production"&&!r.render&&t.render===Fe&&!e&&(r.template?$('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):$("Component is missing template or render function: ",r))}const Eu=process.env.NODE_ENV!=="production"?{get(t,e){return Ti(),Le(t,"get",""),t[e]},set(){return $("setupContext.attrs is readonly."),!1},deleteProperty(){return $("setupContext.attrs is readonly."),!1}}:{get(t,e){return Le(t,"get",""),t[e]}};function xg(t){return new Proxy(t.slots,{get(e,n){return Le(t,"get","$slots"),e[n]}})}function kg(t){const e=n=>{if(process.env.NODE_ENV!=="production"&&(t.exposed&&$("expose() should be called only once per setup()."),n!=null)){let r=typeof n;r==="object"&&(Z(n)?r="array":xe(n)&&(r="ref")),r!=="object"&&$(`expose() should be passed a plain object, received ${r}.`)}t.exposed=n||{}};if(process.env.NODE_ENV!=="production"){let n,r;return Object.freeze({get attrs(){return n||(n=new Proxy(t.attrs,Eu))},get slots(){return r||(r=xg(t))},get emit(){return(s,...i)=>t.emit(s,...i)},expose:e})}else return{attrs:new Proxy(t.attrs,Eu),slots:t.slots,emit:t.emit,expose:e}}function Ri(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(mc($p(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fn)return Fn[n](t)},has(e,n){return n in e||n in Fn}})):t.proxy}const Mg=/(?:^|[-_])\w/g,Fg=t=>t.replace(Mg,e=>e.toUpperCase()).replace(/[-_]/g,"");function Tu(t,e=!0){return re(t)?t.displayName||t.name:t.name||e&&t.__name}function Vi(t,e,n=!1){let r=Tu(e);if(!r&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(r=s[1])}if(!r&&t&&t.parent){const s=i=>{for(const a in i)if(i[a]===e)return a};r=s(t.components||t.parent.type.components)||s(t.appContext.components)}return r?Fg(r):n?"App":"Anonymous"}function wu(t){return re(t)&&"__vccOpts"in t}const Iu=(t,e)=>{const n=Wp(t,e,os);if(process.env.NODE_ENV!=="production"){const r=mu();r&&r.appContext.config.warnRecursiveComputed&&(n._warnRecursive=!0)}return n};function Lg(){if(process.env.NODE_ENV==="production"||typeof window>"u")return;const t={style:"color:#3ba776"},e={style:"color:#1677ff"},n={style:"color:#f5222d"},r={style:"color:#eb2f96"},s={__vue_custom_formatter:!0,header(p){if(!Ee(p))return null;if(p.__isVue)return["div",t,"VueInstance"];if(xe(p)){Nt();const v=p.value;return Ct(),["div",{},["span",t,d(p)],"<",l(v),">"]}else{if(Pn(p))return["div",{},["span",t,ot(p)?"ShallowReactive":"Reactive"],"<",l(p),`>${Lt(p)?" (readonly)":""}`];if(Lt(p))return["div",{},["span",t,ot(p)?"ShallowReadonly":"Readonly"],"<",l(p),">"]}return null},hasBody(p){return p&&p.__isVue},body(p){if(p&&p.__isVue)return["div",{},...i(p.$)]}};function i(p){const v=[];p.type.props&&p.props&&v.push(a("props",le(p.props))),p.setupState!==Te&&v.push(a("setup",p.setupState)),p.data!==Te&&v.push(a("data",le(p.data)));const I=u(p,"computed");I&&v.push(a("computed",I));const C=u(p,"inject");return C&&v.push(a("injected",C)),v.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:p}]]),v}function a(p,v){return v=Oe({},v),Object.keys(v).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},p],["div",{style:"padding-left:1.25em"},...Object.keys(v).map(I=>["div",{},["span",r,I+": "],l(v[I],!1)])]]:["span",{}]}function l(p,v=!0){return typeof p=="number"?["span",e,p]:typeof p=="string"?["span",n,JSON.stringify(p)]:typeof p=="boolean"?["span",r,p]:Ee(p)?["object",{object:v?le(p):p}]:["span",n,String(p)]}function u(p,v){const I=p.type;if(re(I))return;const C={};for(const P in p.ctx)f(I,P,v)&&(C[P]=p.ctx[P]);return C}function f(p,v,I){const C=p[I];if(Z(C)&&C.includes(v)||Ee(C)&&v in C||p.extends&&f(p.extends,v,I)||p.mixins&&p.mixins.some(P=>f(P,v,I)))return!0}function d(p){return ot(p)?"ShallowRef":p.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(s):window.devtoolsFormatters=[s]}const Au="3.5.24",tn=process.env.NODE_ENV!=="production"?$:Fe;process.env.NODE_ENV,process.env.NODE_ENV;/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ga;const bu=typeof window<"u"&&window.trustedTypes;if(bu)try{ga=bu.createPolicy("vue",{createHTML:t=>t})}catch(t){process.env.NODE_ENV!=="production"&&tn(`Error creating trusted types policy: ${t}`)}const Ru=ga?t=>ga.createHTML(t):t=>t,Ug="http://www.w3.org/2000/svg",Bg="http://www.w3.org/1998/Math/MathML",nn=typeof document<"u"?document:null,Vu=nn&&nn.createElement("template"),$g={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?nn.createElementNS(Ug,t):e==="mathml"?nn.createElementNS(Bg,t):n?nn.createElement(t,{is:n}):nn.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>nn.createTextNode(t),createComment:t=>nn.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>nn.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const a=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Vu.innerHTML=Ru(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=Vu.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}e.insertBefore(l,n)}return[a?a.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},jg=Symbol("_vtc");function qg(t,e,n){const r=t[jg];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Su=Symbol("_vod"),Hg=Symbol("_vsh"),Kg=Symbol(process.env.NODE_ENV!=="production"?"CSS_VAR_TEXT":""),zg=/(?:^|;)\s*display\s*:/;function Wg(t,e,n){const r=t.style,s=Se(n);let i=!1;if(n&&!s){if(e)if(Se(e))for(const a of e.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Si(r,l,"")}else for(const a in e)n[a]==null&&Si(r,a,"");for(const a in n)a==="display"&&(i=!0),Si(r,a,n[a])}else if(s){if(e!==n){const a=r[Kg];a&&(n+=";"+a),r.cssText=n,i=zg.test(n)}}else e&&t.removeAttribute("style");Su in t&&(t[Su]=i?r.display:"",t[Hg]&&(r.display="none"))}const Gg=/[^\\];\s*$/,Nu=/\s*!important$/;function Si(t,e,n){if(Z(n))n.forEach(r=>Si(t,e,r));else if(n==null&&(n=""),process.env.NODE_ENV!=="production"&&Gg.test(n)&&tn(`Unexpected semicolon at the end of '${e}' style value: '${n}'`),e.startsWith("--"))t.setProperty(e,n);else{const r=Qg(t,e);Nu.test(n)?t.setProperty(un(r),n.replace(Nu,""),"important"):t[r]=n}}const Cu=["Webkit","Moz","ms"],_a={};function Qg(t,e){const n=_a[e];if(n)return n;let r=Rt(e);if(r!=="filter"&&r in t)return _a[e]=r;r=Ws(r);for(let s=0;s<Cu.length;s++){const i=Cu[s]+r;if(i in t)return _a[e]=i}return e}const Pu="http://www.w3.org/1999/xlink";function Du(t,e,n,r,s,i=yp(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Pu,e.slice(6,e.length)):t.setAttributeNS(Pu,e,n):n==null||i&&!Wl(n)?t.removeAttribute(e):t.setAttribute(e,i?"":kt(n)?String(n):n)}function Ou(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Ru(n):n);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,u=n==null?t.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=Wl(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch(l){process.env.NODE_ENV!=="production"&&!a&&tn(`Failed setting prop "${e}" on <${i.toLowerCase()}>: value ${n} is invalid.`,l)}a&&t.removeAttribute(s||e)}function Un(t,e,n,r){t.addEventListener(e,n,r)}function Yg(t,e,n,r){t.removeEventListener(e,n,r)}const xu=Symbol("_vei");function Xg(t,e,n,r,s=null){const i=t[xu]||(t[xu]={}),a=i[e];if(r&&a)a.value=process.env.NODE_ENV!=="production"?Mu(r,e):r;else{const[l,u]=Jg(e);if(r){const f=i[e]=t_(process.env.NODE_ENV!=="production"?Mu(r,e):r,s);Un(t,l,f,u)}else a&&(Yg(t,l,a,u),i[e]=void 0)}}const ku=/(?:Once|Passive|Capture)$/;function Jg(t){let e;if(ku.test(t)){e={};let r;for(;r=t.match(ku);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):un(t.slice(2)),e]}let ya=0;const Zg=Promise.resolve(),e_=()=>ya||(Zg.then(()=>ya=0),ya=Date.now());function t_(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ut(n_(r,n.value),e,5,[r])};return n.value=t,n.attached=e_(),n}function Mu(t,e){return re(t)||Z(t)?t:(tn(`Wrong type passed as event handler to ${e} - did you forget @ or : in front of your prop?
Expected function or array of functions, received type ${typeof t}.`),Fe)}function n_(t,e){if(Z(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Fu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,r_=(t,e,n,r,s,i)=>{const a=s==="svg";e==="class"?qg(t,r,a):e==="style"?Wg(t,n,r):Fr(e)?Ks(e)||Xg(t,e,n,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):s_(t,e,r,a))?(Ou(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Du(t,e,r,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Se(r))?Ou(t,Rt(e),r,i,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Du(t,e,r,a))};function s_(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Fu(e)&&re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Fu(e)&&Se(n)?!1:e in t}const Ni=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Z(e)?n=>rr(e,n):e};function i_(t){t.target.composing=!0}function Lu(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const hr=Symbol("_assign");function Uu(t,e,n){return e&&(t=t.trim()),n&&(t=No(t)),t}const o_={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[hr]=Ni(s);const i=r||s.props&&s.props.type==="number";Un(t,e?"change":"input",a=>{a.target.composing||t[hr](Uu(t.value,n,i))}),(n||i)&&Un(t,"change",()=>{t.value=Uu(t.value,n,i)}),e||(Un(t,"compositionstart",i_),Un(t,"compositionend",Lu),Un(t,"change",Lu))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(t[hr]=Ni(a),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?No(t.value):t.value,u=e??"";l!==u&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===u)||(t.value=u))}},a_={created(t,{value:e},n){t.checked=Xs(e,n.props.value),t[hr]=Ni(n),Un(t,"change",()=>{t[hr](l_(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[hr]=Ni(r),e!==n&&(t.checked=Xs(e,r.props.value))}};function l_(t){return"_value"in t?t._value:t.value}const c_=["ctrl","shift","alt","meta"],u_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>c_.some(n=>t[`${n}Key`]&&!e.includes(n))},Bu=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...i)=>{for(let a=0;a<e.length;a++){const l=u_[e[a]];if(l&&l(s,e))return}return t(s,...i)}))},h_=Oe({patchProp:r_},$g);let $u;function f_(){return $u||($u=og(h_))}const d_=((...t)=>{const e=f_().createApp(...t);process.env.NODE_ENV!=="production"&&(m_(e),g_(e));const{mount:n}=e;return e.mount=r=>{const s=__(r);if(!s)return;const i=e._component;!re(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,p_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},e});function p_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function m_(t){Object.defineProperty(t.config,"isNativeTag",{value:e=>mp(e)||gp(e)||_p(e),writable:!1})}function g_(t){{const e=t.config.isCustomElement;Object.defineProperty(t.config,"isCustomElement",{get(){return e},set(){tn("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const n=t.config.compilerOptions,r='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite-plugin-vue/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-sfc';Object.defineProperty(t.config,"compilerOptions",{get(){return tn(r),n},set(){tn(r)}})}}function __(t){if(Se(t)){const e=document.querySelector(t);return process.env.NODE_ENV!=="production"&&!e&&tn(`Failed to mount app: mount target selector "${t}" returned null.`),e}return process.env.NODE_ENV!=="production"&&window.ShadowRoot&&t instanceof window.ShadowRoot&&t.mode==="closed"&&tn('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),t}/**
* vue v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function y_(){Lg()}process.env.NODE_ENV!=="production"&&y_();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ju=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},v_=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},qu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,f=u?t[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let v=(l&15)<<2|f>>6,I=f&63;u||(I=64,a||(v=64)),r.push(n[d],n[p],n[v],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ju(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):v_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||f==null||p==null)throw new E_;const v=i<<2|l>>4;if(r.push(v),f!==64){const I=l<<4&240|f>>2;if(r.push(I),p!==64){const C=f<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class E_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const T_=function(t){const e=ju(t);return qu.encodeByteArray(e,!0)},Ci=function(t){return T_(t).replace(/\./g,"")},w_=function(t){try{return qu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_=()=>I_().__FIREBASE_DEFAULTS__,b_=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},R_=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&w_(t[1]);return e&&JSON.parse(e)},va=()=>{try{return A_()||b_()||R_()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},V_=t=>{var e,n;return(n=(e=va())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},S_=t=>{const e=V_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hu=()=>{var t;return(t=va())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ci(JSON.stringify(n)),Ci(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function D_(){var t;const e=(t=va())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function O_(){return!D_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x_(){try{return typeof indexedDB=="object"}catch{return!1}}function k_(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_="FirebaseError";class fr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=M_,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?F_(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fr(s,l,r)}}function F_(t,e){return t.replace(L_,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const L_=/\{\$([^}]+)}/g;function Ea(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(zu(i)&&zu(a)){if(!Ea(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function zu(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){return t&&t._delegate?t._delegate:t}class ls{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new N_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($_(e))try{this.getOrInitializeService({instanceIdentifier:Bn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Bn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bn){return this.instances.has(e)}getOptions(e=Bn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:B_(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bn){return this.component?this.component.multipleInstances?e:Bn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function B_(t){return t===Bn?void 0:t}function $_(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new U_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const q_={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},H_=me.INFO,K_={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},z_=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=K_[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wu{constructor(e){this.name=e,this._logLevel=H_,this._logHandler=z_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?q_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const W_=(t,e)=>e.some(n=>t instanceof n);let Gu,Qu;function G_(){return Gu||(Gu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q_(){return Qu||(Qu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yu=new WeakMap,Ta=new WeakMap,Xu=new WeakMap,wa=new WeakMap,Ia=new WeakMap;function Y_(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(gn(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Yu.set(n,t)}).catch(()=>{}),Ia.set(e,t),e}function X_(t){if(Ta.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Ta.set(t,e)}let Aa={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ta.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function J_(t){Aa=t(Aa)}function Z_(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ba(this),e,...n);return Xu.set(r,e.sort?e.sort():[e]),gn(r)}:Q_().includes(t)?function(...e){return t.apply(ba(this),e),gn(Yu.get(this))}:function(...e){return gn(t.apply(ba(this),e))}}function ey(t){return typeof t=="function"?Z_(t):(t instanceof IDBTransaction&&X_(t),W_(t,G_())?new Proxy(t,Aa):t)}function gn(t){if(t instanceof IDBRequest)return Y_(t);if(wa.has(t))return wa.get(t);const e=ey(t);return e!==t&&(wa.set(t,e),Ia.set(e,t)),e}const ba=t=>Ia.get(t);function ty(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=gn(a);return r&&a.addEventListener("upgradeneeded",u=>{r(gn(a.result),u.oldVersion,u.newVersion,gn(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const ny=["get","getKey","getAll","getAllKeys","count"],ry=["put","add","delete","clear"],Ra=new Map;function Ju(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ra.get(e))return Ra.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ry.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||ny.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return Ra.set(e,i),i}J_(t=>({...t,get:(e,n,r)=>Ju(e,n)||t.get(e,n,r),has:(e,n)=>!!Ju(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(iy(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function iy(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Va="@firebase/app",Zu="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn=new Wu("@firebase/app"),oy="@firebase/app-compat",ay="@firebase/analytics-compat",ly="@firebase/analytics",cy="@firebase/app-check-compat",uy="@firebase/app-check",hy="@firebase/auth",fy="@firebase/auth-compat",dy="@firebase/database",py="@firebase/data-connect",my="@firebase/database-compat",gy="@firebase/functions",_y="@firebase/functions-compat",yy="@firebase/installations",vy="@firebase/installations-compat",Ey="@firebase/messaging",Ty="@firebase/messaging-compat",wy="@firebase/performance",Iy="@firebase/performance-compat",Ay="@firebase/remote-config",by="@firebase/remote-config-compat",Ry="@firebase/storage",Vy="@firebase/storage-compat",Sy="@firebase/firestore",Ny="@firebase/vertexai-preview",Cy="@firebase/firestore-compat",Py="firebase",Dy="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa="[DEFAULT]",Oy={[Va]:"fire-core",[oy]:"fire-core-compat",[ly]:"fire-analytics",[ay]:"fire-analytics-compat",[uy]:"fire-app-check",[cy]:"fire-app-check-compat",[hy]:"fire-auth",[fy]:"fire-auth-compat",[dy]:"fire-rtdb",[py]:"fire-data-connect",[my]:"fire-rtdb-compat",[gy]:"fire-fn",[_y]:"fire-fn-compat",[yy]:"fire-iid",[vy]:"fire-iid-compat",[Ey]:"fire-fcm",[Ty]:"fire-fcm-compat",[wy]:"fire-perf",[Iy]:"fire-perf-compat",[Ay]:"fire-rc",[by]:"fire-rc-compat",[Ry]:"fire-gcs",[Vy]:"fire-gcs-compat",[Sy]:"fire-fst",[Cy]:"fire-fst-compat",[Ny]:"fire-vertex","fire-js":"fire-js",[Py]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi=new Map,xy=new Map,Na=new Map;function eh(t,e){try{t.container.addComponent(e)}catch(n){rn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(Na.has(e))return rn.debug(`There were multiple attempts to register component ${e}.`),!1;Na.set(e,t);for(const n of Pi.values())eh(n,t);for(const n of xy.values())eh(n,t);return!0}function ky(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_n=new Ku("app","Firebase",My);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ls("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _n.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=Dy;function th(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Sa,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw _n.create("bad-app-name",{appName:String(s)});if(n||(n=Hu()),!n)throw _n.create("no-options");const i=Pi.get(s);if(i){if(Ea(n,i.options)&&Ea(r,i.config))return i;throw _n.create("duplicate-app",{appName:s})}const a=new j_(s);for(const u of Na.values())a.addComponent(u);const l=new Fy(n,r,a);return Pi.set(s,l),l}function Uy(t=Sa){const e=Pi.get(t);if(!e&&t===Sa&&Hu())return th();if(!e)throw _n.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let s=(r=Oy[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rn.warn(l.join(" "));return}Di(new ls(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="firebase-heartbeat-database",$y=1,cs="firebase-heartbeat-store";let Ca=null;function nh(){return Ca||(Ca=ty(By,$y,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cs)}catch(n){console.warn(n)}}}}).catch(t=>{throw _n.create("idb-open",{originalErrorMessage:t.message})})),Ca}async function jy(t){try{const n=(await nh()).transaction(cs),r=await n.objectStore(cs).get(sh(t));return await n.done,r}catch(e){if(e instanceof fr)rn.warn(e.message);else{const n=_n.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rn.warn(n.message)}}}async function rh(t,e){try{const r=(await nh()).transaction(cs,"readwrite");await r.objectStore(cs).put(e,sh(t)),await r.done}catch(n){if(n instanceof fr)rn.warn(n.message);else{const r=_n.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rn.warn(r.message)}}}function sh(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=1024,Hy=720*60*60*1e3;class Ky{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Wy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ih();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=Hy}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ih(),{heartbeatsToSend:r,unsentEntries:s}=zy(this._heartbeatsCache.heartbeats),i=Ci(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rn.warn(n),""}}}function ih(){return new Date().toISOString().substring(0,10)}function zy(t,e=qy){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),oh(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),oh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Wy{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return x_()?k_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jy(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return rh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oh(t){return Ci(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gy(t){Di(new ls("platform-logger",e=>new sy(e),"PRIVATE")),Di(new ls("heartbeat",e=>new Ky(e),"PRIVATE")),dr(Va,Zu,t),dr(Va,Zu,"esm2017"),dr("fire-js","")}Gy("");var Qy="firebase",Yy="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(Qy,Yy,"app");var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $n,lh;(function(){var t;/** @license

   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function e(A,_){function y(){}y.prototype=_.prototype,A.D=_.prototype,A.prototype=new y,A.prototype.constructor=A,A.C=function(w,b,R){for(var E=Array(arguments.length-2),At=2;At<arguments.length;At++)E[At-2]=arguments[At];return _.prototype[b].apply(w,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,_,y){y||(y=0);var w=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)w[b]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(b=0;16>b;++b)w[b]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=A.g[0],y=A.g[1],b=A.g[2];var R=A.g[3],E=_+(R^y&(b^R))+w[0]+3614090360&4294967295;_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[1]+3905402710&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[2]+606105819&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[3]+3250441966&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(R^y&(b^R))+w[4]+4118548399&4294967295,_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[5]+1200080426&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[6]+2821735955&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[7]+4249261313&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(R^y&(b^R))+w[8]+1770035416&4294967295,_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[9]+2336552879&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[10]+4294925233&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[11]+2304563134&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(R^y&(b^R))+w[12]+1804603682&4294967295,_=y+(E<<7&4294967295|E>>>25),E=R+(b^_&(y^b))+w[13]+4254626195&4294967295,R=_+(E<<12&4294967295|E>>>20),E=b+(y^R&(_^y))+w[14]+2792965006&4294967295,b=R+(E<<17&4294967295|E>>>15),E=y+(_^b&(R^_))+w[15]+1236535329&4294967295,y=b+(E<<22&4294967295|E>>>10),E=_+(b^R&(y^b))+w[1]+4129170786&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[6]+3225465664&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[11]+643717713&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[0]+3921069994&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(b^R&(y^b))+w[5]+3593408605&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[10]+38016083&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[15]+3634488961&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[4]+3889429448&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(b^R&(y^b))+w[9]+568446438&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[14]+3275163606&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[3]+4107603335&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[8]+1163531501&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(b^R&(y^b))+w[13]+2850285829&4294967295,_=y+(E<<5&4294967295|E>>>27),E=R+(y^b&(_^y))+w[2]+4243563512&4294967295,R=_+(E<<9&4294967295|E>>>23),E=b+(_^y&(R^_))+w[7]+1735328473&4294967295,b=R+(E<<14&4294967295|E>>>18),E=y+(R^_&(b^R))+w[12]+2368359562&4294967295,y=b+(E<<20&4294967295|E>>>12),E=_+(y^b^R)+w[5]+4294588738&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[8]+2272392833&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[11]+1839030562&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[14]+4259657740&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(y^b^R)+w[1]+2763975236&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[4]+1272893353&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[7]+4139469664&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[10]+3200236656&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(y^b^R)+w[13]+681279174&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[0]+3936430074&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[3]+3572445317&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[6]+76029189&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(y^b^R)+w[9]+3654602809&4294967295,_=y+(E<<4&4294967295|E>>>28),E=R+(_^y^b)+w[12]+3873151461&4294967295,R=_+(E<<11&4294967295|E>>>21),E=b+(R^_^y)+w[15]+530742520&4294967295,b=R+(E<<16&4294967295|E>>>16),E=y+(b^R^_)+w[2]+3299628645&4294967295,y=b+(E<<23&4294967295|E>>>9),E=_+(b^(y|~R))+w[0]+4096336452&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[7]+1126891415&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[14]+2878612391&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[5]+4237533241&4294967295,y=b+(E<<21&4294967295|E>>>11),E=_+(b^(y|~R))+w[12]+1700485571&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[3]+2399980690&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[10]+4293915773&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[1]+2240044497&4294967295,y=b+(E<<21&4294967295|E>>>11),E=_+(b^(y|~R))+w[8]+1873313359&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[15]+4264355552&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[6]+2734768916&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[13]+1309151649&4294967295,y=b+(E<<21&4294967295|E>>>11),E=_+(b^(y|~R))+w[4]+4149444226&4294967295,_=y+(E<<6&4294967295|E>>>26),E=R+(y^(_|~b))+w[11]+3174756917&4294967295,R=_+(E<<10&4294967295|E>>>22),E=b+(_^(R|~y))+w[2]+718787259&4294967295,b=R+(E<<15&4294967295|E>>>17),E=y+(R^(b|~_))+w[9]+3951481745&4294967295,A.g[0]=A.g[0]+_&4294967295,A.g[1]=A.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,A.g[2]=A.g[2]+b&4294967295,A.g[3]=A.g[3]+R&4294967295}r.prototype.u=function(A,_){_===void 0&&(_=A.length);for(var y=_-this.blockSize,w=this.B,b=this.h,R=0;R<_;){if(b==0)for(;R<=y;)s(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<_;)if(w[b++]=A.charCodeAt(R++),b==this.blockSize){s(this,w),b=0;break}}else for(;R<_;)if(w[b++]=A[R++],b==this.blockSize){s(this,w),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var _=1;_<A.length-8;++_)A[_]=0;var y=8*this.o;for(_=A.length-8;_<A.length;++_)A[_]=y&255,y/=256;for(this.u(A),A=Array(16),_=y=0;4>_;++_)for(var w=0;32>w;w+=8)A[y++]=this.g[_]>>>w&255;return A};function i(A,_){var y=l;return Object.prototype.hasOwnProperty.call(y,A)?y[A]:y[A]=_(A)}function a(A,_){this.h=_;for(var y=[],w=!0,b=A.length-1;0<=b;b--){var R=A[b]|0;w&&R==_||(y[b]=R,w=!1)}this.g=y}var l={};function u(A){return-128<=A&&128>A?i(A,function(_){return new a([_|0],0>_?-1:0)}):new a([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return k(f(-A));for(var _=[],y=1,w=0;A>=y;w++)_[w]=A/y|0,y*=4294967296;return new a(_,0)}function d(A,_){if(A.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(A.charAt(0)=="-")return k(d(A.substring(1),_));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=f(Math.pow(_,8)),w=p,b=0;b<A.length;b+=8){var R=Math.min(8,A.length-b),E=parseInt(A.substring(b,b+R),_);8>R?(R=f(Math.pow(_,R)),w=w.j(R).add(f(E))):(w=w.j(y),w=w.add(f(E)))}return w}var p=u(0),v=u(1),I=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-k(this).m();for(var A=0,_=1,y=0;y<this.g.length;y++){var w=this.i(y);A+=(0<=w?w:4294967296+w)*_,_*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(P(this))return"-"+k(this).toString(A);for(var _=f(Math.pow(A,6)),y=this,w="";;){var b=pe(y,_).g;y=X(y,b.j(_));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(A);if(y=b,C(y))return R+w;for(;6>R.length;)R="0"+R;w=R+w}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var _=0;_<A.g.length;_++)if(A.g[_]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=X(this,A),P(A)?-1:C(A)?0:1};function k(A){for(var _=A.g.length,y=[],w=0;w<_;w++)y[w]=~A.g[w];return new a(y,~A.h).add(v)}t.abs=function(){return P(this)?k(this):this},t.add=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0,b=0;b<=_;b++){var R=w+(this.i(b)&65535)+(A.i(b)&65535),E=(R>>>16)+(this.i(b)>>>16)+(A.i(b)>>>16);w=E>>>16,R&=65535,E&=65535,y[b]=E<<16|R}return new a(y,y[y.length-1]&-2147483648?-1:0)};function X(A,_){return A.add(k(_))}t.j=function(A){if(C(this)||C(A))return p;if(P(this))return P(A)?k(this).j(k(A)):k(k(this).j(A));if(P(A))return k(this.j(k(A)));if(0>this.l(I)&&0>A.l(I))return f(this.m()*A.m());for(var _=this.g.length+A.g.length,y=[],w=0;w<2*_;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<A.g.length;b++){var R=this.i(w)>>>16,E=this.i(w)&65535,At=A.i(b)>>>16,pt=A.i(b)&65535;y[2*w+2*b]+=E*pt,K(y,2*w+2*b),y[2*w+2*b+1]+=R*pt,K(y,2*w+2*b+1),y[2*w+2*b+1]+=E*At,K(y,2*w+2*b+1),y[2*w+2*b+2]+=R*At,K(y,2*w+2*b+2)}for(w=0;w<_;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=_;w<2*_;w++)y[w]=0;return new a(y,0)};function K(A,_){for(;(A[_]&65535)!=A[_];)A[_+1]+=A[_]>>>16,A[_]&=65535,_++}function W(A,_){this.g=A,this.h=_}function pe(A,_){if(C(_))throw Error("division by zero");if(C(A))return new W(p,p);if(P(A))return _=pe(k(A),_),new W(k(_.g),k(_.h));if(P(_))return _=pe(A,k(_)),new W(k(_.g),_.h);if(30<A.g.length){if(P(A)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var y=v,w=_;0>=w.l(A);)y=Q(y),w=Q(w);var b=he(y,1),R=he(w,1);for(w=he(w,2),y=he(y,2);!C(w);){var E=R.add(w);0>=E.l(A)&&(b=b.add(y),R=E),w=he(w,1),y=he(y,1)}return _=X(A,b.j(_)),new W(b,_)}for(b=p;0<=A.l(_);){for(y=Math.max(1,Math.floor(A.m()/_.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),R=f(y),E=R.j(_);P(E)||0<E.l(A);)y-=w,R=f(y),E=R.j(_);C(R)&&(R=v),b=b.add(R),A=X(A,E)}return new W(b,A)}t.A=function(A){return pe(this,A).h},t.and=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)&A.i(w);return new a(y,this.h&A.h)},t.or=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)|A.i(w);return new a(y,this.h|A.h)},t.xor=function(A){for(var _=Math.max(this.g.length,A.g.length),y=[],w=0;w<_;w++)y[w]=this.i(w)^A.i(w);return new a(y,this.h^A.h)};function Q(A){for(var _=A.g.length+1,y=[],w=0;w<_;w++)y[w]=A.i(w)<<1|A.i(w-1)>>>31;return new a(y,A.h)}function he(A,_){var y=_>>5;_%=32;for(var w=A.g.length-y,b=[],R=0;R<w;R++)b[R]=0<_?A.i(R+y)>>>_|A.i(R+y+1)<<32-_:A.i(R+y);return new a(b,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lh=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,$n=a}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});var Oi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ch,us,uh,xi,Pa,hh,fh,dh;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,c,h){return o==Array.prototype||o==Object.prototype||(o[c]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oi=="object"&&Oi];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)e:{var h=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var V=o[m];if(!(V in h))break e;h=h[V]}o=o[o.length-1],m=h[o],c=c(m),c!=m&&c!=null&&e(h,o,{configurable:!0,writable:!0,value:c})}}function i(o,c){o instanceof String&&(o+="");var h=0,m=!1,V={next:function(){if(!m&&h<o.length){var S=h++;return{value:c(S,o[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(o){return o||function(){return i(this,function(c,h){return h})}});/** @license

   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */var a=a||{},l=this||self;function u(o){var c=typeof o;return c=c!="object"?c:o?Array.isArray(o)?"array":c:"null",c=="array"||c=="object"&&typeof o.length=="number"}function f(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function d(o,c,h){return o.call.apply(o.bind,arguments)}function p(o,c,h){if(!o)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,m),o.apply(c,V)}}return function(){return o.apply(c,arguments)}}function v(o,c,h){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,v.apply(null,arguments)}function I(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function C(o,c){function h(){}h.prototype=c.prototype,o.aa=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(m,V,S){for(var q=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)q[Ae-2]=arguments[Ae];return c.prototype[V].apply(m,q)}}function P(o){const c=o.length;if(0<c){const h=Array(c);for(let m=0;m<c;m++)h[m]=o[m];return h}return[]}function k(o,c){for(let h=1;h<arguments.length;h++){const m=arguments[h];if(u(m)){const V=o.length||0,S=m.length||0;o.length=V+S;for(let q=0;q<S;q++)o[V+q]=m[q]}else o.push(m)}}class X{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function K(o){return/^[\s\xa0]*$/.test(o)}function W(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function pe(o){return pe[" "](o),o}pe[" "]=function(){};var Q=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function he(o,c,h){for(const m in o)c.call(h,o[m],m,o)}function A(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function _(o){const c={};for(const h in o)c[h]=o[h];return c}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(o,c){let h,m;for(let V=1;V<arguments.length;V++){m=arguments[V];for(h in m)o[h]=m[h];for(let S=0;S<y.length;S++)h=y[S],Object.prototype.hasOwnProperty.call(m,h)&&(o[h]=m[h])}}function b(o){var c=1;o=o.split(":");const h=[];for(;0<c&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function R(o){l.setTimeout(()=>{throw o},0)}function E(){var o=mt;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class At{constructor(){this.h=this.g=null}add(c,h){const m=pt.get();m.set(c,h),this.h?this.h.next=m:this.g=m,this.h=m}}var pt=new X(()=>new tt,o=>o.reset());class tt{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ae=!1,mt=new At,Nr=()=>{const o=l.Promise.resolve(void 0);ce=()=>{o.then(Qn)}};var Qn=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){R(h)}var c=pt;c.j(o),100>c.h&&(c.h++,o.next=c.g,c.g=o)}ae=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function be(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}be.prototype.h=function(){this.defaultPrevented=!0};var Cs=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,c),l.removeEventListener("test",h,c)}catch{}return o})();function Yn(o,c){if(be.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget){if(Q){e:{try{pe(c.nodeName);var V=!0;break e}catch{}V=!1}V||(c=null)}}else h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement);this.relatedTarget=c,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Rl[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Yn.aa.h.call(this)}}C(Yn,be);var Rl={2:"touch",3:"pen",4:"mouse"};Yn.prototype.h=function(){Yn.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Wt="closure_listenable_"+(1e6*Math.random()|0),Cr=0;function Ps(o,c,h,m,V){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!m,this.ha=V,this.key=++Cr,this.da=this.fa=!1}function Xn(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Gt(o){this.src=o,this.g={},this.h=0}Gt.prototype.add=function(o,c,h,m,V){var S=o.toString();o=this.g[S],o||(o=this.g[S]=[],this.h++);var q=g(o,c,m,V);return-1<q?(c=o[q],h||(c.fa=!1)):(c=new Ps(c,this.src,S,!!m,V),c.fa=h,o.push(c)),c};function lo(o,c){var h=c.type;if(h in o.g){var m=o.g[h],V=Array.prototype.indexOf.call(m,c,void 0),S;(S=0<=V)&&Array.prototype.splice.call(m,V,1),S&&(Xn(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function g(o,c,h,m){for(var V=0;V<o.length;++V){var S=o[V];if(!S.da&&S.listener==c&&S.capture==!!h&&S.ha==m)return V}return-1}var T="closure_lm_"+(1e6*Math.random()|0),N={};function F(o,c,h,m,V){if(Array.isArray(c)){for(var S=0;S<c.length;S++)F(o,c[S],h,m,V);return null}return h=Y(h),o&&o[Wt]?o.K(c,h,f(m)?!!m.capture:!1,V):D(o,c,h,!1,m,V)}function D(o,c,h,m,V,S){if(!c)throw Error("Invalid event type");var q=f(V)?!!V.capture:!!V,Ae=J(o);if(Ae||(o[T]=Ae=new Gt(o)),h=Ae.add(c,h,m,q,S),h.proxy)return h;if(m=O(),h.proxy=m,m.src=o,m.listener=h,o.addEventListener)Cs||(V=q),V===void 0&&(V=!1),o.addEventListener(c.toString(),m,V);else if(o.attachEvent)o.attachEvent(U(c.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function O(){function o(h){return c.call(o.src,o.listener,h)}const c=x;return o}function j(o,c,h,m,V){if(Array.isArray(c))for(var S=0;S<c.length;S++)j(o,c[S],h,m,V);else m=f(m)?!!m.capture:!!m,h=Y(h),o&&o[Wt]?(o=o.i,c=String(c).toString(),c in o.g&&(S=o.g[c],h=g(S,h,m,V),-1<h&&(Xn(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete o.g[c],o.h--)))):o&&(o=J(o))&&(c=o.g[c.toString()],o=-1,c&&(o=g(c,h,m,V)),(h=-1<o?c[o]:null)&&B(h))}function B(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Wt])lo(c.i,o);else{var h=o.type,m=o.proxy;c.removeEventListener?c.removeEventListener(h,m,o.capture):c.detachEvent?c.detachEvent(U(h),m):c.addListener&&c.removeListener&&c.removeListener(m),(h=J(c))?(lo(h,o),h.h==0&&(h.src=null,c[T]=null)):Xn(o)}}}function U(o){return o in N?N[o]:N[o]="on"+o}function x(o,c){if(o.da)o=!0;else{c=new Yn(c,this);var h=o.listener,m=o.ha||o.src;o.fa&&B(o),o=h.call(m,c)}return o}function J(o){return o=o[T],o instanceof Gt?o:null}var H="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(o){return typeof o=="function"?o:(o[H]||(o[H]=function(c){return o.handleEvent(c)}),o[H])}function G(){ht.call(this),this.i=new Gt(this),this.M=this,this.F=null}C(G,ht),G.prototype[Wt]=!0,G.prototype.removeEventListener=function(o,c,h,m){j(this,o,c,h,m)};function ne(o,c){var h,m=o.F;if(m)for(h=[];m;m=m.F)h.push(m);if(o=o.M,m=c.type||c,typeof c=="string")c=new be(c,o);else if(c instanceof be)c.target=c.target||o;else{var V=c;c=new be(m,o),w(c,V)}if(V=!0,h)for(var S=h.length-1;0<=S;S--){var q=c.g=h[S];V=_e(q,m,!0,c)&&V}if(q=c.g=o,V=_e(q,m,!0,c)&&V,V=_e(q,m,!1,c)&&V,h)for(S=0;S<h.length;S++)q=c.g=h[S],V=_e(q,m,!1,c)&&V}G.prototype.N=function(){if(G.aa.N.call(this),this.i){var o=this.i,c;for(c in o.g){for(var h=o.g[c],m=0;m<h.length;m++)Xn(h[m]);delete o.g[c],o.h--}}this.F=null},G.prototype.K=function(o,c,h,m){return this.i.add(String(o),c,!1,h,m)},G.prototype.L=function(o,c,h,m){return this.i.add(String(o),c,!0,h,m)};function _e(o,c,h,m){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();for(var V=!0,S=0;S<c.length;++S){var q=c[S];if(q&&!q.da&&q.capture==h){var Ae=q.listener,Ye=q.ha||q.src;q.fa&&lo(o.i,q),V=Ae.call(Ye,m)!==!1&&V}}return V&&!m.defaultPrevented}function ye(o,c,h){if(typeof o=="function")h&&(o=v(o,h));else if(o&&typeof o.handleEvent=="function")o=v(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:l.setTimeout(o,c||0)}function Ge(o){o.g=ye(()=>{o.g=null,o.i&&(o.i=!1,Ge(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class nt extends ht{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Ge(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(o){ht.call(this),this.h=o,this.g={}}C(rt,ht);var Et=[];function An(o){he(o.g,function(c,h){this.g.hasOwnProperty(h)&&B(c)},o),o.g={}}rt.prototype.N=function(){rt.aa.N.call(this),An(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Pr=l.JSON.stringify,Qe=l.JSON.parse,bt=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function Dr(){}Dr.prototype.h=null;function Ds(o){return o.h||(o.h=o.i())}function pd(){}var Os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vl(){be.call(this,"d")}C(Vl,be);function Sl(){be.call(this,"c")}C(Sl,be);var Jn={},md=null;function co(){return md=md||new G}Jn.La="serverreachability";function gd(o){be.call(this,Jn.La,o)}C(gd,be);function xs(o){const c=co();ne(c,new gd(c))}Jn.STAT_EVENT="statevent";function _d(o,c){be.call(this,Jn.STAT_EVENT,o),this.stat=c}C(_d,be);function ft(o){const c=co();ne(c,new _d(c,o))}Jn.Ma="timingevent";function yd(o,c){be.call(this,Jn.Ma,o),this.size=c}C(yd,be);function ks(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},c)}function Ms(){this.g=!0}Ms.prototype.xa=function(){this.g=!1};function Ow(o,c,h,m,V,S){o.info(function(){if(o.g)if(S)for(var q="",Ae=S.split("&"),Ye=0;Ye<Ae.length;Ye++){var ve=Ae[Ye].split("=");if(1<ve.length){var st=ve[0];ve=ve[1];var it=st.split("_");q=2<=it.length&&it[1]=="type"?q+(st+"="+ve+"&"):q+(st+"=redacted&")}}else q=null;else q=S;return"XMLHTTP REQ ("+m+") [attempt "+V+"]: "+c+`
`+h+`
`+q})}function xw(o,c,h,m,V,S,q){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+V+"]: "+c+`
`+h+`
`+S+" "+q})}function Or(o,c,h,m){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Mw(o,h)+(m?" "+m:"")})}function kw(o,c){o.info(function(){return"TIMEOUT: "+c})}Ms.prototype.info=function(){};function Mw(o,c){if(!o.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var m=h[o];if(!(2>m.length)){var V=m[1];if(Array.isArray(V)&&!(1>V.length)){var S=V[0];if(S!="noop"&&S!="stop"&&S!="close")for(var q=1;q<V.length;q++)V[q]=""}}}}return Pr(h)}catch{return c}}var uo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vd={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nl;function ho(){}C(ho,Dr),ho.prototype.g=function(){return new XMLHttpRequest},ho.prototype.i=function(){return{}},Nl=new ho;function bn(o,c,h,m){this.j=o,this.i=c,this.l=h,this.R=m||1,this.U=new rt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ed}function Ed(){this.i=null,this.g="",this.h=!1}var Td={},Cl={};function Pl(o,c,h){o.L=1,o.v=go(ln(c)),o.m=h,o.P=!0,wd(o,null)}function wd(o,c){o.F=Date.now(),fo(o),o.A=ln(o.v);var h=o.A,m=o.R;Array.isArray(m)||(m=[String(m)]),Md(h.i,"t",m),o.C=0,h=o.j.J,o.h=new Ed,o.g=ep(o.j,h?c:null,!o.m),0<o.O&&(o.M=new nt(v(o.Y,o,o.g),o.O)),c=o.U,h=o.g,m=o.ca;var V="readystatechange";Array.isArray(V)||(V&&(Et[0]=V.toString()),V=Et);for(var S=0;S<V.length;S++){var q=F(h,V[S],m||c.handleEvent,!1,c.h||c);if(!q)break;c.g[q.key]=q}c=o.H?_(o.H):{},o.m?(o.u||(o.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,c)):(o.u="GET",o.g.ea(o.A,o.u,null,c)),xs(),Ow(o.i,o.u,o.A,o.l,o.R,o.m)}bn.prototype.ca=function(o){o=o.target;const c=this.M;c&&cn(o)==3?c.j():this.Y(o)},bn.prototype.Y=function(o){try{if(o==this.g)e:{const it=cn(this.g);var c=this.g.Ba();const Mr=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||qd(this.g)))){this.J||it!=4||c==7||(c==8||0>=Mr?xs(3):xs(2)),Dl(this);var h=this.g.Z();this.X=h;t:if(Id(this)){var m=qd(this.g);o="";var V=m.length,S=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zn(this),Fs(this);var q="";break t}this.h.i=new l.TextDecoder}for(c=0;c<V;c++)this.h.h=!0,o+=this.h.i.decode(m[c],{stream:!(S&&c==V-1)});m.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,xw(this.i,this.u,this.A,this.l,this.R,it,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,Ye=this.g;if((Ae=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Ae)){var ve=Ae;break t}}ve=null}if(h=ve)Or(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ol(this,h);else{this.o=!1,this.s=3,ft(12),Zn(this),Fs(this);break e}}if(this.P){h=!0;let xt;for(;!this.J&&this.C<q.length;)if(xt=Fw(this,q),xt==Cl){it==4&&(this.s=4,ft(14),h=!1),Or(this.i,this.l,null,"[Incomplete Response]");break}else if(xt==Td){this.s=4,ft(15),Or(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else Or(this.i,this.l,xt,null),Ol(this,xt);if(Id(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||q.length!=0||this.h.h||(this.s=1,ft(16),h=!1),this.o=this.o&&h,!h)Or(this.i,this.l,q,"[Invalid Chunked Response]"),Zn(this),Fs(this);else if(0<q.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),Ul(st),st.M=!0,ft(11))}}else Or(this.i,this.l,q,null),Ol(this,q);it==4&&Zn(this),this.o&&!this.J&&(it==4?Yd(this.j,this):(this.o=!1,fo(this)))}else eI(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),Zn(this),Fs(this)}}}catch{}finally{}};function Id(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Fw(o,c){var h=o.C,m=c.indexOf(`
`,h);return m==-1?Cl:(h=Number(c.substring(h,m)),isNaN(h)?Td:(m+=1,m+h>c.length?Cl:(c=c.slice(m,m+h),o.C=m+h,c)))}bn.prototype.cancel=function(){this.J=!0,Zn(this)};function fo(o){o.S=Date.now()+o.I,Ad(o,o.I)}function Ad(o,c){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ks(v(o.ba,o),c)}function Dl(o){o.B&&(l.clearTimeout(o.B),o.B=null)}bn.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(kw(this.i,this.A),this.L!=2&&(xs(),ft(17)),Zn(this),this.s=2,Fs(this)):Ad(this,this.S-o)};function Fs(o){o.j.G==0||o.J||Yd(o.j,o)}function Zn(o){Dl(o);var c=o.M;c&&typeof c.ma=="function"&&c.ma(),o.M=null,An(o.U),o.g&&(c=o.g,o.g=null,c.abort(),c.ma())}function Ol(o,c){try{var h=o.j;if(h.G!=0&&(h.g==o||xl(h.h,o))){if(!o.K&&xl(h.h,o)&&h.G==3){try{var m=h.Da.g.parse(c)}catch{m=null}if(Array.isArray(m)&&m.length==3){var V=m;if(V[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)wo(h),Eo(h);else break e;Ll(h),ft(18)}}else h.za=V[1],0<h.za-h.T&&37500>V[2]&&h.F&&h.v==0&&!h.C&&(h.C=ks(v(h.Za,h),6e3));if(1>=Vd(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else tr(h,11)}else if((o.K||h.g==o)&&wo(h),!K(c))for(V=h.Da.g.parse(c),c=0;c<V.length;c++){let ve=V[c];if(h.T=ve[0],ve=ve[1],h.G==2)if(ve[0]=="c"){h.K=ve[1],h.ia=ve[2];const st=ve[3];st!=null&&(h.la=st,h.j.info("VER="+h.la));const it=ve[4];it!=null&&(h.Aa=it,h.j.info("SVER="+h.Aa));const Mr=ve[5];Mr!=null&&typeof Mr=="number"&&0<Mr&&(m=1.5*Mr,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;const xt=o.g;if(xt){const Ao=xt.g?xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var S=m.h;S.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(kl(S,S.h),S.h=null))}if(m.D){const Bl=xt.g?xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Bl&&(m.ya=Bl,Re(m.I,m.D,Bl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var q=o;if(m.qa=Zd(m,m.J?m.ia:null,m.W),q.K){Sd(m.h,q);var Ae=q,Ye=m.L;Ye&&(Ae.I=Ye),Ae.B&&(Dl(Ae),fo(Ae)),m.g=q}else Gd(m);0<h.i.length&&To(h)}else ve[0]!="stop"&&ve[0]!="close"||tr(h,7);else h.G==3&&(ve[0]=="stop"||ve[0]=="close"?ve[0]=="stop"?tr(h,7):Fl(h):ve[0]!="noop"&&h.l&&h.l.ta(ve),h.v=0)}}xs(4)}catch{}}var Lw=class{constructor(o,c){this.g=o,this.map=c}};function bd(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rd(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Vd(o){return o.h?1:o.g?o.g.size:0}function xl(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function kl(o,c){o.g?o.g.add(c):o.h=c}function Sd(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}bd.prototype.cancel=function(){if(this.i=Nd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Nd(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.D);return c}return P(o.i)}function Uw(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(u(o)){for(var c=[],h=o.length,m=0;m<h;m++)c.push(o[m]);return c}c=[],h=0;for(m in o)c[h++]=o[m];return c}function Bw(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(u(o)||typeof o=="string"){var c=[];o=o.length;for(var h=0;h<o;h++)c.push(h);return c}c=[],h=0;for(const m in o)c[h++]=m;return c}}}function Cd(o,c){if(o.forEach&&typeof o.forEach=="function")o.forEach(c,void 0);else if(u(o)||typeof o=="string")Array.prototype.forEach.call(o,c,void 0);else for(var h=Bw(o),m=Uw(o),V=m.length,S=0;S<V;S++)c.call(void 0,m[S],h&&h[S],o)}var Pd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $w(o,c){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var m=o[h].indexOf("="),V=null;if(0<=m){var S=o[h].substring(0,m);V=o[h].substring(m+1)}else S=o[h];c(S,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function er(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof er){this.h=o.h,po(this,o.j),this.o=o.o,this.g=o.g,mo(this,o.s),this.l=o.l;var c=o.i,h=new Bs;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Dd(this,h),this.m=o.m}else o&&(c=String(o).match(Pd))?(this.h=!1,po(this,c[1]||"",!0),this.o=Ls(c[2]||""),this.g=Ls(c[3]||"",!0),mo(this,c[4]),this.l=Ls(c[5]||"",!0),Dd(this,c[6]||"",!0),this.m=Ls(c[7]||"")):(this.h=!1,this.i=new Bs(null,this.h))}er.prototype.toString=function(){var o=[],c=this.j;c&&o.push(Us(c,Od,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Us(c,Od,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Us(h,h.charAt(0)=="/"?Hw:qw,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Us(h,zw)),o.join("")};function ln(o){return new er(o)}function po(o,c,h){o.j=h?Ls(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function mo(o,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);o.s=c}else o.s=null}function Dd(o,c,h){c instanceof Bs?(o.i=c,Ww(o.i,o.h)):(h||(c=Us(c,Kw)),o.i=new Bs(c,o.h))}function Re(o,c,h){o.i.set(c,h)}function go(o){return Re(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ls(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Us(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,jw),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function jw(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Od=/[#\/\?@]/g,qw=/[#\?:]/g,Hw=/[#\?]/g,Kw=/[#\?@]/g,zw=/#/g;function Bs(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function Rn(o){o.g||(o.g=new Map,o.h=0,o.i&&$w(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}t=Bs.prototype,t.add=function(o,c){Rn(this),this.i=null,o=xr(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function xd(o,c){Rn(o),c=xr(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function kd(o,c){return Rn(o),c=xr(o,c),o.g.has(c)}t.forEach=function(o,c){Rn(this),this.g.forEach(function(h,m){h.forEach(function(V){o.call(c,V,m,this)},this)},this)},t.na=function(){Rn(this);const o=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let m=0;m<c.length;m++){const V=o[m];for(let S=0;S<V.length;S++)h.push(c[m])}return h},t.V=function(o){Rn(this);let c=[];if(typeof o=="string")kd(this,o)&&(c=c.concat(this.g.get(xr(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)c=c.concat(o[h])}return c},t.set=function(o,c){return Rn(this),this.i=null,o=xr(this,o),kd(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},t.get=function(o,c){return o?(o=this.V(o),0<o.length?String(o[0]):c):c};function Md(o,c,h){xd(o,c),0<h.length&&(o.i=null,o.g.set(xr(o,c),P(h)),o.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var m=c[h];const S=encodeURIComponent(String(m)),q=this.V(m);for(m=0;m<q.length;m++){var V=S;q[m]!==""&&(V+="="+encodeURIComponent(String(q[m]))),o.push(V)}}return this.i=o.join("&")};function xr(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Ww(o,c){c&&!o.j&&(Rn(o),o.i=null,o.g.forEach(function(h,m){var V=m.toLowerCase();m!=V&&(xd(this,m),Md(this,V,h))},o)),o.j=c}function Gw(o,c){const h=new Ms;if(l.Image){const m=new Image;m.onload=I(Vn,h,"TestLoadImage: loaded",!0,c,m),m.onerror=I(Vn,h,"TestLoadImage: error",!1,c,m),m.onabort=I(Vn,h,"TestLoadImage: abort",!1,c,m),m.ontimeout=I(Vn,h,"TestLoadImage: timeout",!1,c,m),l.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else c(!1)}function Qw(o,c){const h=new Ms,m=new AbortController,V=setTimeout(()=>{m.abort(),Vn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:m.signal}).then(S=>{clearTimeout(V),S.ok?Vn(h,"TestPingServer: ok",!0,c):Vn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(V),Vn(h,"TestPingServer: error",!1,c)})}function Vn(o,c,h,m,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),m(h)}catch{}}function Yw(){this.g=new bt}function Xw(o,c,h){const m=h||"";try{Cd(o,function(V,S){let q=V;f(V)&&(q=Pr(V)),c.push(m+S+"="+encodeURIComponent(q))})}catch(V){throw c.push(m+"type="+encodeURIComponent("_badmap")),V}}function _o(o){this.l=o.Ub||null,this.j=o.eb||!1}C(_o,Dr),_o.prototype.g=function(){return new yo(this.l,this.j)},_o.prototype.i=(function(o){return function(){return o}})({});function yo(o,c){G.call(this),this.D=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(yo,G),t=yo.prototype,t.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=c,this.readyState=1,js(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(c.body=o),(this.D||l).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$s(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fd(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fd(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?$s(this):js(this),this.readyState==3&&Fd(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,$s(this))},t.Qa=function(o){this.g&&(this.response=o,$s(this))},t.ga=function(){this.g&&$s(this)};function $s(o){o.readyState=4,o.l=null,o.j=null,o.v=null,js(o)}t.setRequestHeader=function(o,c){this.u.append(o,c)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function js(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ld(o){let c="";return he(o,function(h,m){c+=m,c+=":",c+=h,c+=`\r
`}),c}function Ml(o,c,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=Ld(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Re(o,c,h))}function Ce(o){G.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Ce,G);var Jw=/^https?$/i,Zw=["POST","PUT"];t=Ce.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,c,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nl.g(),this.v=this.o?Ds(this.o):Ds(Nl),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(S){Ud(this,S);return}if(o=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var V in m)h.set(V,m[V]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const S of m.keys())h.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),V=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Zw,c,void 0))||m||V||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[S,q]of h)this.g.setRequestHeader(S,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jd(this),this.u=!0,this.g.send(o),this.u=!1}catch(S){Ud(this,S)}};function Ud(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.m=5,Bd(o),vo(o)}function Bd(o){o.A||(o.A=!0,ne(o,"complete"),ne(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ne(this,"complete"),ne(this,"abort"),vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),Ce.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?$d(this):this.bb())},t.bb=function(){$d(this)};function $d(o){if(o.h&&typeof a<"u"&&(!o.v[1]||cn(o)!=4||o.Z()!=2)){if(o.u&&cn(o)==4)ye(o.Ea,0,o);else if(ne(o,"readystatechange"),cn(o)==4){o.h=!1;try{const q=o.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var m;if(m=q===0){var V=String(o.D).match(Pd)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),m=!Jw.test(V?V.toLowerCase():"")}h=m}if(h)ne(o,"complete"),ne(o,"success");else{o.m=6;try{var S=2<cn(o)?o.g.statusText:""}catch{S=""}o.l=S+" ["+o.Z()+"]",Bd(o)}}finally{vo(o)}}}}function vo(o,c){if(o.g){jd(o);const h=o.g,m=o.v[0]?()=>{}:null;o.g=null,o.v=null,c||ne(o,"ready");try{h.onreadystatechange=m}catch{}}}function jd(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function cn(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Qe(c)}};function qd(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function eI(o){const c={};o=(o.g&&2<=cn(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(K(o[m]))continue;var h=b(o[m]);const V=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const S=c[V]||[];c[V]=S,S.push(h)}A(c,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function Hd(o){this.Aa=0,this.i=[],this.j=new Ms,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,o),this.cb=qs("retryDelaySeedMs",1e4,o),this.Wa=qs("forwardChannelMaxRetries",2,o),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new bd(o&&o.concurrentRequestLimit),this.Da=new Yw,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Hd.prototype,t.la=8,t.G=1,t.connect=function(o,c,h,m){ft(0),this.W=o,this.H=c||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=Zd(this,null,this.W),To(this)};function Fl(o){if(Kd(o),o.G==3){var c=o.U++,h=ln(o.I);if(Re(h,"SID",o.K),Re(h,"RID",c),Re(h,"TYPE","terminate"),Hs(o,h),c=new bn(o,o.j,c),c.L=2,c.v=go(ln(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=c.v,h=!0),h||(c.g=ep(c.j,null),c.g.ea(c.v)),c.F=Date.now(),fo(c)}Jd(o)}function Eo(o){o.g&&(Ul(o),o.g.cancel(),o.g=null)}function Kd(o){Eo(o),o.u&&(l.clearTimeout(o.u),o.u=null),wo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function To(o){if(!Rd(o.h)&&!o.s){o.s=!0;var c=o.Ga;ce||Nr(),ae||(ce(),ae=!0),mt.add(c,o),o.B=0}}function tI(o,c){return Vd(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=c.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ks(v(o.Ga,o,c),Xd(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const V=new bn(this,this.j,o);let S=this.o;if(this.S&&(S?(S=_(S),w(S,this.S)):S=this.S),this.m!==null||this.O||(V.H=S,S=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(c+=m,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=Wd(this,V,c),h=ln(this.I),Re(h,"RID",o),Re(h,"CVER",22),this.D&&Re(h,"X-HTTP-Session-Id",this.D),Hs(this,h),S&&(this.O?c="headers="+encodeURIComponent(String(Ld(S)))+"&"+c:this.m&&Ml(h,this.m,S)),kl(this.h,V),this.Ua&&Re(h,"TYPE","init"),this.P?(Re(h,"$req",c),Re(h,"SID","null"),V.T=!0,Pl(V,h,null)):Pl(V,h,c),this.G=2}}else this.G==3&&(o?zd(this,o):this.i.length==0||Rd(this.h)||zd(this))};function zd(o,c){var h;c?h=c.l:h=o.U++;const m=ln(o.I);Re(m,"SID",o.K),Re(m,"RID",h),Re(m,"AID",o.T),Hs(o,m),o.m&&o.o&&Ml(m,o.m,o.o),h=new bn(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),c&&(o.i=c.D.concat(o.i)),c=Wd(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),kl(o.h,h),Pl(h,m,c)}function Hs(o,c){o.H&&he(o.H,function(h,m){Re(c,m,h)}),o.l&&Cd({},function(h,m){Re(c,m,h)})}function Wd(o,c,h){h=Math.min(o.i.length,h);var m=o.l?v(o.l.Na,o.l,o):null;e:{var V=o.i;let S=-1;for(;;){const q=["count="+h];S==-1?0<h?(S=V[0].g,q.push("ofs="+S)):S=0:q.push("ofs="+S);let Ae=!0;for(let Ye=0;Ye<h;Ye++){let ve=V[Ye].g;const st=V[Ye].map;if(ve-=S,0>ve)S=Math.max(0,V[Ye].g-100),Ae=!1;else try{Xw(st,q,"req"+ve+"_")}catch{m&&m(st)}}if(Ae){m=q.join("&");break e}}}return o=o.i.splice(0,h),c.D=o,m}function Gd(o){if(!o.g&&!o.u){o.Y=1;var c=o.Fa;ce||Nr(),ae||(ce(),ae=!0),mt.add(c,o),o.v=0}}function Ll(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ks(v(o.Fa,o),Xd(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,Qd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ks(v(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Eo(this),Qd(this))};function Ul(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function Qd(o){o.g=new bn(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var c=ln(o.qa);Re(c,"RID","rpc"),Re(c,"SID",o.K),Re(c,"AID",o.T),Re(c,"CI",o.F?"0":"1"),!o.F&&o.ja&&Re(c,"TO",o.ja),Re(c,"TYPE","xmlhttp"),Hs(o,c),o.m&&o.o&&Ml(c,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=go(ln(c)),h.m=null,h.P=!0,wd(h,o)}t.Za=function(){this.C!=null&&(this.C=null,Eo(this),Ll(this),ft(19))};function wo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function Yd(o,c){var h=null;if(o.g==c){wo(o),Ul(o),o.g=null;var m=2}else if(xl(o.h,c))h=c.D,Sd(o.h,c),m=1;else return;if(o.G!=0){if(c.o)if(m==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var V=o.B;m=co(),ne(m,new yd(m,h)),To(o)}else Gd(o);else if(V=c.s,V==3||V==0&&0<c.X||!(m==1&&tI(o,c)||m==2&&Ll(o)))switch(h&&0<h.length&&(c=o.h,c.i=c.i.concat(h)),V){case 1:tr(o,5);break;case 4:tr(o,10);break;case 3:tr(o,6);break;default:tr(o,2)}}}function Xd(o,c){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*c}function tr(o,c){if(o.j.info("Error code "+c),c==2){var h=v(o.fb,o),m=o.Xa;const V=!m;m=new er(m||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||po(m,"https"),go(m),V?Gw(m.toString(),h):Qw(m.toString(),h)}else ft(2);o.G=0,o.l&&o.l.sa(c),Jd(o),Kd(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function Jd(o){if(o.G=0,o.ka=[],o.l){const c=Nd(o.h);(c.length!=0||o.i.length!=0)&&(k(o.ka,c),k(o.ka,o.i),o.h.i.length=0,P(o.i),o.i.length=0),o.l.ra()}}function Zd(o,c,h){var m=h instanceof er?ln(h):new er(h);if(m.g!="")c&&(m.g=c+"."+m.g),mo(m,m.s);else{var V=l.location;m=V.protocol,c=c?c+"."+V.hostname:V.hostname,V=+V.port;var S=new er(null);m&&po(S,m),c&&(S.g=c),V&&mo(S,V),h&&(S.l=h),m=S}return h=o.D,c=o.ya,h&&c&&Re(m,h,c),Re(m,"VER",o.la),Hs(o,m),m}function ep(o,c,h){if(c&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Ca&&!o.pa?new Ce(new _o({eb:h})):new Ce(o.pa),c.Ha(o.J),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tp(){}t=tp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Io(){}Io.prototype.g=function(o,c){return new Tt(o,c)};function Tt(o,c){G.call(this),this.g=new Hd(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(o?o["X-WebChannel-Client-Profile"]=c.va:o={"X-WebChannel-Client-Profile":c.va}),this.g.S=o,(o=c&&c.Sb)&&!K(o)&&(this.g.m=o),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!K(c)&&(this.g.D=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new kr(this)}C(Tt,G),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){Fl(this.g)},Tt.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Pr(o),o=h);c.i.push(new Lw(c.Ya++,o)),c.G==3&&To(c)},Tt.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,Tt.aa.N.call(this)};function np(o){Vl.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){e:{for(const h in c){o=h;break e}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}C(np,Vl);function rp(){Sl.call(this),this.status=1}C(rp,Sl);function kr(o){this.g=o}C(kr,tp),kr.prototype.ua=function(){ne(this.g,"a")},kr.prototype.ta=function(o){ne(this.g,new np(o))},kr.prototype.sa=function(o){ne(this.g,new rp)},kr.prototype.ra=function(){ne(this.g,"b")},Io.prototype.createWebChannel=Io.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,dh=function(){return new Io},fh=function(){return co()},hh=Jn,Pa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},uo.NO_ERROR=0,uo.TIMEOUT=8,uo.HTTP_ERROR=6,xi=uo,vd.COMPLETE="complete",uh=vd,pd.EventType=Os,Os.OPEN="a",Os.CLOSE="b",Os.ERROR="c",Os.MESSAGE="d",G.prototype.listen=G.prototype.K,us=pd,Ce.prototype.listenOnce=Ce.prototype.L,Ce.prototype.getLastError=Ce.prototype.Ka,Ce.prototype.getLastErrorCode=Ce.prototype.Ba,Ce.prototype.getStatus=Ce.prototype.Z,Ce.prototype.getResponseJson=Ce.prototype.Oa,Ce.prototype.getResponseText=Ce.prototype.oa,Ce.prototype.send=Ce.prototype.ea,Ce.prototype.setWithCredentials=Ce.prototype.Ha,ch=Ce}).apply(typeof Oi<"u"?Oi:typeof self<"u"?self:typeof window<"u"?window:{});const ph="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Je.UNAUTHENTICATED=new Je(null),Je.GOOGLE_CREDENTIALS=new Je("google-credentials-uid"),Je.FIRST_PARTY=new Je("first-party-uid"),Je.MOCK_USER=new Je("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new Wu("@firebase/firestore");function hs(){return jn.logLevel}function z(t,...e){if(jn.logLevel<=me.DEBUG){const n=e.map(Da);jn.debug(`Firestore (${pr}): ${t}`,...n)}}function sn(t,...e){if(jn.logLevel<=me.ERROR){const n=e.map(Da);jn.error(`Firestore (${pr}): ${t}`,...n)}}function mr(t,...e){if(jn.logLevel<=me.WARN){const n=e.map(Da);jn.warn(`Firestore (${pr}): ${t}`,...n)}}function Da(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${pr}) INTERNAL ASSERTION FAILED: `+t;throw sn(e),new Error(e)}function Ie(t,e){t||se()}function ie(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ee extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Je.UNAUTHENTICATED)))}shutdown(){}}class Jy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class Zy{constructor(e){this.t=e,this.currentUser=Je.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new yn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new yn,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;e.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new yn)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new mh(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Je(e)}}class ev{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Je.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tv{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new ev(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable((()=>n(Je.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class nv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rv{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new nv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sv(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=sv(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function gr(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ee(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ee(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ee(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ee(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ke(0,0))}static max(){return new oe(new ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ve extends fs{construct(e,n,r){return new Ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ee(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Ve(n)}static emptyPath(){return new Ve([])}}const iv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends fs{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return iv.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new He(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ee(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ee(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ee(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new ee(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ve.fromString(e))}static fromName(e){return new te(Ve.fromString(e).popFirst(5))}static empty(){return new te(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ve(e.slice()))}}function ov(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new vn(s,te.empty(),e)}function av(t){return new vn(t.readTime,t.key,-1)}class vn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new vn(oe.min(),te.empty(),-1)}static max(){return new vn(oe.max(),te.empty(),-1)}}function lv(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t){if(t.code!==L.FAILED_PRECONDITION||t.message!==cv)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):M.reject(n)}static resolve(e){return new M(((n,r)=>{n(e)}))}static reject(e){return new M(((n,r)=>{r(e)}))}static waitFor(e){return new M(((n,r)=>{let s=0,i=0,a=!1;e.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(e,n){return new M(((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(e[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(e,n){return new M(((r,s)=>{const i=()=>{e()===!0?n().next((()=>{i()}),s):r()};i()}))}}function hv(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ps(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Oa.oe=-1;function ki(t){return t==null}function Mi(t){return t===0&&1/t==-1/0}function fv(t){return typeof t=="number"&&Number.isInteger(t)&&!Mi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _r(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fi(this.root,e,this.comparator,!0)}}class Fi{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1,Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new vh(this.data.getIterator())}getIteratorFrom(e){return new vh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class vh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new ze(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gr(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Eh("Invalid base64 string: "+i):i}})(e);return new We(n)}static fromUint8Array(e){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(e);return new We(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}We.EMPTY_BYTE_STRING=new We("");const dv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function En(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=dv.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:De(t.seconds),nanos:De(t.nanos)}}function De(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qn(t){return typeof t=="string"?We.fromBase64String(t):We.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ka(t){const e=t.mapValue.fields.__previous_value__;return xa(e)?ka(e):e}function ms(t){const e=En(t.mapValue.fields.__local_write_time__.timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(e,n,r,s,i,a,l,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f}}class gs{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gs("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li={mapValue:{}};function Hn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?xa(t)?4:gv(t)?9007199254740991:mv(t)?10:11:se()}function qt(t,e){if(t===e)return!0;const n=Hn(t);if(n!==Hn(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ms(t).isEqual(ms(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=En(s.timestampValue),l=En(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,i){return qn(s.bytesValue).isEqual(qn(i.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,i){return De(s.geoPointValue.latitude)===De(i.geoPointValue.latitude)&&De(s.geoPointValue.longitude)===De(i.geoPointValue.longitude)})(t,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return De(s.integerValue)===De(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=De(s.doubleValue),l=De(i.doubleValue);return a===l?Mi(a)===Mi(l):isNaN(a)&&isNaN(l)}return!1})(t,e);case 9:return gr(t.arrayValue.values||[],e.arrayValue.values||[],qt);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(_h(a)!==_h(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!qt(a[u],l[u])))return!1;return!0})(t,e);default:return se()}}function _s(t,e){return(t.values||[]).find((n=>qt(n,e)))!==void 0}function yr(t,e){if(t===e)return 0;const n=Hn(t),r=Hn(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return(function(i,a){const l=De(i.integerValue||i.doubleValue),u=De(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(t,e);case 3:return Th(t.timestampValue,e.timestampValue);case 4:return Th(ms(t),ms(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return(function(i,a){const l=qn(i),u=qn(a);return l.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ge(l[f],u[f]);if(d!==0)return d}return ge(l.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(i,a){const l=ge(De(i.latitude),De(a.latitude));return l!==0?l:ge(De(i.longitude),De(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return wh(t.arrayValue,e.arrayValue);case 10:return(function(i,a){var l,u,f,d;const p=i.fields||{},v=a.fields||{},I=(l=p.value)===null||l===void 0?void 0:l.arrayValue,C=(u=v.value)===null||u===void 0?void 0:u.arrayValue,P=ge(((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0,((d=C==null?void 0:C.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:wh(I,C)})(t.mapValue,e.mapValue);case 11:return(function(i,a){if(i===Li.mapValue&&a===Li.mapValue)return 0;if(i===Li.mapValue)return 1;if(a===Li.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let p=0;p<u.length&&p<d.length;++p){const v=ge(u[p],d[p]);if(v!==0)return v;const I=yr(l[u[p]],f[d[p]]);if(I!==0)return I}return ge(u.length,d.length)})(t.mapValue,e.mapValue);default:throw se()}}function Th(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=En(t),r=En(e),s=ge(n.seconds,r.seconds);return s!==0?s:ge(n.nanos,r.nanos)}function wh(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=yr(n[s],r[s]);if(i)return i}return ge(n.length,r.length)}function vr(t){return Ma(t)}function Ma(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=En(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return qn(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return te.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ma(i);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ma(n.fields[a])}`;return s+"}"})(t.mapValue):se()}function Fa(t){return!!t&&"integerValue"in t}function La(t){return!!t&&"arrayValue"in t}function Ih(t){return!!t&&"nullValue"in t}function Ah(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ui(t){return!!t&&"mapValue"in t}function mv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ys(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return _r(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ys(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ys(t.arrayValue.values[n]);return e}return Object.assign({},t)}function gv(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.value=e}static empty(){return new wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ui(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ys(n)}setAll(e){let n=He.emptyPath(),r={},s=[];e.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ys(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Ui(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Ui(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){_r(n,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new wt(ys(this.value))}}function bh(t){const e=[];return _r(t.fields,((n,r)=>{const s=new He([n]);if(Ui(r)){const i=bh(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)})),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ze(e,0,oe.min(),oe.min(),oe.min(),wt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ze(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new Ze(e,2,n,oe.min(),oe.min(),wt.empty(),0)}static newUnknownDocument(e,n){return new Ze(e,3,n,oe.min(),oe.min(),wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ze&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ze(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.position=e,this.inclusive=n}}function Rh(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(a.referenceValue),n.key):r=yr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vh(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!qt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n="asc"){this.field=e,this.dir=n}}function _v(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{}class Ue extends Sh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vv(e,n,r):n==="array-contains"?new wv(e,r):n==="in"?new Iv(e,r):n==="not-in"?new Av(e,r):n==="array-contains-any"?new bv(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Ev(e,r):new Tv(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yr(n,this.value)):n!==null&&Hn(this.value)===Hn(n)&&this.matchesComparison(yr(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ht extends Sh{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Ht(e,n)}matches(e){return Nh(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Nh(t){return t.op==="and"}function Ch(t){return yv(t)&&Nh(t)}function yv(t){for(const e of t.filters)if(e instanceof Ht)return!1;return!0}function Ua(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+vr(t.value);if(Ch(t))return t.filters.map((e=>Ua(e))).join(",");{const e=t.filters.map((n=>Ua(n))).join(",");return`${t.op}(${e})`}}function Ph(t,e){return t instanceof Ue?(function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&qt(r.value,s.value)})(t,e):t instanceof Ht?(function(r,s){return s instanceof Ht&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Ph(a,s.filters[l])),!0):!1})(t,e):void se()}function Dh(t){return t instanceof Ue?(function(n){return`${n.field.canonicalString()} ${n.op} ${vr(n.value)}`})(t):t instanceof Ht?(function(n){return n.op.toString()+" {"+n.getFilters().map(Dh).join(" ,")+"}"})(t):"Filter"}class vv extends Ue{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class Ev extends Ue{constructor(e,n){super(e,"in",n),this.keys=Oh("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Tv extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=Oh("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Oh(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>te.fromName(r.referenceValue)))}class wv extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return La(n)&&_s(n.arrayValue,this.value)}}class Iv extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_s(this.value.arrayValue,n)}}class Av extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(_s(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_s(this.value.arrayValue,n)}}class bv extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!La(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>_s(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.ue=null}}function xh(t,e=null,n=[],r=[],s=null,i=null,a=null){return new Rv(t,e,n,r,s,i,a)}function Ba(t){const e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>Ua(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),ki(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>vr(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>vr(r))).join(",")),e.ue=n}return e.ue}function $a(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_v(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ph(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vh(t.startAt,e.startAt)&&Vh(t.endAt,e.endAt)}function ja(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Vv(t,e,n,r,s,i,a,l){return new ji(t,e,n,r,s,i,a,l)}function qa(t){return new ji(t)}function kh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sv(t){return t.collectionGroup!==null}function vs(t){const e=ie(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ze(He.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(e).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new $i(i,r))})),n.has(He.keyField().canonicalString())||e.ce.push(new $i(He.keyField(),r))}return e.ce}function Kt(t){const e=ie(t);return e.le||(e.le=Nv(e,vs(t))),e.le}function Nv(t,e){if(t.limitType==="F")return xh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new $i(s.field,i)}));const n=t.endAt?new Bi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bi(t.startAt.position,t.startAt.inclusive):null;return xh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ha(t,e,n){return new ji(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qi(t,e){return $a(Kt(t),Kt(e))&&t.limitType===e.limitType}function Mh(t){return`${Ba(Kt(t))}|lt:${t.limitType}`}function Er(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Dh(s))).join(", ")}]`),ki(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>vr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>vr(s))).join(",")),`Target(${r})`})(Kt(t))}; limitType=${t.limitType})`}function Hi(t,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(t,e)&&(function(r,s){for(const i of vs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=Rh(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,vs(r),s)||r.endAt&&!(function(a,l,u){const f=Rh(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,vs(r),s))})(t,e)}function Cv(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Fh(t){return(e,n)=>{let r=!1;for(const s of vs(t)){const i=Pv(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Pv(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?yr(u,f):se()})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){_r(this.inner,((n,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return yh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Ne(te.comparator);function on(){return Dv}const Lh=new Ne(te.comparator);function Es(...t){let e=Lh;for(const n of t)e=e.insert(n.key,n);return e}function Uh(t){let e=Lh;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Kn(){return Ts()}function Bh(){return Ts()}function Ts(){return new Tr((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Ov=new Ne(te.comparator),xv=new ze(te.comparator);function ue(...t){let e=xv;for(const n of t)e=e.add(n);return e}const kv=new ze(ge);function Mv(){return kv}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mi(e)?"-0":e}}function $h(t){return{integerValue:""+t}}function Fv(t,e){return fv(e)?$h(e):Ka(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this._=void 0}}function Lv(t,e,n){return t instanceof zi?(function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&xa(i)&&(i=ka(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}})(n,e):t instanceof ws?qh(t,e):t instanceof Is?Hh(t,e):(function(s,i){const a=jh(s,i),l=Kh(a)+Kh(s.Pe);return Fa(a)&&Fa(s.Pe)?$h(l):Ka(s.serializer,l)})(t,e)}function Uv(t,e,n){return t instanceof ws?qh(t,e):t instanceof Is?Hh(t,e):n}function jh(t,e){return t instanceof Wi?(function(r){return Fa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class zi extends Ki{}class ws extends Ki{constructor(e){super(),this.elements=e}}function qh(t,e){const n=zh(e);for(const r of t.elements)n.some((s=>qt(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Is extends Ki{constructor(e){super(),this.elements=e}}function Hh(t,e){let n=zh(e);for(const r of t.elements)n=n.filter((s=>!qt(s,r)));return{arrayValue:{values:n}}}class Wi extends Ki{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Kh(t){return De(t.integerValue||t.doubleValue)}function zh(t){return La(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Bv(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof ws&&s instanceof ws||r instanceof Is&&s instanceof Is?gr(r.elements,s.elements,qt):r instanceof Wi&&s instanceof Wi?qt(r.Pe,s.Pe):r instanceof zi&&s instanceof zi})(t.transform,e.transform)}class $v{constructor(e,n){this.version=e,this.transformResults=n}}class an{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new an}static exists(e){return new an(void 0,e)}static updateTime(e){return new an(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gi(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qi{}function Wh(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jh(t.key,an.none()):new bs(t.key,t.data,an.none());{const n=t.data,r=wt.empty();let s=new ze(He.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new zn(t.key,r,new Ot(s.toArray()),an.none())}}function jv(t,e,n){t instanceof bs?(function(s,i,a){const l=s.value.clone(),u=Yh(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(t,e,n):t instanceof zn?(function(s,i,a){if(!Gi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Yh(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Qh(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function As(t,e,n,r){return t instanceof bs?(function(i,a,l,u){if(!Gi(i.precondition,a))return l;const f=i.value.clone(),d=Xh(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof zn?(function(i,a,l,u){if(!Gi(i.precondition,a))return l;const f=Xh(i.fieldTransforms,u,a),d=a.data;return d.setAll(Qh(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(t,e,n,r):(function(i,a,l){return Gi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(t,e,n)}function qv(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jh(r.transform,s||null);i!=null&&(n===null&&(n=wt.empty()),n.set(r.field,i))}return n||null}function Gh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gr(r,s,((i,a)=>Bv(i,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class bs extends Qi{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zn extends Qi{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qh(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Yh(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,Uv(a,l,n[s]))}return r}function Xh(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,Lv(i,a,e))}return r}class Jh extends Qi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Hv extends Qi{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jv(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=As(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=As(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Bh();return this.mutations.forEach((s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Wh(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(oe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ue())}isEqual(e){return this.batchId===e.batchId&&gr(this.mutations,e.mutations,((n,r)=>Gh(n,r)))&&gr(this.baseMutations,e.baseMutations,((n,r)=>Gh(n,r)))}}class za{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=(function(){return Ov})();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new za(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,de;function Gv(t){switch(t){default:return se();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function Zh(t){if(t===void 0)return sn("GRPC error has no .code"),L.UNKNOWN;switch(t){case Me.OK:return L.OK;case Me.CANCELLED:return L.CANCELLED;case Me.UNKNOWN:return L.UNKNOWN;case Me.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Me.INTERNAL:return L.INTERNAL;case Me.UNAVAILABLE:return L.UNAVAILABLE;case Me.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Me.NOT_FOUND:return L.NOT_FOUND;case Me.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Me.ABORTED:return L.ABORTED;case Me.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Me.DATA_LOSS:return L.DATA_LOSS;default:return se()}}(de=Me||(Me={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv=new $n([4294967295,4294967295],0);function ef(t){const e=Qv().encode(t),n=new lh;return n.update(e),new Uint8Array(n.digest())}function tf(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $n([n,r],0),new $n([s,i],0)]}class Wa{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Rs(`Invalid padding: ${n}`);if(r<0)throw new Rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Rs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$n.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply($n.fromNumber(r)));return s.compare(Yv)===1&&(s=new $n([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ef(e),[r,s]=tf(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Wa(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(e){if(this.Ie===0)return;const n=ef(e),[r,s]=tf(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vs.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yi(oe.min(),s,new Ne(ge),on(),ue())}}class Vs{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vs(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class nf{constructor(e,n){this.targetId=e,this.me=n}}class rf{constructor(e,n,r=We.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sf{constructor(){this.fe=0,this.ge=af(),this.pe=We.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se()}})),new Vs(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=af()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Xv{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=of(),this.Qe=new Ne(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,(n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach(((r,s)=>{this.ze(s)&&n(s)}))}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(ja(i))if(r===0){const a=new te(i.path);this.Ue(n,a,Ze.newNoDocument(a,oe.min()))}else Ie(r===1);else{const a=this.Ye(n);if(a!==r){const l=this.Ze(e),u=l?this.Xe(l,e,a):1;if(u!==0){this.je(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=qn(r).toUint8Array()}catch(u){if(u instanceof Eh)return mr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Wa(a,s,i)}catch(u){return mr(u instanceof Rs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Le.tt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)})),s}rt(e){const n=new Map;this.Be.forEach(((i,a)=>{const l=this.Je(a);if(l){if(i.current&&ja(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Ze.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}}));let r=ue();this.qe.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.ke.forEach(((i,a)=>a.setReadTime(e)));const s=new Yi(e,n,this.Qe,this.ke,r);return this.ke=on(),this.qe=of(),this.Qe=new Ne(ge),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ze(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sf),this.Le.getRemoteKeysForTarget(e).forEach((n=>{this.Ue(e,n,null)}))}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function of(){return new Ne(te.comparator)}function af(){return new Ne(te.comparator)}const Jv={asc:"ASCENDING",desc:"DESCENDING"},Zv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eE={and:"AND",or:"OR"};class tE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ga(t,e){return t.useProto3Json||ki(e)?e:{value:e}}function Ji(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lf(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nE(t,e){return Ji(t,e.toTimestamp())}function zt(t){return Ie(!!t),oe.fromTimestamp((function(n){const r=En(n);return new ke(r.seconds,r.nanos)})(t))}function Qa(t,e){return Ya(t,e).canonicalString()}function Ya(t,e){const n=(function(s){return new Ve(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function cf(t){const e=Ve.fromString(t);return Ie(mf(e)),e}function Xa(t,e){return Qa(t.databaseId,e.path)}function Ja(t,e){const n=cf(e);if(n.get(1)!==t.databaseId.projectId)throw new ee(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ee(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(hf(n))}function uf(t,e){return Qa(t.databaseId,e)}function rE(t){const e=cf(t);return e.length===4?Ve.emptyPath():hf(e)}function Za(t){return new Ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function hf(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ff(t,e,n){return{name:Xa(t,e),fields:n.value.mapValue.fields}}function sE(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:se()})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(Ie(d===void 0||typeof d=="string"),We.fromBase64String(d||"")):(Ie(d===void 0||d instanceof Buffer||d instanceof Uint8Array),We.fromUint8Array(d||new Uint8Array))})(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?L.UNKNOWN:Zh(f.code);return new ee(d,f.message||"")})(a);n=new rf(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ja(t,r.document.name),i=zt(r.document.updateTime),a=r.document.createTime?zt(r.document.createTime):oe.min(),l=new wt({mapValue:{fields:r.document.fields}}),u=Ze.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Xi(f,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ja(t,r.document),i=r.readTime?zt(r.readTime):oe.min(),a=Ze.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Xi([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ja(t,r.document),i=r.removedTargetIds||[];n=new Xi([],i,s,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new Wv(s,i),l=r.targetId;n=new nf(l,a)}}return n}function iE(t,e){let n;if(e instanceof bs)n={update:ff(t,e.key,e.value)};else if(e instanceof Jh)n={delete:Xa(t,e.key)};else if(e instanceof zn)n={update:ff(t,e.key,e.data),updateMask:pE(e.fieldMask)};else{if(!(e instanceof Hv))return se();n={verify:Xa(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof zi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ws)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Is)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),increment:l.Pe};throw se()})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:nE(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()})(t,e.precondition)),n}function oE(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map((n=>(function(s,i){let a=s.updateTime?zt(s.updateTime):zt(i);return a.isEqual(oe.min())&&(a=zt(i)),new $v(a,s.transformResults||[])})(n,e)))):[]}function aE(t,e){return{documents:[uf(t,e.path)]}}function lE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uf(t,s);const i=(function(f){if(f.length!==0)return pf(Ht.create(f,"and"))})(e.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(v){return{field:wr(v.field),direction:hE(v.dir)}})(d)))})(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ga(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{_t:n,parent:s}}function cE(t){let e=rE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const v=df(p);return v instanceof Ht&&Ch(v)?v.getFilters():[v]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((v=>(function(C){return new $i(Ir(C.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(v)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let v;return v=typeof p=="object"?p.value:p,ki(v)?null:v})(n.limit));let u=null;n.startAt&&(u=(function(p){const v=!!p.before,I=p.values||[];return new Bi(I,v)})(n.startAt));let f=null;return n.endAt&&(f=(function(p){const v=!p.before,I=p.values||[];return new Bi(I,v)})(n.endAt)),Vv(e,s,a,i,l,"F",u,f)}function uE(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function df(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ir(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ir(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ir(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ir(n.unaryFilter.field);return Ue.create(a,"!=",{nullValue:"NULL_VALUE"});default:return se()}})(t):t.fieldFilter!==void 0?(function(n){return Ue.create(Ir(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Ht.create(n.compositeFilter.filters.map((r=>df(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se()}})(n.compositeFilter.op))})(t):se()}function hE(t){return Jv[t]}function fE(t){return Zv[t]}function dE(t){return eE[t]}function wr(t){return{fieldPath:t.canonicalString()}}function Ir(t){return He.fromServerFormat(t.fieldPath)}function pf(t){return t instanceof Ue?(function(n){if(n.op==="=="){if(Ah(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NAN"}};if(Ih(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ah(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NAN"}};if(Ih(n.value))return{unaryFilter:{field:wr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(n.field),op:fE(n.op),value:n.value}}})(t):t instanceof Ht?(function(n){const r=n.getFilters().map((s=>pf(s)));return r.length===1?r[0]:{compositeFilter:{op:dE(n.op),filters:r}}})(t):se()}function pE(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function mf(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e,n,r,s,i=oe.min(),a=oe.min(),l=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Tn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Tn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.ct=e}}function gE(t){const e=cE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ha(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.un=new yE}addToCollectionParentIndex(e,n){return this.un.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(vn.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(vn.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class yE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(Ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(Ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ar(0)}static kn(){return new Ar(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(){this.changes=new Tr((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ze.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&As(r.mutation,s,Ot.empty(),ke.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ue()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ue()){const s=Kn();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((i=>{let a=Es();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Kn();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ue())))}populateOverlays(e,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(e,n,r,s){let i=on();const a=Ts(),l=(function(){return Ts()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof zn)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),As(d.mutation,f,d.mutation.getFieldMask(),ke.now())):a.set(f.key,Ot.empty())})),this.recalculateAndSaveOverlays(e,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>{var p;return l.set(f,new EE(d,(p=a.get(f))!==null&&p!==void 0?p:null))})),l)))}recalculateAndSaveOverlays(e,n){const r=Ts();let s=new Ne(((a,l)=>a-l)),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||Ot.empty();d=l.applyToLocalView(f,d),r.set(u,d);const p=(s.get(l.batchId)||ue()).add(u);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,p=Bh();d.forEach((v=>{if(!i.has(v)){const I=Wh(n.get(v),r.get(v));I!==null&&p.set(v,I),i=i.add(v)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,p))}return M.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Sv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):M.resolve(Kn());let l=-1,u=i;return a.next((f=>M.forEach(f,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next((v=>{u=u.insert(d,v)}))))).next((()=>this.populateOverlays(e,f,i))).next((()=>this.computeViews(e,u,f,ue()))).next((d=>({batchId:l,changes:Uh(d)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next((r=>{let s=Es();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Es();return this.indexManager.getCollectionParents(e,i).next((l=>M.forEach(l,(u=>{const f=(function(p,v){return new ji(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((d=>{d.forEach(((p,v)=>{a=a.insert(p,v)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,Ze.newInvalidDocument(d)))}));let l=Es();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&As(d.mutation,f,Ot.empty(),ke.now()),Hi(n,f)&&(l=l.insert(u,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return M.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:zt(s.createTime)}})(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,(function(s){return{name:s.name,query:gE(s.bundledQuery),readTime:zt(s.readTime)}})(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(){this.overlays=new Ne(te.comparator),this.Ir=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Kn();return M.forEach(n,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,i)=>{this.ht(e,n,i)})),M.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.Ir.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const s=Kn(),i=n.length+1,a=new te(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return M.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Kn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Kn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return M.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new zv(n,r));let i=this.Ir.get(n);i===void 0&&(i=ue(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.Tr=new ze($e.Er),this.dr=new ze($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach((r=>this.removeReference(r,n)))}gr(e){const n=new te(new Ve([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],(a=>{this.Vr(a),i.push(a.key)})),i}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Ve([])),r=new $e(n,e),s=new $e(n,e+1);let i=ue();return this.dr.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ze($e.Er)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Kv(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.br=this.br.add(new $e(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(e,n){return M.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],(a=>{const l=this.Dr(a.wr);i.push(l)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(ge);return n.forEach((s=>{const i=new $e(s,0),a=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],(l=>{r=r.add(l.wr)}))})),M.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const a=new $e(new te(i),0);let l=new ze(ge);return this.br.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.wr)),!0)}),a),M.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach((r=>{const s=this.Dr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return M.forEach(n.mutations,(s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.br=r}))}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.Mr=e,this.docs=(function(){return new Ne(te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Ze.newInvalidDocument(n))}getEntries(e,n){let r=on();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ze.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=on();const a=n.path,l=new te(a.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||lv(av(d),r)<=0||(s.has(d.key)||Hi(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se()}Or(e,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new VE(this)}getSize(e){return M.resolve(this.size)}}class VE extends vE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)})),M.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.persistence=e,this.Nr=new Tr((n=>Ba(n)),$a),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new el,this.targetCount=0,this.kr=Ar.Bn()}forEachTarget(e,n){return this.Nr.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),M.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ar(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Kn(n),M.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(e,a))})),M.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Oa(0),this.Kr=!1,this.Kr=!0,this.$r=new AE,this.referenceDelegate=e(this),this.Ur=new SE(this),this.indexManager=new _E,this.remoteDocumentCache=(function(s){return new RE(s)})((r=>this.referenceDelegate.Wr(r))),this.serializer=new mE(n),this.Gr=new wE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new IE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new bE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const s=new CE(this.Qr.next());return this.referenceDelegate.zr(),r(s).next((i=>this.referenceDelegate.jr(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Hr(e,n){return M.or(Object.values(this.qr).map((r=>()=>r.containsKey(e,n))))}}class CE extends uv{constructor(e){super(),this.currentSequenceNumber=e}}class tl{constructor(e){this.persistence=e,this.Jr=new el,this.Yr=null}static Zr(e){return new tl(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),M.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach((s=>this.Xr.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((i=>this.Xr.add(i.toString())))})).next((()=>r.removeTargetData(e,n)))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.Xr,(r=>{const s=te.fromPath(r);return this.ei(e,s).next((i=>{i||n.removeEntry(s,oe.min())}))})).next((()=>(this.Yr=null,n.apply(e))))}updateLimboDocument(e,n){return this.ei(e,n).next((r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())}))}Wr(e){return 0}ei(e,n){return M.or([()=>M.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new nl(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return O_()?8:hv(P_())>0?6:4})()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.Zi(e,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new PE;return this.Xi(e,n,a).next((l=>{if(i.result=l,this.zi)return this.es(e,n,a,l.size)}))})).next((()=>i.result))}es(e,n,r,s){return r.documentReadCount<this.ji?(hs()<=me.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Er(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),M.resolve()):(hs()<=me.DEBUG&&z("QueryEngine","Query:",Er(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(hs()<=me.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Er(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(n))):M.resolve())}Yi(e,n){if(kh(n))return M.resolve(null);let r=Kt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Ha(n,null,"F"),r=Kt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const a=ue(...i);return this.Ji.getDocuments(e,a).next((l=>this.indexManager.getMinOffset(e,r).next((u=>{const f=this.ts(n,l);return this.ns(n,f,a,u.readTime)?this.Yi(e,Ha(n,null,"F")):this.rs(e,f,n,u)}))))})))))}Zi(e,n,r,s){return kh(n)||s.isEqual(oe.min())?M.resolve(null):this.Ji.getDocuments(e,r).next((i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?M.resolve(null):(hs()<=me.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Er(n)),this.rs(e,a,n,ov(s,-1)).next((l=>l)))}))}ts(e,n){let r=new ze(Fh(e));return n.forEach(((s,i)=>{Hi(e,i)&&(r=r.add(i))})),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return hs()<=me.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Er(n)),this.Ji.getDocumentsMatchingQuery(e,n,vn.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ne(ge),this._s=new Tr((i=>Ba(i)),$a),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.os)))}}function xE(t,e,n,r){return new OE(t,e,n,r)}async function gf(t,e){const n=ie(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=ue();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({hs:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function kE(t,e){const n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const p=f.batch,v=p.keys();let I=M.resolve();return v.forEach((C=>{I=I.next((()=>d.getEntry(u,C))).next((P=>{const k=f.docVersions.get(C);Ie(k!==null),P.version.compareTo(k)<0&&(p.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),d.addEntry(P)))}))})),I.next((()=>l.mutationQueue.removeMutationBatch(u,p)))})(n,r,e,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=ue();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function _f(t){const e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Ur.getLastRemoteSnapshotVersion(n)))}function ME(t,e){const n=ie(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach(((d,p)=>{const v=s.get(p);if(!v)return;l.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p))));let I=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?I=I.withResumeToken(We.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):d.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(d.resumeToken,r)),s=s.insert(p,I),(function(P,k,X){return P.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(v,I,d)&&l.push(n.Ur.updateTargetData(i,I))}));let u=on(),f=ue();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(FE(i,a,e.documentUpdates).next((d=>{u=d.Ps,f=d.Is}))),!r.isEqual(oe.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next((p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return M.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.os=s,i)))}function FE(t,e,n){let r=ue(),s=ue();return n.forEach((i=>r=r.add(i))),e.getEntries(t,r).next((i=>{let a=on();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(oe.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):z("LocalStore","Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{Ps:a,Is:s}}))}function LE(t,e){const n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function UE(t,e){const n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Ur.getTargetData(r,e).next((i=>i?(s=i,M.resolve(s)):n.Ur.allocateTargetId(r).next((a=>(s=new Tn(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r}))}async function rl(t,e,n){const r=ie(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!ps(a))throw a;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function yf(t,e,n){const r=ie(t);let s=oe.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const p=ie(u),v=p._s.get(d);return v!==void 0?M.resolve(p.os.get(v)):p.Ur.getTargetData(f,d)})(r,a,Kt(e)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:oe.min(),n?i:ue()))).next((l=>(BE(r,Cv(e),l),{documents:l,Ts:i})))))}function BE(t,e,n){let r=t.us.get(e)||oe.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),t.us.set(e,r)}class vf{constructor(){this.activeTargetIds=Mv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $E{constructor(){this.so=new vf,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new vf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zi=null;function sl(){return Zi===null?Zi=(function(){return 268435456+Math.round(2147483648*Math.random())})():Zi++,"0x"+Zi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const et="WebChannelConnection";class KE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const l=sl(),u=this.xo(n,r.toUriEncodedString());z("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,i,a),this.No(n,u,f,s).then((d=>(z("RestConnection",`Received RPC '${n}' ${l}: `,d),d)),(d=>{throw mr("RestConnection",`RPC '${n}' ${l} failed with error: `,d,"url: ",u,"request:",s),d}))}Lo(n,r,s,i,a,l){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+pr})(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach(((i,a)=>n[a]=i)),s&&s.headers.forEach(((i,a)=>n[a]=i))}xo(n,r){const s=qE[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=sl();return new Promise(((a,l)=>{const u=new ch;u.setWithCredentials(!0),u.listenOnce(uh.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case xi.NO_ERROR:const d=u.getResponseJson();z(et,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),a(d);break;case xi.TIMEOUT:z(et,`RPC '${e}' ${i} timed out`),l(new ee(L.DEADLINE_EXCEEDED,"Request time out"));break;case xi.HTTP_ERROR:const p=u.getStatus();if(z(et,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const I=v==null?void 0:v.error;if(I&&I.status&&I.message){const C=(function(k){const X=k.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(X)>=0?X:L.UNKNOWN})(I.status);l(new ee(C,I.message))}else l(new ee(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ee(L.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{z(et,`RPC '${e}' ${i} completed.`)}}));const f=JSON.stringify(s);z(et,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",f,r,15)}))}Bo(e,n,r){const s=sl(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=dh(),l=fh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");z(et,`Creating RPC '${e}' stream ${s}: ${d}`,u);const p=a.createWebChannel(d,u);let v=!1,I=!1;const C=new HE({Io:k=>{I?z(et,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(v||(z(et,`Opening RPC '${e}' stream ${s} transport.`),p.open(),v=!0),z(et,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},To:()=>p.close()}),P=(k,X,K)=>{k.listen(X,(W=>{try{K(W)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return P(p,us.EventType.OPEN,(()=>{I||(z(et,`RPC '${e}' stream ${s} transport opened.`),C.yo())})),P(p,us.EventType.CLOSE,(()=>{I||(I=!0,z(et,`RPC '${e}' stream ${s} transport closed`),C.So())})),P(p,us.EventType.ERROR,(k=>{I||(I=!0,mr(et,`RPC '${e}' stream ${s} transport errored:`,k),C.So(new ee(L.UNAVAILABLE,"The operation could not be completed")))})),P(p,us.EventType.MESSAGE,(k=>{var X;if(!I){const K=k.data[0];Ie(!!K);const W=K,pe=W.error||((X=W[0])===null||X===void 0?void 0:X.error);if(pe){z(et,`RPC '${e}' stream ${s} received error:`,pe);const Q=pe.status;let he=(function(y){const w=Me[y];if(w!==void 0)return Zh(w)})(Q),A=pe.message;he===void 0&&(he=L.INTERNAL,A="Unknown error status: "+Q+" with message "+pe.message),I=!0,C.So(new ee(he,A)),p.close()}else z(et,`RPC '${e}' stream ${s} received:`,K),C.bo(K)}})),P(l,hh.STAT_EVENT,(k=>{k.stat===Pa.PROXY?z(et,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===Pa.NOPROXY&&z(et,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.wo()}),0),C}}function il(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){return new tE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,n,r,s,i,a,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tf(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===L.RESOURCE_EXHAUSTED?(sn(n.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.Yo===n&&this.P_(r,s)}),(r=>{e((()=>{const s=new ee(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)}))}))}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo((()=>{r((()=>this.listener.Eo()))})),this.stream.Ro((()=>{r((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((s=>{r((()=>this.I_(s)))})),this.stream.onMessage((s=>{r((()=>++this.e_==1?this.E_(s):this.onNext(s)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget((()=>this.Yo===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zE extends wf{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sE(this.serializer,e),r=(function(i){if(!("targetChange"in i))return oe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?oe.min():a.readTime?zt(a.readTime):oe.min()})(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Za(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=ja(u)?{documents:aE(i,u)}:{query:lE(i,u)._t},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=lf(i,a.resumeToken);const f=Ga(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(oe.min())>0){l.readTime=Ji(i,a.snapshotVersion.toTimestamp());const f=Ga(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,e);const r=uE(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Za(this.serializer),n.removeTarget=e,this.a_(n)}}class WE extends wf{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=oE(e.writeResults,e.commitTime),r=zt(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Za(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>iE(this.serializer,r)))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ee(L.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Mo(e,Ya(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ee(L.UNKNOWN,i.toString())}))}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Lo(e,Ya(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ee(L.UNKNOWN,a.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class QE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sn(n),this.D_=!1):z("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o((a=>{r.enqueueAndForget((async()=>{Wn(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await(async function(u){const f=ie(u);f.L_.add(4),await Ss(f),f.q_.set("Unknown"),f.L_.delete(4),await to(f)})(this))}))})),this.q_=new QE(r,s)}}async function to(t){if(Wn(t))for(const e of t.B_)await e(!0)}async function Ss(t){for(const e of t.B_)await e(!1)}function If(t,e){const n=ie(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cl(n)?ll(n):br(n).r_()&&al(n,e))}function ol(t,e){const n=ie(t),r=br(n);n.N_.delete(e),r.r_()&&Af(n,e),n.N_.size===0&&(r.r_()?r.o_():Wn(n)&&n.q_.set("Unknown"))}function al(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}br(t).A_(e)}function Af(t,e){t.Q_.xe(e),br(t).R_(e)}function ll(t){t.Q_=new Xv({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),br(t).start(),t.q_.v_()}function cl(t){return Wn(t)&&!br(t).n_()&&t.N_.size>0}function Wn(t){return ie(t).L_.size===0}function bf(t){t.Q_=void 0}async function XE(t){t.q_.set("Online")}async function JE(t){t.N_.forEach(((e,n)=>{al(t,e)}))}async function ZE(t,e){bf(t),cl(t)?(t.q_.M_(e),ll(t)):t.q_.set("Unknown")}async function eT(t,e,n){if(t.q_.set("Online"),e instanceof rf&&e.state===2&&e.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.N_.delete(l),s.Q_.removeTarget(l))})(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await no(t,r)}else if(e instanceof Xi?t.Q_.Ke(e):e instanceof nf?t.Q_.He(e):t.Q_.We(e),!n.isEqual(oe.min()))try{const r=await _f(t.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Q_.rt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.N_.get(f);d&&i.N_.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.N_.get(u);if(!d)return;i.N_.set(u,d.withResumeToken(We.EMPTY_BYTE_STRING,d.snapshotVersion)),Af(i,u);const p=new Tn(d.target,u,f,d.sequenceNumber);al(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(t,n)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await no(t,r)}}async function no(t,e,n){if(!ps(e))throw e;t.L_.add(1),await Ss(t),t.q_.set("Offline"),n||(n=()=>_f(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await to(t)}))}function Rf(t,e){return e().catch((n=>no(t,n,e)))}async function ro(t){const e=ie(t),n=wn(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;tT(e);)try{const s=await LE(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,nT(e,s)}catch(s){await no(e,s)}Vf(e)&&Sf(e)}function tT(t){return Wn(t)&&t.O_.length<10}function nT(t,e){t.O_.push(e);const n=wn(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Vf(t){return Wn(t)&&!wn(t).n_()&&t.O_.length>0}function Sf(t){wn(t).start()}async function rT(t){wn(t).p_()}async function sT(t){const e=wn(t);for(const n of t.O_)e.m_(n.mutations)}async function iT(t,e,n){const r=t.O_.shift(),s=za.from(r,e,n);await Rf(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await ro(t)}async function oT(t,e){e&&wn(t).V_&&await(async function(r,s){if((function(a){return Gv(a)&&a!==L.ABORTED})(s.code)){const i=r.O_.shift();wn(r).s_(),await Rf(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await ro(r)}})(t,e),Vf(t)&&Sf(t)}async function Nf(t,e){const n=ie(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Wn(n);n.L_.add(3),await Ss(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await to(n)}async function aT(t,e){const n=ie(t);e?(n.L_.delete(2),await to(n)):e||(n.L_.add(2),await Ss(n),n.q_.set("Unknown"))}function br(t){return t.K_||(t.K_=(function(n,r,s){const i=ie(n);return i.w_(),new zE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:XE.bind(null,t),Ro:JE.bind(null,t),mo:ZE.bind(null,t),d_:eT.bind(null,t)}),t.B_.push((async e=>{e?(t.K_.s_(),cl(t)?ll(t):t.q_.set("Unknown")):(await t.K_.stop(),bf(t))}))),t.K_}function wn(t){return t.U_||(t.U_=(function(n,r,s){const i=ie(n);return i.w_(),new WE(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:rT.bind(null,t),mo:oT.bind(null,t),f_:sT.bind(null,t),g_:iT.bind(null,t)}),t.B_.push((async e=>{e?(t.U_.s_(),await ro(t)):(await t.U_.stop(),t.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new yn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new ul(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ee(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hl(t,e){if(sn("AsyncQueue",`${e}: ${t}`),ps(t))return new ee(L.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Es(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Rr(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Rr)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Rr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this.W_=new Ne(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Vr{constructor(e,n,r,s,i,a,l,u,f){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Vr(e,n,Rr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class cT{constructor(){this.queries=Pf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ie(n),i=s.queries;s.queries=Pf(),i.forEach(((a,l)=>{for(const u of l.j_)u.onError(r)}))})(this,new ee(L.ABORTED,"Firestore shutting down"))}}function Pf(){return new Tr((t=>Mh(t)),qi)}async function uT(t,e){const n=ie(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new lT,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=hl(a,`Initialization of query '${Er(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&fl(n)}async function hT(t,e){const n=ie(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function fT(t,e){const n=ie(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.j_)l.X_(s)&&(r=!0);a.z_=s}}r&&fl(n)}function dT(t,e,n){const r=ie(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function fl(t){t.Y_.forEach((e=>{e.next()}))}var dl,Df;(Df=dl||(dl={})).ea="default",Df.Cache="cache";class pT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Vr(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Vr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.key=e}}class xf{constructor(e){this.key=e}}class mT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=Fh(e),this.Ra=new Rr(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Cf,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const v=s.get(d),I=Hi(this.query,p)?p:null,C=!!v&&this.mutatedKeys.has(v.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let k=!1;v&&I?v.data.isEqual(I.data)?C!==P&&(r.track({type:3,doc:I}),k=!0):this.ga(v,I)||(r.track({type:2,doc:I}),k=!0,(u&&this.Aa(I,u)>0||f&&this.Aa(I,f)<0)&&(l=!0)):!v&&I?(r.track({type:0,doc:I}),k=!0):v&&!I&&(r.track({type:1,doc:v}),k=!0,(u||f)&&(l=!0)),k&&(I?(a=a.add(I),i=P?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:a,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort(((d,p)=>(function(I,C){const P=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return P(I)-P(C)})(d.type,p.type)||this.Aa(d.doc,p.doc))),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,f=u!==this.Ea;return this.Ea=u,a.length!==0||f?{snapshot:new Vr(this.query,e.Ra,i,a,e.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Cf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((n=>this.Ta=this.Ta.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ta=this.Ta.delete(n))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach((r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))}));const n=[];return e.forEach((r=>{this.da.has(r)||n.push(new xf(r))})),this.da.forEach((r=>{e.has(r)||n.push(new Of(r))})),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Vr.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _T{constructor(e){this.key=e,this.va=!1}}class yT{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Tr((l=>Mh(l)),qi),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(te.comparator),this.Na=new Map,this.La=new el,this.Ba={},this.ka=new Map,this.qa=Ar.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function vT(t,e,n=!0){const r=jf(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await kf(r,e,n,!0),s}async function ET(t,e){const n=jf(t);await kf(n,e,!0,!1)}async function kf(t,e,n,r){const s=await UE(t.localStore,Kt(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await TT(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&If(t.remoteStore,s),l}async function TT(t,e,n,r,s){t.Ka=(p,v,I)=>(async function(P,k,X,K){let W=k.view.ma(X);W.ns&&(W=await yf(P.localStore,k.query,!1).then((({documents:A})=>k.view.ma(A,W))));const pe=K&&K.targetChanges.get(k.targetId),Q=K&&K.targetMismatches.get(k.targetId)!=null,he=k.view.applyChanges(W,P.isPrimaryClient,pe,Q);return $f(P,k.targetId,he.wa),he.snapshot})(t,p,v,I);const i=await yf(t.localStore,e,!0),a=new mT(e,i.Ts),l=a.ma(i.documents),u=Vs.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),f=a.applyChanges(l,t.isPrimaryClient,u);$f(t,n,f.wa);const d=new gT(e,n,a);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),f.snapshot}async function wT(t,e,n){const r=ie(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter((a=>!qi(a,e)))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await rl(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ol(r.remoteStore,s.targetId),pl(r,s.targetId)})).catch(ds)):(pl(r,s.targetId),await rl(r.localStore,s.targetId,!0))}async function IT(t,e){const n=ie(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ol(n.remoteStore,r.targetId))}async function AT(t,e,n){const r=PT(t);try{const s=await(function(a,l){const u=ie(a),f=ke.now(),d=l.reduce(((I,C)=>I.add(C.key)),ue());let p,v;return u.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let C=on(),P=ue();return u.cs.getEntries(I,d).next((k=>{C=k,C.forEach(((X,K)=>{K.isValidDocument()||(P=P.add(X))}))})).next((()=>u.localDocuments.getOverlayedDocuments(I,C))).next((k=>{p=k;const X=[];for(const K of l){const W=qv(K,p.get(K.key).overlayedDocument);W!=null&&X.push(new zn(K.key,W,bh(W.value.mapValue),an.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,X,l)})).next((k=>{v=k;const X=k.applyToLocalDocumentSet(p,P);return u.documentOverlayCache.saveOverlays(I,k.batchId,X)}))})).then((()=>({batchId:v.batchId,changes:Uh(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Ba[a.currentUser.toKey()];f||(f=new Ne(ge)),f=f.insert(l,u),a.Ba[a.currentUser.toKey()]=f})(r,s.batchId,n),await Ns(r,s.changes),await ro(r.remoteStore)}catch(s){const i=hl(s,"Failed to persist write");n.reject(i)}}async function Mf(t,e){const n=ie(t);try{const r=await ME(n.localStore,e);e.targetChanges.forEach(((s,i)=>{const a=n.Na.get(i);a&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?Ie(a.va):s.removedDocuments.size>0&&(Ie(a.va),a.va=!1))})),await Ns(n,r,e)}catch(r){await ds(r)}}function Ff(t,e,n){const r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach(((i,a)=>{const l=a.view.Z_(e);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=ie(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,p)=>{for(const v of p.j_)v.Z_(l)&&(f=!0)})),f&&fl(u)})(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bT(t,e,n){const r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new Ne(te.comparator);a=a.insert(i,Ze.newNoDocument(i,oe.min()));const l=ue().add(i),u=new Yi(oe.min(),new Map,new Ne(ge),a,l);await Mf(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),ml(r)}else await rl(r.localStore,e,!1).then((()=>pl(r,e,n))).catch(ds)}async function RT(t,e){const n=ie(t),r=e.batch.batchId;try{const s=await kE(n.localStore,e);Uf(n,r,null),Lf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ns(n,s)}catch(s){await ds(s)}}async function VT(t,e,n){const r=ie(t);try{const s=await(function(a,l){const u=ie(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((p=>(Ie(p!==null),d=p.keys(),u.mutationQueue.removeMutationBatch(f,p)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,e);Uf(r,e,n),Lf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ns(r,s)}catch(s){await ds(s)}}function Lf(t,e){(t.ka.get(e)||[]).forEach((n=>{n.resolve()})),t.ka.delete(e)}function Uf(t,e,n){const r=ie(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function pl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach((r=>{t.La.containsKey(r)||Bf(t,r)}))}function Bf(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ol(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),ml(t))}function $f(t,e,n){for(const r of n)r instanceof Of?(t.La.addReference(r.key,e),ST(t,r)):r instanceof xf?(z("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Bf(t,r.key)):se()}function ST(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(z("SyncEngine","New document in limbo: "+n),t.xa.add(r),ml(t))}function ml(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Ve.fromString(e)),r=t.qa.next();t.Na.set(r,new _T(n)),t.Oa=t.Oa.insert(n,r),If(t.remoteStore,new Tn(Kt(qa(n.path)),r,"TargetPurposeLimboResolution",Oa.oe))}}async function Ns(t,e,n){const r=ie(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach(((l,u)=>{a.push(r.Ka(u,e,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){s.push(f);const p=nl.Wi(u.targetId,f);i.push(p)}})))})),await Promise.all(a),r.Ca.d_(s),await(async function(u,f){const d=ie(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(f,(v=>M.forEach(v.$i,(I=>d.persistence.referenceDelegate.addReference(p,v.targetId,I))).next((()=>M.forEach(v.Ui,(I=>d.persistence.referenceDelegate.removeReference(p,v.targetId,I)))))))))}catch(p){if(!ps(p))throw p;z("LocalStore","Failed to update sequence numbers: "+p)}for(const p of f){const v=p.targetId;if(!p.fromCache){const I=d.os.get(v),C=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(C);d.os=d.os.insert(v,P)}}})(r.localStore,i))}async function NT(t,e){const n=ie(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await gf(n.localStore,e);n.currentUser=e,(function(i,a){i.ka.forEach((l=>{l.forEach((u=>{u.reject(new ee(L.CANCELLED,a))}))})),i.ka.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ns(n,r.hs)}}function CT(t,e){const n=ie(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let s=ue();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const l=n.Fa.get(a);s=s.unionWith(l.view.Va)}return s}}function jf(t){const e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mf.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bT.bind(null,e),e.Ca.d_=fT.bind(null,e.eventManager),e.Ca.$a=dT.bind(null,e.eventManager),e}function PT(t){const e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RT.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VT.bind(null,e),e}class so{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=eo(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return xE(this.persistence,new DE,e.initialUser,this.serializer)}Ga(e){return new NE(tl.Zr,this.serializer)}Wa(e){return new $E}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}so.provider={build:()=>new so};class gl{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ff(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NT.bind(null,this.syncEngine),await aT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new cT})()}createDatastore(e){const n=eo(e.databaseInfo.databaseId),r=(function(i){return new KE(i)})(e.databaseInfo);return(function(i,a,l,u){return new GE(i,a,l,u)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,i,a,l){return new YE(r,s,i,a,l)})(this.localStore,this.datastore,e.asyncQueue,(n=>Ff(this.syncEngine,n,0)),(function(){return Ef.D()?new Ef:new jE})())}createSyncEngine(e,n){return(function(s,i,a,l,u,f,d){const p=new yT(s,i,a,l,u,f);return d&&(p.Qa=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const i=ie(s);z("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ss(i),i.k_.shutdown(),i.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gl.provider={build:()=>new gl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):sn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Je.UNAUTHENTICATED,this.clientId=gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{z("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(z("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hl(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function _l(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await gf(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function qf(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xT(t);z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Nf(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Nf(e.remoteStore,s))),t._onlineComponents=e}async function xT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await _l(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===L.FAILED_PRECONDITION||s.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;mr("Error using user provided cache. Falling back to memory cache: "+n),await _l(t,new so)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await _l(t,new so);return t._offlineComponents}async function Hf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await qf(t,t._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await qf(t,new gl))),t._onlineComponents}function kT(t){return Hf(t).then((e=>e.syncEngine))}async function MT(t){const e=await Hf(t),n=e.eventManager;return n.onListen=vT.bind(null,e.syncEngine),n.onUnlisten=wT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ET.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IT.bind(null,e.syncEngine),n}function FT(t,e,n={}){const r=new yn;return t.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new DT({next:v=>{d.Za(),a.enqueueAndForget((()=>hT(i,p)));const I=v.docs.has(l);!I&&v.fromCache?f.reject(new ee(L.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&u&&u.source==="server"?f.reject(new ee(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),p=new pT(qa(l.path),d,{includeMetadataChanges:!0,_a:!0});return uT(i,p)})(await MT(t),t.asyncQueue,e,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e,n){if(!n)throw new ee(L.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function LT(t,e,n,r){if(e===!0&&r===!0)throw new ee(L.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Gf(t){if(!te.isDocumentKey(t))throw new ee(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Qf(t){if(te.isDocumentKey(t))throw new ee(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yl(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function io(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ee(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yl(t);throw new ee(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ee(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ee(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}LT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Kf((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ee(L.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oo{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ee(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ee(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yf(e),e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Xy;switch(r.type){case"firstParty":return new tv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ee(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=zf.get(n);r&&(z("ComponentProvider","Removing Datastore"),zf.delete(n),r.terminate())})(this),Promise.resolve()}}function UT(t,e,n,r={}){var s;const i=(t=io(t,oo))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Je.MOCK_USER;else{l=C_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ee(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Je(f)}t._authCredentials=new Jy(new mh(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vl(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new In(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class In extends vl{constructor(e,n,r){super(e,n,qa(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new te(e))}withConverter(e){return new In(this.firestore,e,this._path)}}function BT(t,e,...n){if(t=as(t),Wf("collection","path",e),t instanceof oo){const r=Ve.fromString(e,...n);return Qf(r),new In(t,null,r)}{if(!(t instanceof It||t instanceof In))throw new ee(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Qf(r),new In(t.firestore,null,r)}}function Xf(t,e,...n){if(t=as(t),arguments.length===1&&(e=gh.newId()),Wf("doc","path",e),t instanceof oo){const r=Ve.fromString(e,...n);return Gf(r),new It(t,null,new te(r))}{if(!(t instanceof It||t instanceof In))throw new ee(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ve.fromString(e,...n));return Gf(r),new It(t.firestore,t instanceof In?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tf(this,"async_queue_retry"),this.Vu=()=>{const r=il();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=il();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=il();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const n=new yn;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ps(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const n=this.mu.then((()=>(this.du=!0,e().catch((r=>{this.Eu=r,this.du=!1;const s=(function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l})(r);throw sn("INTERNAL UNHANDLED ERROR: ",s),r})).then((r=>(this.du=!1,r))))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=ul.createAndSchedule(this,e,n,r,(i=>this.yu(i)));return this.Tu.push(s),s}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class El extends oo{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Jf,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Jf(e),this._firestoreClient=void 0,await e}}}function $T(t,e){const n=typeof t=="object"?t:Uy(),r=typeof t=="string"?t:"(default)",s=ky(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=S_("firestore");i&&UT(s,...i)}return s}function Zf(t){if(t._terminated)throw new ee(L.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jT(t),t._firestoreClient}function jT(t){var e,n,r;const s=t._freezeSettings(),i=(function(l,u,f,d){return new pv(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Kf(d.experimentalLongPollingOptions),d.useFetchStreams)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new OT(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sr(We.fromBase64String(e))}catch(n){throw new ee(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Sr(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ee(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ee(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ee(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=/^__.*__$/;class HT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zn(e,this.data,this.fieldMask,n,this.fieldTransforms):new bs(e,this.data,n,this.fieldTransforms)}}function td(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class Al{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Al(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ao(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(td(this.Cu)&&qT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class KT{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||eo(e)}Qu(e,n,r,s=!1){return new Al({Cu:e,methodName:n,qu:r,path:He.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zT(t){const e=t._freezeSettings(),n=eo(t._databaseId);return new KT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function WT(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);id("Data must be an object, but it was:",a,r);const l=rd(r,a);let u,f;if(i.merge)u=new Ot(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const v=GT(e,p,n);if(!a.contains(v))throw new ee(L.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);YT(d,v)||d.push(v)}u=new Ot(d),f=a.fieldTransforms.filter((p=>u.covers(p.field)))}else u=null,f=a.fieldTransforms;return new HT(new wt(l),u,f)}function nd(t,e){if(sd(t=as(t)))return id("Unsupported field value:",e,t),rd(t,e);if(t instanceof ed)return(function(r,s){if(!td(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=nd(l,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(t,e)}return(function(r,s){if((r=as(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Fv(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:Ji(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ji(s.serializer,i)}}if(r instanceof wl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Sr)return{bytesValue:lf(s.serializer,r._byteString)};if(r instanceof It){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Qa(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Il)return(function(a,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Ka(l.serializer,u)}))}}}}}})(r,s);throw s.Bu(`Unsupported field value: ${yl(r)}`)})(t,e)}function rd(t,e){const n={};return yh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_r(t,((r,s)=>{const i=nd(s,e.Mu(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function sd(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof wl||t instanceof Sr||t instanceof It||t instanceof ed||t instanceof Il)}function id(t,e,n){if(!sd(n)||!(function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)})(n)){const r=yl(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function GT(t,e,n){if((e=as(e))instanceof Tl)return e._internalPath;if(typeof e=="string")return od(t,e);throw ao("Field path arguments must be of type string or ",t,!1,void 0,n)}const QT=new RegExp("[~\\*/\\[\\]]");function od(t,e,n){if(e.search(QT)>=0)throw ao(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tl(...e.split("."))._internalPath}catch{throw ao(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ao(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new ee(L.INVALID_ARGUMENT,l+t+u)}function YT(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ld("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XT extends ad{data(){return super.data()}}function ld(t,e){return typeof e=="string"?od(t,e):e instanceof Tl?e._internalPath:e._delegate._internalPath}class JT{convertValue(e,n="none"){switch(Hn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return De(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _r(e,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((a=>De(a.doubleValue)));return new Il(i)}convertGeoPoint(e){return new wl(De(e.latitude),De(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ka(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ms(e));default:return null}}convertTimestamp(e){const n=En(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ve.fromString(e);Ie(mf(r));const s=new gs(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||sn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cd extends ad{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new tw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ld("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tw extends cd{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(t){t=io(t,It);const e=io(t.firestore,El);return FT(Zf(e),t._key).then((n=>ow(e,t,n)))}class rw extends JT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function sw(t,e){const n=io(t.firestore,El),r=Xf(t),s=ZT(t.converter,e);return iw(n,[WT(zT(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,an.exists(!1))]).then((()=>r))}function iw(t,e){return(function(r,s){const i=new yn;return r.asyncQueue.enqueueAndForget((async()=>AT(await kT(r),s,i))),i.promise})(Zf(t),e)}function ow(t,e,n){const r=n.docs.get(e._key),s=new rw(t);return new cd(t,s,e._key,r,new ew(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pr=s})(Ly),Di(new ls("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new El(new Zy(r.getProvider("auth-internal")),new rv(r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new ee(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gs(f.options.projectId,d)})(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),dr(ph,"4.7.3",e),dr(ph,"4.7.3","esm2017")})();const Gn=document.currentScript,aw=()=>Gn?{apiKey:Gn.getAttribute("data-firebase-api-key")||"",authDomain:Gn.getAttribute("data-firebase-auth-domain")||"",projectId:Gn.getAttribute("data-firebase-project-id")||"",storageBucket:Gn.getAttribute("data-firebase-storage-bucket")||"",messagingSenderId:Gn.getAttribute("data-firebase-messaging-sender-id")||"",appId:Gn.getAttribute("data-firebase-app-id")||""}:null,lw=()=>{var t;return(t=window.framerSurveyConfig)!=null&&t.firebase?window.framerSurveyConfig.firebase:null},cw=aw(),uw=lw(),hw=th(cw||uw),ud=$T(hw);async function fw(t){try{if(!t||t.trim()==="")throw new Error("Project ID is required but was empty or undefined");const e=Xf(ud,"surveys",t.trim()),n=await nw(e);return n.exists()?n.data():null}catch(e){throw console.error("Error getting survey:",e),console.error("Project ID used:",t),e}}async function dw(t){try{return(await sw(BT(ud,"surveyResponses"),{...t,submittedAt:ke.now()})).id}catch(e){throw console.error("Error saving survey response:",e),e}}const pw={class:"survey-widget"},mw={class:"survey-modal"},gw={class:"survey-header"},_w={key:0,class:"loading"},yw={key:1,class:"error"},vw={class:"question-label"},Ew={key:0,class:"options"},Tw=["name","value","onUpdate:modelValue"],ww=["onUpdate:modelValue","name"],Iw={key:2,class:"rating"},Aw=["onClick"],bw={class:"form-actions"},Rw=["disabled"],Vw={key:3,class:"success-message"},Sw=Em({__name:"App",props:{projectId:{},licenseKey:{},position:{},buttonText:{},buttonColor:{}},setup(t){const e=t,n=Dn(!1),r=Dn(null),s=Dn(!1),i=Dn(null),a=Dn({}),l=Dn(!1),u=Dn(!1),f=Iu(()=>({...{"bottom-right":{bottom:"20px",right:"20px"},"bottom-left":{bottom:"20px",left:"20px"},"top-right":{top:"20px",right:"20px"},"top-left":{top:"20px",left:"20px"}}[e.position],backgroundColor:e.buttonColor})),d=async()=>{n.value=!0,s.value=!0,i.value=null,console.error("openSurvey",e);try{if(!e.projectId||e.projectId.trim()==="")throw new Error("Project ID bulunamad. Ltfen script element'inde 'data-project-id' attribute'unun olduundan emin olun.");const I=await fw(e.projectId.trim());I?(r.value=I,I.questions.forEach(C=>{a.value[C.id]=C.type==="rating"?0:""})):i.value="Anket bulunamad"}catch(I){console.error("Error opening survey:",I),i.value=I.message||"Anket yklenirken bir hata olutu"}finally{s.value=!1}},p=()=>{n.value=!1,u.value=!1,a.value={}},v=async()=>{l.value=!0,i.value=null;try{const I=Object.entries(a.value).map(([C,P])=>({questionId:C,value:P}));await dw({surveyId:r.value.id||e.projectId,projectId:e.projectId,responses:I,submittedAt:new Date}),u.value=!0}catch(I){i.value=I.message||"Yant kaydedilirken bir hata olutu"}finally{l.value=!1}};return(I,C)=>{var P;return Xe(),ut("div",pw,[n.value?ss("",!0):(Xe(),ut("button",{key:0,class:"feedback-button",style:Qs(f.value),onClick:d},fn(t.buttonText),5)),n.value?(Xe(),ut("div",{key:1,class:"survey-modal-overlay",onClick:Bu(p,["self"])},[Pe("div",mw,[Pe("div",gw,[Pe("h2",null,fn(((P=r.value)==null?void 0:P.surveyName)||"Anket"),1),Pe("button",{class:"close-button",onClick:p},"")]),s.value?(Xe(),ut("div",_w,[...C[0]||(C[0]=[Pe("div",{class:"spinner"},null,-1),Pe("p",null,"Anket ykleniyor...",-1)])])):i.value?(Xe(),ut("div",yw,[Pe("p",null,fn(i.value),1),Pe("button",{class:"framer-button-primary",onClick:p},"Kapat")])):r.value?(Xe(),ut("form",{key:2,onSubmit:Bu(v,["prevent"]),class:"survey-form"},[(Xe(!0),ut(_t,null,Zo(r.value.questions,(k,X)=>(Xe(),ut("div",{key:k.id,class:"question-section"},[Pe("label",vw,fn(X+1)+". "+fn(k.text),1),k.type==="multiple-choice"?(Xe(),ut("div",Ew,[(Xe(!0),ut(_t,null,Zo(k.options,(K,W)=>(Xe(),ut("label",{key:W,class:"option-label"},[Nc(Pe("input",{type:"radio",name:`question-${k.id}`,value:K,"onUpdate:modelValue":pe=>a.value[k.id]=pe,required:""},null,8,Tw),[[a_,a.value[k.id]]]),Pe("span",null,fn(K),1)]))),128))])):k.type==="text"?Nc((Xe(),ut("textarea",{key:1,"onUpdate:modelValue":K=>a.value[k.id]=K,name:`question-${k.id}`,placeholder:"Cevabnz yazn...",rows:"4",required:""},null,8,ww)),[[o_,a.value[k.id]]]):k.type==="rating"?(Xe(),ut("div",Iw,[(Xe(),ut(_t,null,Zo(5,K=>Pe("button",{key:K,type:"button",class:Ys(["rating-button",{active:a.value[k.id]===K}]),onClick:W=>a.value[k.id]=K},"  ",10,Aw)),64))])):ss("",!0)]))),128)),Pe("div",bw,[Pe("button",{type:"button",class:"framer-button-secondary",onClick:p}," ptal "),Pe("button",{type:"submit",class:"framer-button-primary",disabled:l.value},fn(l.value?"Gnderiliyor...":"Gnder"),9,Rw)])],32)):ss("",!0),u.value?(Xe(),ut("div",Vw,[C[1]||(C[1]=Pe("div",{class:"success-icon"},"",-1)),C[2]||(C[2]=Pe("h3",null,"Teekkrler!",-1)),C[3]||(C[3]=Pe("p",null,"Yantnz baaryla kaydedildi.",-1)),Pe("button",{class:"framer-button-primary",onClick:p},"Kapat")])):ss("",!0)])])):ss("",!0)])}}});let Be=document.currentScript;if(Be||(Be=document.querySelector("script[data-project-id]")),!Be){const t=document.querySelectorAll('script[type="module"]');Be=Array.from(t).find(e=>e.getAttribute("data-project-id")!==null)}const hd=((fd=Be==null?void 0:Be.getAttribute("data-project-id"))==null?void 0:fd.trim())||"",Nw=((dd=Be==null?void 0:Be.getAttribute("data-license-key"))==null?void 0:dd.trim())||"",Cw=(Be==null?void 0:Be.getAttribute("data-position"))||"bottom-right",Pw=(Be==null?void 0:Be.getAttribute("data-button-text"))||"Feedback",Dw=(Be==null?void 0:Be.getAttribute("data-button-color"))||"#0066ff";hd||(console.error("Framer Survey Widget: Project ID is missing!"),console.error("Make sure the script element has 'data-project-id' attribute"));const bl=document.createElement("div");bl.id="framer-survey-widget",document.body.appendChild(bl),d_(Sw,{projectId:hd,licenseKey:Nw,position:Cw,buttonText:Pw,buttonColor:Dw}).mount(bl)})();
